transportation recommendation important service navigation application previous transportation recommendation fail deliver satisfactory user recommendation route transportation mode uni modal taxi bus cycle largely overlook situational context propose mathsf hydra multi task recommendation multi modal transportation planning adaptive various situational context nearby poi distribution leverage availability exist rout urban data novel framework integrates uni modal multi modal taxi bus bus cycle route heterogeneous urban data intelligent multi modal transportation recommendation addition urban context feature construct multi source urban data latent representation user origin destination OD transportation mode user implicit feedback capture collaborative transportation mode preference user OD moreover propose model recommend route various uni modal multi modal transportation route gradient boost decision GBDT recommendation model multi task MTWDL recommendation model optimize framework route query recommendation deploy mathsf hydra baidu http baidu com service urban demonstrate effectiveness efficiency propose deployment august mathsf hydra route recommendation query distinct user GBDT model MTWDL model achieve percent relative improvement user click ratio respectively introduction transportation recommendation core component various service deeply penetrate everyday citizen transportation recommendation refers route recommend user specific OD input user online service baidu transportation recommendation query distinct user china per despite popularity frequent usage exist transportation recommendation fail deliver satisfactory user analyze user query baidu requirement inter modal transportation comparison percent user beijing tend request transportation recommendation uni modal rout taxi bus origin destination furthermore percent rout query user beijing feasible transportation recommendation percent transportation recommendation user click detail none recommend transportation satisfactory statistic datasets observation limitation transportation recommendation ignorance situational context instance concert taxi simultaneously multiple alternative transportation mode illustrate recommend efficient uni modal transportation recommendation scenario distance OD relatively purpose emergency effective route multiple transport mode taxi bus maybe attractive illustrate hence transportation recommendation adapt situational context concert flexible recommendation combine bus taxi user interface hydra baidu various transportation mode recommendation model detail recommendation multi modal transportation taxi bus recommend percent faster pure bus percent cheaper pure taxi address limitation preliminary propose hydra personalize context aware multi modal transportation recommendation inspire availability exist rout urban data novel framework integrates route transportation mode uni modal multi modal transportation heterogeneous urban data knowledge intelligent rout integrates various transportation mode unified service GBDT recommendation model adaptive situational context extract feature multi source urban data context variation adopt graph embed algorithm capture transportation preference user OD web recommendation service scalability online recommendation latency  user address service efficiency concern distribute offline data pipeline rpc online web service framework besides propose dedicate index structure online feature processing reduce online recommendation latency extensive urban datasets propose framework outperforms baseline algorithm metric online recommendation service achieves latency average production environment improve hydra framework deliver contribution reformulate multi modal transportation recommendation multiple binary classification adopt multi task paradigm recommendation across transportation mode propose novel recommendation model multi task MTWDL extends model multi task paradigm transportation lightweight GBDT model MTWDL complex powerful deployment strategy MTWDL server mode mobile mode discus deployment offs user online service fourth evaluate efficiency effectiveness MTWDL model explore influence exist baseline baseline MTWDL achieves performance metric impressive online latency scalability performance  description analysis introduces datasets preliminary data analysis user behavior data geographical data user profile data acquire baidu http baidu com navigation app meteorological data crawl china government website http com summarizes statistic datasets user behavior data user behavior data capture user interaction navigation application user behavior data baidu september november accord user interaction loop user behavior data categorize query display click query route user baidu display route recommend baidu user click indicates user feedback recommendation user click specific route displayed detail refer appendix computer society digital library http doi org ezproxy auckland TKDE detailed data description briefly explain distribution user behavior dataset beijing observation shanghai omit due limit depict spatial distribution origin destination query origin destination within central beijing employ  quantify spatial auto correlation specifically auto correlation origin destination respectively auto correlation destination possibly query specific POIs transport landmark spatial distribution origin destination motivate geographical data capture spatial dependency transportation route recommendation plot temporal distribution query display click per significant temporal fluctuation peak correspond weekend holiday peak correspond mid autumn festival national public holiday china statistically temporal auto correlation query respectively temporal dependency periodicity distribution distance query distance spherical distance percent within percent within indicates distance mid distance query demand online navigation application distribution click recommend route percent click involve bus bus bus bicycle percent click taxi public transportation preferable distribution beijing dataset geographical data intuitively geographical characteristic origin destination partially reflect situational context affect user preference transportation mode accordingly geographical dataset professional surveyor employ baidu crowdsourcing platform baidu poi data network data transportation data beijing shanghai data update daily detailed data description appendix available online supplemental meteorological data meteorological data tend reflect temporal dynamic situational context planning affect user preference transportation mode demand taxi severe pollution meteorological data september november meteorological data consists administrative district stamp strength direction quality index AQI categorize sunny cloudy rainy  AQI integer pollution user profile data user profile attribute reflect individual preference transportation mode instance subway effective taxi urban commuter likely choice owner user profile attribute multiple baidu application baidu baidu app baidu beijing dataset contains distinct user shanghai dataset contains distinct user consists user demographic attribute gender social attribute educational user owner user profile anonymized cannot associate sensitive personal information phone plot distribution beijing dataset baidu user statement framework overview statement overview architecture hydra statement denote unary multi modal transport mode user departure OD arbitrary geographical location longitude latitude recommend appropriate transport mode user framework overview overview hydra consists component route generation feature construction transport mode preference representation transportation recommendation route generation module leverage exist uni modal rout generate feasible route transport mode thereafter feature construction module extract feature various urban datasets meanwhile transport mode preference representation module capture user resp OD transport mode preference representation graph embed finally transportation recommendation module integrates handcraft feature embed feature recommendation transport mode taxi bus cycle taxi bus bus cycle mode uni modal transport mode whereas taxi bus bus cycle multi modal transport mode taxi bus bus cycle already baidu besides accord analysis origin destination percent taxi query bus origin destination percent cycle query bus statistic query multi modal multi modal transportation demand treat uni modal multi modal transport mode distinct transport mode model extendable potential transport mode straightforward multi modal transport mode recommendation future mathsf hydra hydra overview hydra overview route generation adopt exist rout generate feasible route transport mode query binding apply bind origin destination location validate endpoint location bound taxi transport bus employ task parallel paradigm route candidate generation specifically initialize multiple individual thread thread invokes rout generate feasible route correspond transport mode uni modal transport mode bidirectional shortest apply transportation network besides contraction hierarchy CH pre construct transportation network reduce latency valid route generate various criterion distance shortest transfer multi modal transportation propose effective substitution heuristic generate multi modal route taxi bus bus cycle generate feasible bus route exist bus bus route enumerate route invoke taxi cycle derive sub route origin sub route destination respectively concatenate bus sub route taxi sub route generate taxi bus route candidate combine bus sub route cycle sub route generate bus cycle route candidate restrict modal transfer guarantee utility concatenate route multi modal route candidate satisfies criterion faster bus route cheaper taxi route pre compute cache prune infeasible mode transfer OD enumeration substitution heuristic yield multi modal route generation average overall route generation summarize algorithm appendix available online supplemental finally internal rank model apply transport mode filter route overlap route mode comparison route transport mode display offline processing route directly retrieve user behavior data production environment query understand component invoked route generation bind fuzzy keywords concrete POIs omit discussion scope transportation recommendation feature construction introduce construct transform augment feature vector appendix available online supplemental feature construct dataset detailed description feature price eta consideration user preference extract network distance route distance eta price transfer transfer model display network distance distance network cycling price zero spatial feature extract district poi category feature origin destination transportation mode choice destination poi category demand bus sport tourist attraction POIs average contrast demand bus service POIs average detailed poi category appendix available online supplemental calculate spherical distance OD relation distance percentage transport mode correlation spherical distance transport mode choice cycle choice shorter whereas bus choice longer peak demand taxi distance connectivity transport fix transport availability adjacent OD incorporate regional dependency partition non overlap network origin compute poi poi category regional poi distribution transport facility intersection bus bus regional transport facility distribution mode click regional historical mode distribution extract feature destination OD overall recommendation performance overall recommendation performance feature distribution beijing dataset feature distribution beijing dataset temporal feature exploit workday temporal feature distribution transportation mode choice demand cycle mainly daytime whereas demand taxi taxi bus illustrate transport mode preference weekday weekend peak however peak weekday earlier weekend peak weekday later conversely peak weekend closer demand evenly distribute daytime meteorological feature adopt AQI direction meteorology feature depicts correlation transport mode preference distribution demand  rainy whereas demand bus  user feature construct user feature user demographic attribute social attribute user historical mode distribution appendix available online supplemental depicts correlation user transport mode choice demand taxi whereas prefer bus transport mode preference representation transport mode preference representation aim collaborative relationship user OD transport mode intuition user OD via transport mode transport mode preference inspire recent embed preserve local network structure construct heterogeneous graph user node OD node OD transport mode node user behavior data target project node dimensional vector latent reflect neighborhood relationship proximity  construct click user clicked route transport mode specific OD regard adopt  skip gram specifically click latent vector vod OD denote  maximize conditional probability  logp  SourceRight click MathML additional feature node  aware context node click heterogeneous neighbour node valid context node OD  conditional probability aware neighborhood  presence  sourcewhere context representation vector context node node graph reduce computation complexity employ negative sample efficient objective function becomes logσ  logσ  sourcewhere sigmoid function model click whereas negative uniform distribution distance user resp OD embed transportation mode embed reflect preference user resp OD transport mode user resp ODS transportation mode preference latent embed illustrative heterogeneous transportation graph indicates frequency user  resp OD  click route specific transport mode illustrative heterogeneous transportation graph indicates frequency user vui resp OD  click route specific transport mode  recommendation introduce gradient boost decision GBDT model multi modal transportation recommendation model transport mode recommendation multi classification embed vector transport mode derive calculate inner embed vector production environment however embed suffers percent query user user migrate rout user baidu target OD OD query user handle concatenate embed vector user OD handcraft feature dimensional feature vector preprocessed dataset instance transport mode feature dimension transform raw data 2D matrix feature vector RM ith transport mode employ gradient boost recommendation model gradient boost algorithm data mining sparse dimensional feature specifically sequentially generate classifier ensemble classifier generate overall predictive  SourceRight click MathML additional feature estimate transport mode ith instance softmax regressor multi classification   SourceRight click MathML additional feature parameter vector qth objective minimize inl SourceRight click MathML additional feature entropy loss hyper parameter regularization respectively gradient function derive harder traditional optimization task classifier sequentially approximate gradient previous objective tth iteration becomes gift  sourcewhere gradient statistic detailed deduction MTWDL recommendation GBDT model effective recommendation service however model powerful extract feature representation data limit expressive transport mode recommendation introduce multi task MTWDL model multi modal transportation recommendation model advantage MTWDL fold stack multiple neural network layer MTWDL capable capture feature interaction latent representation transportation mode preference representation module MTWDL introduces embed layer dimensional representation dimensional categorical feature MTWDL formulates transport mode recommendation user click prediction multiple individual task introduce multi task framework improve recommendation performance task definition GBDT model multi formulation assigns instance without click negative however formulation distinguish difference user click behavior specific clicked transport mode define multiple related task tmk auxiliary task optimize simultaneously feature matrix correspond label define task task  aim binary classifier fmi predict transport mode prefer instance   SourceRight click MathML additional feature  estimate click likelihood transport mode ith instance similarly auxiliary task aim binary classifier predict user click transport mode sourcewhere estimate likelihood user click ith instance model introduce model individual task adopt model widely recommender consists component component user preference memorization component feature generalization architecture MTWDL jointly multiple task auxiliary task embed layer component task architecture MTWDL jointly multiple task auxiliary task embed layer component task specifically component feature occurrence memorization define mij SourceRight click MathML additional feature input feature vector learnable matrix bias component stack multiple neural network layer capture feature representation embed layer apply transform categorical feature dimensional dense vector concatenate dense embed vector continuous feature concatenate vector fully layer fully layer transform input vector relu SourceRight click MathML additional feature input output lth layer parameter layer relu rectify linear activation function component explores feature combination improve model generalization output combination component component  SourceRight click MathML additional feature output activation function parameter component parameter output component adam optimizer employ optimization multi task recommendation paradigm multi task parameter approach constraint approach MTWDL paradigm parameter component task parameter mechanism improves generalization model MTWDL consists component component component task specific component specifically task component task individual component task specific component task component component identical model task feature feature task specific feature feature temporal feature meteorological feature identical task whereas task specific feature eta distance price task difference MTWDL model multiple output layer task task  output layer define    SourceRight click MathML additional feature   task specific parameter component component respectively objective MTWDL learnable parameter optimize jointly task  objective define    SourceRight click MathML additional feature  indicates user click transport mode hyper parameter alleviate imbalance auxiliary task objective define  SourceRight click MathML additional feature  indicates user click transport mode hyper parameter click ratio recommendation coverage ratio beside objective task relationship task auxiliary task output task likelihood user click transport mode denote  estimate probability user click transport mode  SourceRight click MathML additional feature aim minimize jensen shannon divergence probability user click transport mode   SourceRight click MathML additional feature dkl dkl define SourceRight click MathML additional feature dkl logp SourceRight click MathML additional feature dkl logq SourceRight click MathML additional feature task specific objective jensen shannon divergence loss aim optimize objective function   SourceRight click MathML additional feature hyper parameter importance jensen shannon divergence loss  hydra deployed baidu implementation deployment detail mapping offline processing due complex data dependency propose automatic pipeline data integration feature engineering employ  offline data pipeline platform  source program abstraction allows program processing data various distribute compute hadoop  spark  data  operator filter distribute operation transparent user GBDT training xgboost library GBDT model GBDT model update daily basis data consideration exclude seasonal define slide training data selection data pipeline model update script trigger update model MTWDL training  platform implement MTWDL model  efficient scalable platform variety AI empower baidu component embed layer transforms categorical feature dimensional embed vector concatenates continuous feature input vector input vector fed fully layer fully layer consists hidden relu activation function hyper parameter rate dropout rate respectively batch output fully layer input feature multi task component accelerate model training daily update embed parameter initialize model online processing baidu billion query crucial effective scalable online service user efficient index scalable prediction service enable latency throughput online service index online feature processing batch statistical feature mapped coordinate origin coordinate query regional poi distribution traditional spatial index logn consume propose dedicate index mapping specifically grain grid coordinate unique grid allocate correspond grid irregular polygon therefore grid intersect multiple minimum bound rectangle MBR partition grid intersect index database internally grid hash redis partition network grid associate average GBDT prediction web service  http github com   scalable remote procedure rpc framework throughout baidu GBDT model duplicate data distribute china reduce network latency service specifically online service contains component retrieve geographical information meteorological data user profile data parallel integrate raw route execute online feature engineering leverage metadata generate offline data pipeline feature vector model sort mode model return transport mode user percent transport mode correspond instead recommend transport mode feasible MTWDL prediction mode MTWDL prediction server mode mobile mode server mode model server data whereas mobile mode model mobile phone along navigation app specifically server mode implement performance parallel predictor  adopt  mechanism  avoid redundant data operation mobile mode implement lightweight predictor  java GBDT prediction mode request meteorological data exist online service retrieve geographical data user profile data redis service integrate raw route production environment finally server mode route correspond raw feature compute retrieve server network server mode mobile mode rout request relatively frequency service model mobile mode load flush query induces longer prediction server mode model update daily basis mobile mode frequent app update experimental setup conduct datasets described mainly focus overall performance feature contribution parameter sensitivity robustness approach user satisfaction analysis efficiency scalability split data september november training november november validation remain metric adopt overall NDCG precision recall metric evaluate performance NDCG metric transport mode consideration whereas metric recommendation baseline approach baseline variant hydra  recommends transportation mode route user historical preference transport mode choice user recommend  recommends transportation mode route OD historical preference popular transport mode OD recommend LR recommends transportation mode route via logistic regression model input feature described RF recommends transportation mode route random input feature described LTR popular  rank pairwise loss minimize feature described input  transportation mode recommendation graph embed recommendation inner user vector transportation mode vector inner OD vector transportation mode vector  framework integrates linear model neural network softmax layer obtain model output DeepFM recommendation model combine factorization machine feature interaction neural network hydra version hydra model gradient boost decision recommendation model hydra version hydra model multi task recommendation model overall recommendation depicts overall baseline respect evaluation metric observation hydra achieves performance metric prec indicates effectiveness model although  RF achieves prec hydra achieve balance prec rec evaluate hydra consistently outperforms hydra metric demonstrates effectiveness MTWDL framework specifically hydra achieves percent improvement hydra beijing shanghai respectively improvement rec percent beijing shanghai although hydra performs hydra outperforms non model efficient hydra hydra longer training hydra hydra competitive  DeepFM expectation situational context information tailor feature engineering  multi modal transportation recommendation  DeepFM outperform baseline illustrate effectiveness model performance solely  dataset proportion user resp OD overall incorporate handcraft feature embed feature multi task framework outperforms baseline feature importance analysis evaluate effectiveness feature construction exam importance feature model gradient boost decision model rank feature information gain information gain indicates frequency feature split node individual report feature relative information gain feature eta correspond mode expectation consideration transport mode choice besides user attribute user social attribute historical mode preference preference rank consumption rank significant contribution transport mode prediction feature rank rank spatial feature temporal feature validates intuition spatial temporal dependency influence transport mode choice cannot directly obtain information gain neural network apply perturbation feature rank evaluate importance feature MTWDL importance feature calculate performance loss MTWDL correspond feature shuffle report feature relative increase loss feature bus eta important feature temporal feature becomes feature meteorological feature becomes feature user profile feature income ranked respectively GBDT model categorical feature contribute multi modal transportation recommendation advantage MTWDL handle dimensional categorical feature feature ranked information gain hydra feature ranked information gain hydra input perturbation feature importance hydra parameter sensitivity analysis parameter sensitivity hydra hydra evaluate performance hyper parameter beijing dataset shanghai hydra report influence maximum depth sample rate important parameter model maximum depth report hydra performs stable maximum depth hydra achieves performance maximum depth sample rate report performance improvement increase sample rate performance degrades increase sample rate sample avoid overfitting sample rate limit model capture useful feature combination parameter sensitivity beijing dataset parameter sensitivity beijing dataset hydra report influence embed regularization parameter embed hydra model achieves embed embed information categorical feature depicts influence performance improvement improve performance degradation improve validates model relationship task improve model performance robustness robust algorithm perform evenly subgroup query query perspective user profile perspective OD profile perspective user gender OD functionality poi distribution correspond classical apply cluster OD disjoint illustrate performance GBDT model MTWDL model subgroup beijing respectively shanghai user strongly stable metric validates robustness user OD GBDT model stable metric rec difference percent indicates variation OD profile perspective significant MTWDL model improves performance mitigates impact overall robustness beijing dataset hydra robustness beijing dataset hydra robustness beijing dataset hydra robustness beijing dataset hydra user interview online model deployed baidu mid model route planning request distinct user ass user satisfaction model recommendation publish survey questionnaire frequent baidu user overall valid questionnaire questionnaire satisfaction category percent user recommendation percent user recommendation becomes recommendation user moreover conduct online production environment hydra achieves percent click ratio improvement hydra improvement query satisfied hydra significant gain online user satisfaction user satisfaction efficiency scalability finally evaluate efficiency scalability randomly query average recommendation baseline model report model generally longer statistical baseline model longer statistical model query response latency framework production environment query response latency compose rout recommendation recommendation evaluate latency GBDT model hydra MTWDL model hydra report query per QPS rout latency increase latency GBDT model increase whereas latency MTWDL model increase observation demonstrate although hydra outperforms hydra recommendation accuracy consume efficiency gap QPS latency gap relatively QPS peak QPS online service hydra applicable online workload handle hydra overall rout bottleneck hydra attention recommendation hydra efficiency scalability efficiency scalability related route recommendation route recommendation attract attention academia google baidu routine route recommendation apply algorithm shortest distance query predefined function another important direction quality recommend route improve leverage historical trajectory specifically capture intelligence taxi driver via landmark graph recommends route personal preference efficiency fuel efficiency individual driver recently route recommendation mobility attract research improve efficiency revenue however uni modal route recommendation cannot directly apply multi modal route recommendation  considers multi modal recommendation embed user OD transport mode suffers extra model strategy handle instance urban compute development urbanization various data generate gps sensor building apply tackle various urban issue predict urban safety multiple spatial temporal factor moreover predicts taxi demand multi source urban data urban query motivate integrate multiple urban datasets improve performance route recommendation various transport mode knowledge integrates multiple source urban data route recommendation various transport mode data driven urban conclusion hydra personalize context aware multi modal transportation recommendation adaptively recommends uni modal multi modal transportation route accord user preference situational context extract feature user behavior data urban data  source learnt embed feature via heterogeneous transportation graph enhance recommendation performance moreover gradient boost model multi task model respectively devise multi modal transportation recommendation finally deployment issue optimize hydra scalable offline data pipeline performance spatial index construction web service framework extensive evaluation datasets validate effectiveness efficiency hydra