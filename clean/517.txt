despite increasingly emerge application primary concern blockchain fully practical inefficiency data query query blockchain indirect query blockchain database greatly degrade authenticity query conquer authenticity propose verifiable query layer VQL deployed efficient verifiable data query service blockchain middleware layer extract data underlie blockchain efficiently reorganizes database prevent falsify data middleware cryptographic fingerprint calculate construct database database fingerprint verify miner blockchain moreover public user verify entire database database middleware layer implement VQL verification scheme conduct extensive practical blockchain evaluation demonstrate VQL efficiently various data query service guarantee authenticity query blockchain introduction cryptocurrencies embody bitcoin descendant digital currency spark surge innovation decentralize compute blockchain fundamental technology cryptocurrencies characteristic advantage decentralize storage immutability besides payment blockchain technique wider smart contract chain management healthcare distribute storage iot blockchain tremendous potential reduce operating increase resistance manipulation prevent fraud facilitate execution contract blockchain technique bypass data storage fraud distribute ledger consensus mechanism scheme limited query service pursuit excellent performance blockchain adopt database underlie database leveldb bitcoin client ethereum however database usually lsm barely satisfactory reading performance due complicate processing operation random reading addition query inefficiency query native client limited versatile query efficiently application approach tackle query limitation blockchain maintain extra structure peer node project   project  information index besides native client richer query  structure efficient query transaction bitcoin network instance raw blockchain data balance address query service provider pre compute maintain balance address extra structure quickly return balance query without traverse transaction data  architecture requirement various query balance solely balance query extra data structure customize predefined query assume bitcoin node already query address balance user query transaction detail related address peer node adopt query blockchain scheme brings additional node maintain extra specialized transaction address another indirect query database reading performance blockchain data instead database adopt native client  integrates typical database ethereum expedite data query blockchain com address information historic transaction database advance  incorporates memory database boost data query blockchain analysis however assume server return blockchain data server return incorrect conflict blockchain data due security vulnerability feasible mechanism verify data authenticity highly desire therefore research manage efficient verifiable query service blockchain involves challenge address versatile query service blockchain data efficiency application ensure data consistency query data underlie blockchain data verification scheme query user validate partial data affirmative systematically implement verifiable query layer VQL middleware layer efficient verifiable query service blockchain superior exist propose service capable meeting demand query efficiency data authenticity simultaneously novel framework  achieves verifiable boolean query blockchain data exploit accumulator authenticate data structure however radical modification exist blockchain consists layer underlie blockchain network middleware layer upper application layer cater various query application layer middleware layer extract reorganize data underlie blockchain database ensure validity middleware data construct database generate fingerprint cryptographic hash content database timestamp etc fingerprint verify miner blockchain virtue immutability blockchain verification scheme prevent falsify data middleware layer public user entire blockchain data verify database trust service addition simplify query verification scheme enable user validity database query involves abundance popularity ethereum application employ ethereum  illustrate feasibility effectiveness propose architecture extend blockchain application VQL adapt blockchain conclude contribution VQL query service layer architecture efficiently various query service blockchain account query complicate query browse blockchain database middleware dynamically construct update propose service public verification scheme construct database ensure consistency underlie blockchain fingerprint database verify blockchain miner miner user blockchain data verify correctness database fingerprint utilize authenticate data structure manage fingerprint forth simplify query verification algorithm user verify without blockchain data user issue verification request database involve efficiently validate fingerprint develop middleware prototype along verification scheme conduct extensive evaluation ethereum testnet mongodb demonstrate VQL efficiently various query verification service blockchain remainder organize introduce preliminary technique authenticity analysis implementation evaluation review related conclude preliminary concept briefly introduce technique related clarify necessity blockchain blockchain distribute ledger reliably transaction decentralize network typical blockchain usually comprises series chain refer precede mainly consists header attribute timestamp hash predecessor contains correspond transaction detail blockchain network node ledger consistency guaranteed adopt various consensus algorithm implementation blockchain application bitcoin maintain distribute ledger bitcoin creates decentralize byzantine fault tolerant transaction paradigm conforms requirement cryptocurrency infrastructure blockchain network contains feature transparency network accessible participant participant blockchain blockchain consensus peer node network consensus blockchain unintentional fork valid discover honest peer blockchain accepted peer immutable verifiable discover globally accepted modification impossible participant verify blockchain merkle patricia merkle patricia mpt introduce ethereum cryptographically authenticate data structure combine trie merkle mpt binding node mpt leaf node LN node BN extension node EN leaf node public prefix terminal node extension node hash node node array node viable leaf node extension node prefix hex prefix node target fully traverse mpt node encode recursive prefix  code encode arbitrarily nest array binary data denote hash mpt fully deterministic binding mpt construct guaranteed regardless insertion hash superiority mpt logn efficiency insert deletes node insertion deletion merkle incur moreover publicly hash anyone exists specific mpt node along VQL propose VQL efficient verifiable data query service blockchain application introduce overview architecture structure middleware layer guarantee consistency middleware database underlie blockchain data authenticity propose database verification scheme prevent falsify data middleware simplify verification forth simplify query verification scheme ordinary user blockchain data scheme enables query user validate query partial database data finally conduct comprehensive analysis data authenticity propose architecture subsection introduce architecture propose query service model middleware structure along update scheme illustrate service model involves blockchain distribute database ledger middleware layer efficient data query service reorganize blockchain data application layer various service user middleware query service model blockchain application underlie blockchain blockchain transaction generate user public ledger blockchain platform ethereum apis access transaction utilize apis extract transaction balance information blockchain service model apply blockchain logistics chain information delivery transaction consortium blockchain middleware layer blockchain data middleware layer extract reorganizes information transaction balance construct database efficient data query data analysis illustration middleware structure middleware consists micro database contains data generate interval specify database header contains cryptographic hash database database hash database utilized verify data integrity database structure middleware layer algorithm middleware update ethereum BC underlie blockchain ensure DB middleware database extract transaction balance information BC calculate balance construct micro database  transaction balance fingerprint  merge  DB return DB underlie blockchain algorithm algorithm update middleware layer newly generate generate blockchain reorganize blockchain data update middleware layer specific frequency algorithm validate confirm miner middleware layer update date query service middleware extract transaction balance information blockchain data construct correspond database fingerprint database calculate avoid unnecessary modification database middleware extract information construct database immutable frequency daily update tentative adjust query requirement application hourly update logistics application layer middleware layer construct database mature database software various data query service application layer application layer efficiently conduct various data analysis machine task blockchain data besides query service normal user data platform application layer public audit service audit institution auditor audit information underlie blockchain easily verifiable evidence return middleware layer database verification scheme subsection verification scheme database miner public user guarantee consistency middleware underlie blockchain miner verification scheme illustrates database verification middleware blockchain various transaction generate user blockchain miner middleware layer extract transaction blockchain reorganizes data database efficient query service prevent falsify data middleware generate unique fingerprint construct database middleware layer finally construct fingerprint database verify miner underlie blockchain database verification scheme user database verification scheme public database verification scheme guarantee data middleware layer consistent blockchain verify propose middleware layer deployed access public user data query query user usually trust query return middleware layer database layer already verify miner user database fetch data honest miner verify authenticity database database fingerprint miner database fingerprint database fingerprint uniquely construct individual database middleware layer fingerprint database data content database construct database data database export data unified platform format cryptographic hash data calculate format file hash function sha hash miner consistency data database underlie blockchain data construct database contains database database database database software version database construct database subsequent database verification stage finally fingerprint generate hash fingerprint calculate data file disk therefore fingerprint platform independent ensures miner obtain identical fingerprint data database database verification database fingerprint miner verify construct database middleware guarantee consistency middleware data underlie blockchain data construct micro database efficient data query middleware layer fingerprint algorithm algorithm describes propose database verification scheme construct middleware layer miner blockchain data locally construct another database local data database generation program correspond fingerprint generate miner predefined hash function local database miner verify consistency data middleware layer underlie blockchain fingerprint database fingerprint publish middleware layer database fingerprint calculate miner blockchain data finally successfully verify consistency middleware layer underlie blockchain miner database fingerprint transaction blockchain transaction transfer zero miner middleware fingerprint information data fingerprint insert authenticate data structure mpt blockchain database fingerprint blockchain cannot tamper consensus scheme application layer application query data middleware layer trust database fingerprint blockchain algorithm miner database verification  database construct middleware layer verify  database construct blockchain miner  mpt maintain miner BC underlie blockchain ensure return accept database verify otherwise return reject fingerprint  middleware construct  BC fingerprint  fingerprint  insert fingerprint  mpt synchronize mpt middleware fingerprint  mpt  BC return accept return reject information blockchain propose information regard database fingerprint underlie blockchain information assure immutable consensus algorithm miner verifies validity database middleware layer addition database fingerprint merkle patricia database fingerprint deterministic hash generate database fingerprint cryptographic authentication data structure unique entire therefore hash blockchain application layer information policy verification scheme apply diverse blockchain public blockchain private blockchain consortium blockchain private blockchain consortium blockchain miner information specific height however scenario public blockchain due propagation transaction information competition transaction information cannot guaranteed stipulate fail verification situation database verification fail verification situation local fingerprint calculate miner middleware error report middleware layer middleware layer receives amount fail verification report execute diagnostic procedure correctness database error report extreme situation fork due network partition middleware miner chain meanwhile database rebuilt fingerprint revoke fail verification report scheme middleware false database fingerprint simplify query verification scheme database verification scheme subsection miner query user without blockchain data entire blockchain credible miner verify database construct radical guarantee authenticity database sometimes unnecessary ordinary user data query remedy issue propose employ authenticate data structure fingerprint management forth simplify query verification algorithm verification query user merkle patricia database fingerprint due uncertain factor public blockchain network delay transaction fee middleware user cannot height database fingerprint advance height fingerprint indeed confirm miner employ merkle patricia fingerprint height existence non existence database fingerprint query user directly correctness database fingerprint without information mpt maintain miner update miner verify validity database database fingerprint blockchain moreover mpt data synchronize middleware layer miner merkle proof query user miner adopt mpt instead directly return false fingerprint request user user validation service demand miner mpt enables miner mpt proof server instantiate database fingerprint storage mpt presume database fingerprint database fingerprint hash height fingerprint information fingerprint merkle patricia neglect detailed description operation mpt insertion update deletion already implementation available illustrative database fingerprint mpt illustrative database fingerprint mpt simplify query verification illustrates relationship miner user middleware data verification scheme comprises miner maintain credible data underlie blockchain layer user application layer query data blockchain query service belong middleware layer query service user dash arrow miner service signifies aforementioned miner database verification solid arrow interaction simplify query verification scheme simplify scheme miner synchronize mpt service mpt hash query user request verification user sends data query server return query along database file query involves correspond merkle proof function database reconstruction commercial database mongodb combine credible mpt hash obtain miner user easily validity database fingerprint merkle proof user confirm information hash database fingerprint accord correspond height mpt data verification scheme algorithm simplify query verification  mpt blockchain DBs middleware database user query involves  query middleware layer proof merkle proof database fingerprint ensure return accept  otherwise return reject mpt  blockchain miner verify false DB DBs construct DB ups middleware layer fingerprint DB middleware layer merkle proof proof middleware layer verify  fingerprint proof verify verify query DBs locally query    return accept return reject return reject algorithm simplify query verification algorithm perform query user user request data query middleware query  server fingerprint database involve DBs correspond database file user reconstruct database calculate fingerprint meanwhile verification request miner thereby mpt hash  signifies verify database database fingerprint calculate user middleware layer obtain merkle proof fingerprint proof fingerprint calculate hash  hash  hash accord correctness fingerprint guaranteed presence fingerprint mpt merkle proof function detailed merkle proof database involve confirm user query database locally construct file query  identical previous  middleware user finally trust accept merkle proof fingerprint suppose query user existence database fingerprint  already exists mpt leaf node LN leaf EN BN EN BN LN middleware layer merkle proof  code node along user existence merkle proof  array node reference inside previous node user correctness  code array successively leaf hash finally calculate identical publicly prefix along fingerprint database fingerprint truly exist algorithm pseudo code algorithm execute query user verify database fingerprint exists mpt algorithm algorithm  mpt blockchain fingerprint fingerprint database checked proof merkle proof database fingerprint ensure return fingerprint exists mpt otherwise return false hash  return false conforms fingerprint return return false conforms fingerprint  return false similarly utilize merkle proof non existence suppose user reconstructs database broken tamper file calculates fingerprint  exist mpt server return merkle proof EN BN LN hash verify calculate hash obtain miner nevertheless prefix generate proof fingerprint fingerprint exist mpt data authenticity analysis user receives query middleware query database consistent underlie blockchain authenticity query data guaranteed conduct data authenticity analysis aspect reward scheme miner integrity database verifiability query reward scheme miner service verification database middleware layer realize miner compute resource storage rational reward scheme incentivize miner verify database owe demand scenario blockchain reward scheme miner query model private blockchain miner middleware layer private service verification fee consortium blockchain various agreement community consortium middleware layer fee apply public blockchain middleware reward miner mining pool successfully validate database reward scheme database verification exist blockchain verification scheme practical implement blockchain exist source project incorporate incentive mechanism verification reward miner validate middleware database correspond database fingerprint blockchain validation reward mechanism management fingerprint cod blockchain peer node deploy smart contract blockchain facilitate verification miner miner construct database blockchain data database generation code middleware database fingerprint calculate smart contract confirmation finally middleware announce fingerprint reward miner correctly verify database miner participate verification task reward attractive smart contract maintain mpt storage database fingerprint simplify query verification integrity database consistency database middleware layer underlie blockchain data realize database verification scheme miner database construct middleware layer database publish file fingerprint meantime miner construct another database blockchain data calculate fingerprint predefined hash function fingerprint database middleware database verify moreover integrity information immutable fingerprint blockchain verification manage mpt structure verifiability query integrity database middleware layer guaranteed query user consistent middleware database realize verifiability query user verification database verification scheme simplify query verification scheme user database verification user blockchain data consistency miner authenticity analysis conduct request data miner anchor node blockchain network miner query assume absolutely reliable therefore situation malicious miner trivial scope simplify query verification scheme allows user involve database database validity fingerprint leverage mpt structure database reconstruct file fingerprint calculate locally user authenticity involve database ensure fingerprint indeed exist mpt maintain miner finally user query valid database locally consistent query return middleware layer implementation evaluation feasibility performance query service implement prototype testnet blockchain ethereum prototype implementation middleware user friendly apis user application apis underlie blockchain user application apis various query database verification audit query interface validation interface transaction balance information meanwhile blockchain apis query function blockchain data request interface transaction global blockchain employ popular document orient database mongodb data storage middleware mongodb efficient query data arbitrary transaction smart contract achieve reading performance building index mpt fingerprint storage implement javascript leveldb evaluate performance without interference network communication platform server intel xeon 7GHz cpu GB ram ubuntu lts data query service blockchain data  network popular ethereum  height performance evaluation synchronization scratch blockchain usually blockchain data immutable moreover synchronization generally dominate network bandwidth performance physical machine node network bandwidth performance peer therefore evaluation blockchain synchronization scope various data query service throughput query transaction query account query query contrast propose VQL geth client official implementation ethereum protocol query efficiency throughput evaluate throughput performance propose VQL eth client eth client synchronizes blockchain VQL organizes information within height addition comparison eth client VQL evaluate query efficiency VQL synchronize query conduct query query transaction transaction hash query balance account address throughput VQL eth client transaction account query respectively query VQL eth client query query respectively query transaction transaction hash VQL eth client query query query balance account address achieve throughput query query relatively amount account propose VQL achieve throughput native eth client performance VQL load scenario increase synchronize degrade query throughput query category throughput transaction query rapidly amount transaction increase sharply height grows query performance eth client VQL query query efficiency critical criterion propose query blockchain various transaction generate user query eth client VQL query efficiency eth client json rpc api query accordingly develop api middleware layer query service query usually millisecond query randomly query conduct query scenario query eth client VQL load query query significantly increase eth client VQL remain relatively eth client plenty query evaluation scenario contrary propose VQL query optimizes data storage faster query scenario comparison load VQL synchronize limited query efficiency query increase slightly transaction query query individual transaction information conduct query transaction native eth client limited apis retrieval transaction detail VQL query transaction attribute transaction api query transaction hash comparison query efficiency transaction query eth client VQL load transaction query usually query bunch randomly transaction evaluate transaction transaction transaction almost linearly promotes query VQL eth client query amount transaction data load comparison synchronize VQL query scenario longer volume transaction grows dramatically height increase account query middleware layer construct micro database contains data transaction detail balance detail account apart blockchain data account balance extra historical balance description account balance native eth client api balance query function VQL conduct evaluate query account balance eth client VQL query account query randomly account efficiency balance query scenario account account query account balance increase linearly account grows query account balance amount VQL within fifth eth client propose middleware information account balance calculate advance organize database addition comparison load VQL synchronize slightly promotes query query besides individual account query query middleware layer application layer usually conduct various data analysis machine task task feature extract data account transaction transaction amount eth middleware ability data query within specific native eth client cannot perfectly conduct performance evaluation query transaction account respectively application related data analysis implement query temporal query numerical query information transaction balance temporal query query blockchain data within specific transaction generate numerical query query numerical data transaction eth query category eth client VQL query generate query VQL query eth client query transaction within randomly chosen VQL completes query within eth client finally query account balance transaction perform account VQL eth client eth client directly temporal query achieve traverse transaction inside however numerical query cannot eth client blockchain data judge numerical excessively consume therefore  numerical query propose VQL query eth client VQL remarkable advantage eth client due organize micro database middleware efficient query evaluation query database verification database verification efficiency important criterion propose generation frequency database fingerprint middleware fingerprint transaction balance respective daily data database verification generate blockchain middleware layer construct database blockchain verification database miner transaction database balance database involve information daily database generate middleware database verification increase fluctuation transaction database amount transaction suddenly grows verification propose efficiently verify database construct middleware layer applicable practical blockchain performance miner database verification performance miner database verification database storage efficiency database verify middleware layer database verification database transaction balance generate blockchain middleware layer construct database blockchain transaction database middleware layer 4GB database around MB transaction database increase notably twice due amount transaction balance database occupies storage MB propose efficiently database construct middleware layer query service database verification proof mpt simplify query verification dominate communication overhead incur merkle proof merkle proof mainly layer mpt deeper leaf node locates mpt longer becomes proof middleware layer return database fingerprint evaluation employ sha hash function generate fingerprint database mpt insert mpt average merkle proof mpt invoke function merkle proof kilobyte closely associate depth depth fingerprint principally distribute proof gradually increase depth grows conforms previous analysis merkle proof node along  code node byte data miner database verification overhead merkle proof practically negligible performance simplify query verification storage mpt mpt database fingerprint update miner synchronize middleware layer storage miner middleware layer storage mpt amount fingerprint increase investigate leveldb database file generate mpt amount amount fingerprint linearly promotes storage indicates mpt extra storage amount fingerprint grows storage increase MB fingerprint amount relatively database construct miner database verification therefore storage acceptable achieve simplify query verification scheme throughput proof simplify verification scheme middleware layer return merkle proof query user investigate verification request middleware handle concurrently overhead return merkle proof performance throughput proof various fingerprint throughput return proof decrease amount fingerprint grows mpt becomes fingerprint longer fingerprint middleware verification request per fingerprint acceptable meanwhile average merkle proof slowly fingerprint increase depth distribution investigate proof distribution fingerprint depth greatly fingerprint depth distributes scenario fingerprint amount amount fingerprint depth mainly distributes around proportion exceeds amount increase majority fingerprint depth slightly depth account fingerprint amount scenario fingerprint proportion depth gradually grows average depth combine previous observation proof increase average proof conforms distribution fingerprint database middleware proof simplify query verification relatively related within blockchain data query strongly related research category blockchain successful application blockchain bitcoin attract attention blockchain technique transaction distribute ledger without risk tamper ethereum successor bitcoin expands function introduce smart contract enables flexible operation cryptocurrency apart cryptocurrency blockchain methodology contributes technology provenance establishes auditable physical supplier  combine blockchain distribute database facilitate decentralize auditable efficient application platform database user effort improve anonymity security blockchain efficient query effort various query ensure prompt response etherscan explorer analytics platform user explore analyze data ethereum blockchain virtual machine etherscan extra information internal transaction smart contract project  fully implement bitcoin protocol postgresql restful api web application blockchain data analysis blockchain com developer restful service encapsulate transaction address apis bitcoin aim efficient accurate query certificate  utilizes structure facilitate retrieval historical transaction  employ conventional database efficient query blockchain data analysis  versatile analysis task blockchain virtue memory analytical database explorer information enable user explore transaction account interface function public apis limited complex query query blockchain data moreover verification function ensure validity query limitation obstacle versatile query verifiable query service blockchain verifiable query verifiable query technique guarantee integrity research topic extensively mainly focus outsource database categorize typical circuit verifiable computation VC technique authenticate data structure ADS VC approach snarks query database verify arbitrary computation task untrusted worker incurs sometimes unacceptable overhead addition preprocessing code data query information verification degrades efficiency remedy issue ben propose variant snarks snarks output circuit depends upper bound query program recently  publicly verifiable sql query dynamic database utilize interactive proof protocol however restrict relational database scenario ADS employ data structure tailor specific query generally efficient comparison ADS digital signature scheme authenticate content digital message asymmetric cryptography verifiable digest authenticate query digital signature merkle hash MHT hierarchical belongs ADS  utilizes merkle patricia variant MHT combine prefix enable verifiable secure data service framework  adopts accumulator ADS scheme achieve dynamic aggregation various query attribute however approach entail modification underlie blockchain structure numerous preprocessing operation knowledge research improve efficiency versatile query public verifiability without radically blockchain extension previous detail database verification scheme simplify query verification scheme abundant performance evaluation conclusion propose VQL query service layer efficient verifiable query service blockchain propose framework layer architecture underlie blockchain network middleware layer application layer realize middleware layer extract data underlie blockchain reorganizes database various query service efficiently upper application layer prevent falsify data middleware cryptographic hash fingerprint calculate construct database finally database fingerprint blockchain verify miner ensure data integrity database verification scheme miner simplify query verification scheme public user implement VQL conduct extensive practical blockchain  evaluation demonstrate VQL effectively efficiently various data query service guarantee authenticity query blockchain propose query service deployed practical application access public user efficient versatile data query