practical byzantine fault tolerance PBFT consensus mechanism potential performance bottleneck proof pow blockchain typically dozen transaction per transaction confirmation however due frequent inter node communication PBFT mechanism node scalability typically adopt network enable PBFT massive internet iot ecosystem blockchain article scalable multi layer PBFT consensus mechanism propose hierarchically node layer limit communication within propose optimal layer PBFT communication complexity significantly reduce specifically node evenly distribute within sub layer communication complexity minimize security threshold analyze faulty probability FPD faulty fnd model respectively practical protocol propose layer PBFT finally extend arbitrary layer PBFT communication complexity security analysis simulation verify effectiveness analytical introduction consensus mechanism algorithm transaction guarantee integrity consistency blockchain across geographically distribute node importance blockchains backbone groundbreaking decentralize ledger technology cryptocurrency secure accountable immutable potential various sector financial service trading chain management internet iot etc consensus algorithm largely performance distribute blockchains transaction throughput latency node scalability security etc application scenario performance requirement consensus algorithm permission public blockchain node network without permission authentication therefore proof algorithm proof pow proof stake PoS variant commonly public blockchain application cryptocurrency bitcoin proof algorithm excellent node scalability performance node competition essential spending however resource demand instance recently publish estimate bitcoin electricity consumption  annually global electricity consumption consensus mechanism limitation transaction confirmation latency throughput instance transaction per tps generally limited bitcoin ethereum transaction confirmation delay typically considerable bitcoin ethereum worth computational requirement proof consensus varies another notable non compute proof consensus interplanetary file IPFS distribute file concept proof proof consensus mostly application public blockchain limited generic distribute blockchain coverage incrementally resource demand voting consensus blockchain generation distribute imminent unlike public blockchain private consortium blockchains prefer adopt lighter consensus protocol PBFT paxos raft reduce amount computational improve transaction throughput widely distribute data synchronization meanwhile critically important application scenario blockchain enable iot ecosystem typically compose device private chain suitable consensus enables crash fault tolerance cft integrity transaction malicious attack acceptable private blockchain node trust PBFT apply blockchain distribute malicious user practical byzantine fault tolerance PBFT propose improve practical protocol byzantine fault tolerance bft proof consensus pow security threshold percent absolute secure transaction achieve malicious user occupies overall resource PBFT malicious user percent participant ensure immune malicious attack PBFT favour private consortium chain thanks complexity consumption particularly important wireless iot application promising advancement PBFT hyperledger development hyperledger business blockchain framework adopt tech giant ibm fintech morgan motivation PBFT performance latency resource requirement node complexity node scalability metric network reflect capacity handle increase node bottleneck PBFT relies inter node communication communication complexity perspective PBFT blockchain hardly node variant PBFT consensus propose scalability PBFT signature minimizes consensus signature verify another significant evolution sharding shard consensus hence transaction confirm within network however increase communication lower security instance shard data shard user request contract shard inter node communication quickly meanwhile data repository without redundancy recoverability risky lose individual shard interrupt blockchain completely untraceable irreversible future fork chain communication complexity issue PBFT due exhaustive peer peer communication node reduce communication intuitively construct hierarchical multi layer PBFT refrain communication within layer sub sub consensus perform per overall consensus define exceeds achieve sub consensus multi layer PBFT model propose brief analysis communication complexity however challenge address apply complexity analysis derive cannot apply generic situation developed premise node sub practical situation detailed analysis various node allocation scenario security analysis derive hypothesis faulty node exist layer apply situation faulty node randomly distribute layer therefore security analysis verify reliability multi layer PBFT finally ensure liveness safety network protocol contribution organization propose layer PBFT replica layer sub layer replica layer node network extend model layer analyze communication complexity multi layer security analysis security performance improve consensus algorithm accommodates faulty node ensure absolute safety malicious attack meanwhile inter node message instead message traditional layer PBFT network consensus topology propose layer PBFT layer propose extend arbitrary layer PBFT however inevitable scalability improve longer delay consensus layer propose multi layer PBFT appropriate financial scenario consortium blockchain node scalability latency transaction contrary application blockchain enable scenario massive iot device connection scalability bottleneck latency multi layer PBFT greatly improve node scalability malicious attack instance blockchain important role manage involve chain raw ensure quality manufacturing player within traditional layer PBFT blockchain multi layer PBFT supplier layer consensus reliable information ensure efficiency manufacturing hierarchical scenario consensus network bias layer indeed consensus model blockchain treat node equality however inequality upper scalability availability democracy influence social stability perform member participant active upper tier delegate elect another leader follower model data storage promising regard availability performance moreover lack flexibility propose dynamic multi layer multi layer PBFT advanced robust flexible consensus digital distribute prompt impact propose PBFT consensus serf viable society efficient secure centralize architecture highly secure efficient distribute summarize contribution introduces novel layer PBFT model model scalable reduces inter node communication traditional PBFT analytical security performance propose derive prof maximum faulty node increase layer PBFT protocol introduce consensus node layer finally layer PBFT model propose proven minimum communication complexity reduce linear network depth maximize xmax additionally security threshold derive organize review related layer PBFT model propose communication complexity analyze PBFT security threshold derive layer layer propose analyze proposes protocol layer PBFT concludes related variant consensus algorithm permissioned blockchain safety trustless environment performance practical byzantine fault tolerance PBFT popular machine replication SMR technology optimal tolerance malicious attack latency recent blockchain protocol SMR propose bft protocol author simplify protocol introduce  byzantine fault tolerant  machine replication abstract illustrate bft propose protocol abstract performance latency throughput apart application permissioned blockchain concept quorum certificate borrow ethereum casper safety ethereum extra mechanism PoS serf finality gadget casper generate determines sequence chain designate replica validators ethereum vote relationship collection quorum certificate grant replica ethereum update rapidly conclusion application shard casper sharding sacrifice safety increase communication complexity actual implementation casper ethereum affect PBFT protocol encounter difficulty implement bft smart popular source library bft SMR application java gap literature practical implementation evaluation throughput bft smart tps although simpler bft implement contains java code complicate implement paxos another bottleneck PBFT scalability mention introduction communication complexity limit performance protocol former researcher propose various hotstuff leverage threshold signature reduce communication complexity phase primary broadcast message replica response valid message partial signature primary response partial signature replica combine digital signature signature broadcast replica serf quorum certificate unlike hotstuff multi layer PBFT propose improves node scalability reorganize network structure threshold signature apply reduce communication complexity moreover noticeable network primary hotstuff broadcast increase message combine partial signature workload bark implement structure pace hotstuff affected primary aggregation partial signature advance communication complexity layer PBFT layer PBFT introduce model layer PBFT protocol communication complexity layer PBFT briefly analyze subsection protocol diagram layer PBFT assume primary node machine replica consensus trigger client request node header replica consensus node agreement replica commit blockchain vice versa consensus stage pre commit request client primary node replica broadcast pre message node commit stage replica message validity message stage minimum consistent message subsequent stage layer PBFT consensus processing layer PBFT consensus processing consensus technically commit phase successful majority non faulty node specifically client denotes faulty node node validate consensus replica ensures non faulty replica operation client fails client resend request primary retry upon request consensus already commit phase replica resend stage message consensus network protocol PBFT communication demand protocol node layer PBFT inter node communication consensus obviously scalable complexity burden non affordable scalable multi layer PBFT protocol propose reduce communication complexity performance analysis protocol layer introduce arbitrary layer propose protocol overview layer PBFT layer PBFT protocol scalability improve recursively insert PBFT consensus algorithm commit phase sub layer algorithm layer certificate prof consensus certificate node layer initiate PBFT consensus layer node illustrate replica primary node layer replica layer consensus sub layer replica layer primary invokes operation multicasting pre message replica layer information operation replica accepts valid pre request phase multicasting message within layer replica receives identical message layer replica operation prepared replica prepared replica multicasts commit message layer replica similarly operation commit identical commit message particularly layer replica primary node consensus consensus multicasting  message sub layer node instance commit node sends pre message node replica  layer replica mention commit phase finally commit replica layer message primary primary client protocol detail communication complexity analysis layer PBFT layer PBFT model propose layer leader replica serf primary node sub layer replica layer therefore node assume sub layer node generic proposition communication complexity calculate proposition proposition layer PBFT replica layer sub layer replica sub communication complexity consensus source proof derive appendix computer society digital library http doi org ezproxy auckland tpds aim optimal setup layer node communication overall node layer PBFT assign proposition algorithm minimize communication complexity proposition layer node minimum communication complexity achieve integer positive equation source proof derive appendix available online supplemental proposition assumption sub layer replica sub proposition pragmatic layer PBFT minimum function versus communication complexity layer estimate analytically proposition fix optimal allocation relationship communication complexity node source proof derive appendix available online supplemental analytical estimate proposition respectively validates availability equation comparison analytical estimate communication complexity layer PBFT layer PBFT quadratic communication complexity greatly reduce layer PBFT communication complexity node reduce magnitude unfortunately communication complexity layer PBFT linear node instead proposition focus setup sub layer replica sub proposition layer communication complexity vacancy equally distribute sub minimum distribute vacancy minimum sub proof derive appendix available online supplemental layer PBFT complexity significantly lower layer PBFT however propose longer delay addition topology security performance analytically investigate actual deployment security analysis security threshold analysis layer PBFT node layer participate consensus layer classic PBFT model tolerates faulty node conclusion layer PBFT consensus analyze threshold consensus sub ensure security liveness consensus leader sub directly client consensus sub regard individual node PBFT category consensus faulty node consensus network situation consensus consensus sub situation consensus tolerates fail consensus security threshold consensus sub facilitate distribute blockchain environment analyze rate model malicious attack faulty probability FPD model probability faulty node fix faulty fnd model faulty node fix model initial analyze security performance specifically assume faulty node FPD model independent faulty probability conversely fnd model probability node faulty depends node faulty node fix addition model application scenario fnd model traditional PBFT suitable faulty node easily estimate however appropriate FPD model evaluate performance node failure estimate probability manufacture reject rate instead specific finally FPD fnd model difference security performance approach addition frequently notation summarize faulty probability assume faulty probability node relationship rate PP define important consensus faulty node layer fail layer addition independent replica layer faulty impossible correspond sub consensus therefore PP assume faulty node layer accord cumulative distribution function cim pif sourcethe depends equation indicates already faulty node layer layer consensus faulty leader therefore fail layer assume faulty leader fail consensus   probability non faulty leader fail consensus assume faulty node fail PBFT tolerates faulty node therefore  sourcewe function consensus rate PP PP cim pif  source verify expression derive simulation perform random sample matlab simulation faulty probability node input random array consist status node random array faulty non faulty node respectively array probability faulty otherwise non faulty counting faulty node layer sub threshold consensus mention simulation rate obtain ration finally increase easily simulation curve analytical expression simulation fnd model difference fnd faulty node instead faulty probability input purpose simulation examine correctness derivation therefore complex peer peer communication temporarily ignore simulation perform however simulation communication consideration multi layer PBFT clearly curve verifies effectiveness analytical analytical simulation rate FPD model faulty fnd model assume faulty node aim relationship rate PN meanwhile assumption calculate PN PN unlike FPD model calculate hypergeometric model fnd model prerequisite fix faulty node     fail sub non faulty leader sub faulty node however fnd model faulty node affect situation extremely complicate therefore simplify binomial distribution model adopt assume faulty probability probability non faulty leader fail layer calculate  source    sourcethen probability PN PN     sourcein equation   combinatorics combination positive rate simply calculate PN    source curve PN analytical curve simulation curve rate slight difference calculation simulation rationale model layer simplify hypergeometric distribution binomial distribution failure rate equation however error negligible approach zero node increase hypergeometric distribution approach binomial distribution analytical simulation curve rate fnd model fault tolerance evaluation FPD model fnd model network curve model gradually concur increase FPD fnd model analytical slope rate curve approach infinity around model increase curve obvious trend around rationale faulty node approximately evenly distribute proportion faulty node sub proportion faulty node around correspond proportion within consensus approximates security threshold layer PBFT therefore rate zero proportion faulty node faulty probability exceeds therefore proposition analytical FPD model proposition tolerates proportion faulty node fault tolerance layer PBFT converges infinite situation multiple circumstance multiple security performance others explain threshold faulty node within PBFT node tolerate faulty node conclusion however ratio maximum faulty node node therefore assign multiple ratio maximum security performance moreover multiple security performance sub consensus tolerate fail sub integer ratio faulty node remark remark assign multiple respectively fault tolerance performance improve advanced security optimization subsection advanced propose ideal ultimate situation node layer classify assume node layer non faulty node layer probability faulty built assumption implement whenever vulnerability detect layer node layer reliability node stable performance remain faithful consensus rate advanced calculate PA  source  sourcewhere faulty probability layer node PA consensus rate advanced analytical simulation curve concur prof analytical valid analytical simulation curve rate advanced practical worth security threshold achieve percent rate maximum faulty node unlike layer PBFT layer PBFT vulnerable faulty node randomly distribute layer PBFT consist limited node consensus faulty node faulty node specific faulty node distribution fail layer node decision however mention introduction topology useful decentralize balance efficiency security performance fortunately security threshold improve operation advanced faulty node layer rate percent faulty node increase intermediate exist therefore proposition proposition achieve percent rate maximum faulty node tolerate increase advanced achieve however consensus rate immediately threshold exceed curve rapid decline probability faulty node around guarantee percent consensus faulty node cannot overall node however practical deployment wireless communication uncertainty costly impossible achieve percent consensus fault tolerance layer depends reliability requirement scenario 5G reliability requirement lower percent statistical fault tolerance accord layer PBFT communication complexity analysis layer layer PBFT situation node network allocate layer consensus algorithm ith layer insert commit phase layer communication complexity lower suppose layer layer node subgroup ith layer node ZX layer ZX ami sourcethe communication complexity CX layer PBFT CX xmi sourcewhere define minimum communication complexity layer transform typical optimization aim minimum equation restriction equation proposition omit communication complexity node network depth communication complexity obtain layer communication complexity PBFT multi layer therefore infer minimum communication complexity  maximum network depth xmax allocate minimum replica sub xth layer contains node xmax express xmax sourceto analyze communication complexity limit suppose integer satisfies xmax exactly replica sub layer  calculate   source xmax source  analyze communication complexity multi layer PBFT network depth maximize assumption replica sub explore communication complexity approach increase analytical communication complexity xmax layer lower linear relationship node therefore proposition proposition communication complexity lower increase network depth multi layer PBFT node scalability PBFT however worth mention performance security latency reduce communication complexity detailed analysis security analysis layer layer security performance layer PBFT optimize operation protocol threshold TX maintain rate percent TX SourceRight click MathML additional feature equation TX increase increase network depth security performance weaken communication complexity improve increase layer node layer vulnerable randomly distribute faulty node practical scenario multi layer PBFT latency analysis another reduce communication complexity latency analyze subsection propose multi layer PBFT construct hierarchical structure limit peer peer communication within layer meanwhile inevitable confirmation delay prolong consensus layer successively confirmation delay increase increase network depth assume layer average  consensus propagate layer average propagation delay  linear relationship network depth   fortunately protocol internet parallel route distribute information consensus layer delay within reduce contribute lower overall latency conclusively PBFT multi layer PBFT sacrifice delay complexity consensus algorithm pow scalability latency multi layer PBFT significantly therefore propose regard delay scalability exist protocol performance protocol propose multi layer PBFT demand practical scenario consensus protocol adopt optimal performance accordingly frequently notation performance comparison propose consensus protocol propose practical protocol dedicate layer PBFT replica layer denote superscript layer subscript replica index leader correspond layer replica correspond consensus topology structure consensus member leader instead client leader sends client behalf consensus client accepts consensus protocol overview illustrate meanwhile configuration GP describes allocation member leader update network structure brief protocol insert successive pre commit phase commit phase upper layer implementation layer PBFT model implementation layer PBFT model consensus client client sends request message request primary request invokes operation timestamp timestamps stamp later operation contains request replica identity replica extract previous operation request primary multicasts message protocol leader client directly poset GP poset replica execution certificate GP describes replica allocation assume replica layer faulty replica consensus distinguish leader valid consensus consensus network consensus client accepts leader consistent layer protocol layer primary replica consensus primary receives request request client authenticates request client identity primary assigns sequence primary pre phase multicasting pre digest superscript distinguish pre layer pre layer primary multicasts message reacts pre propagation restrict protocol layer layer pre commit message replica accepts authenticity verify watermark watermark introduce ensure weak synchronization define replica layer accepts pre message primary none request sequence accepted multicasts message layer pre message phase replica message sequence request pre message prepared certificate indicates replica prepared request prepared multicasts commit commit message sequence digest replica message commit certificate request commit replica replica pause execution initiate another protocol layer described commit replica leader primary layer primary confirms consensus member consistent message leader certificate primary client GP poset primary client behalf consensus primary algorithm replica massive deployment layer protocol commit multicasts pre message within consensus another PBFT protocol implement member leader manner request commit replica primary multicasts pre replica consensus commit certificate inherit previous replica consensus accept request mention layer protocol satisfied addition presence valid pre message pre prepared multicasts message consensus pre message phase replica message sequence request pre message quorum prepared certificate indicates replica prepared request prepared replica leader multicast commit commit message sequence digest replica commit commit certificate request commit replica executes message commit execution member leader leader client manner pseudocode protocol described algorithm algorithm primary normal pseudocode valid request client identity authenticate multicasts pre valid valid prepared certificate multicasts commit valid commit valid commit commit certificate valid valid member client faulty primary elimination faulty primary detection commonly apply initiate detect primary respond replica timer reset request however faulty primary assigns pre replica trigger mechanism without timer detect faulty primary node multicast random message phase replica skip operation connection lose detection independent without prerequisite continuous sequence replica accept discrete consistently increase decrease facilitate understand mechanism assume primary faulty faulty replica message faulty message situation message obtain non faulty replica message identical faulty message digest message unmatched faulty message identical faulty message message non faulty node simplicity latter version message collection non faulty replica another version faulty replica algorithm normal pseudocode valid pre multicasts valid valid prepared certificate multicasts commit valid commit valid commit commit certificate multicasts pre subordinate valid valid prepared certificate multicasts commit valid commit valid commit commit certificate primary valid valid member client algorithm normal pseudocode valid pre multicasts consensus valid valid prepared certificate multicasts commit consensus valid commit valid commit quorum commit certificate leader primary non faulty replica message version interval mention faulty replica multicasts version message version faulty replica besides additional version non faulty replica presence faulty primary multicasts random message message pre non faulty replica exceeds upper bound primary detect faulty along trigger phase conventional PBFT replica invoke phase adapt multi layer model replica primary sub layer replica protocol replica specific layer detect faulty primary upper layer invoke layer replica suspect primary faulty multicasts message stable checkpoint primary primary election mechanism primary decides lunch suppose replica layer member leader member layer suspect leader faulty respond deliver pre message invalid sequence accept request multicasting alpha alpha sequence checkpoint replica certificate checkpoint collection certificate request pre request alpha identification sender primary valid message member multicasts GP gamma gamma  certificate pre message  fail consensus sequence pre checkpoint leader alpha GP update describes allocate member layer member member replica accept execute valid mention protocol however leader layer implies replica becomes member layer instance primary multicasts gamma remain unchanged extract commit certificate leader gamma validity replica directly commits operation commit layer otherwise consensus protocol execute layer message informs member replica update local GP member layer leader layer reallocate former member longer leader multicasts gamma redistribute replica designate layer replica replica redirects update local GP replica layer deeper consensus seam sequence indirectly limited reduce extra communication complexity latency introduce modify protocol redistribute message embed GP message extract member pas former layer piggyback pre replica layer redirect respond pre message attribute extra communication expenditure layer layer facilitate assessment complexity layer scenario suppose replica layer layer depict trigger layer layer trigger layer described protocol within layer PBFT complexity member layer primary extra complexity introduce multicasting redistribute message layer certificate generate layer complexity complexity trigger layer similarly complexity extra complexity introduce multicasting message layer however certificate generate layer additional complexity complexity comparison complexity PBFT hotstuff replica layer layer trigger complexity propose layer PBFT hotstuff however reduces complexity PBFT operation synchronization precondition phase synchronization across replica due loss connection replica skip operation consensus sequence alpha necessarily continuous client access data network operation preferably sync replica asynchronous replica detect discrete sequence watermark replica extract operation inquire replica constant interval replica decides extract operation network multicasts alpha extract request valid extract replica accepts operation replica extract request alpha extract request valid garbage collection data replica increase protocol discard unnecessary operation already consensus implement  garbage collection replica multicast checkpoint message sequence commit operation sequence checkpoint watermark prevent replica encounter transmission delay logic replica executes operation safety liveness operation  PBFT network weakly synchronise message infinity byzantine replica assume unable subvert cryptography safety liveness retain within across modify protocol suppose frac node faulty network weakly synchronise message infinity protocol frac replica community advanced operation ensure response non faulty replica faulty non faulty replica overlap consecutive operation non faulty replica operation safety bound faulty replica indicates protocol sufficient response proceed liveness consensus upper layer precondition invoke protocol sub safety guaranteed across modify protocol replaces faulty leader liveness guaranteed across consistency PBFT safety liveness within across consistency network conclusion scalable multi layer PBFT mechanism propose reduce communication complexity layer PBFT prof communication complexity propose layer PBFT significantly reduce minimum approx frac maximum optimize capacity minimum communication complexity optimal propose moreover analytical security threshold rate sink significantly proportion faulty node exceeds frac threshold rate percent lfloor frac rfloor lfloor frac rfloor lfloor frac rfloor advanced model security performance layer largely layer improve operation latency performance confirmation delay increase increase network depth finally expand layer multi layer security performance communication complexity layer multi layer communication complexity lower minimum frac network depth maximize max expense security performance degradation guidance multi layer PBFT performance analysis foundation future research meanwhile limitation improve model differentiate node layer propose fnd FPD advanced model experimental evaluation proposition insight performance tradeoff application scenario another potential topic deployment multi layer PBFT worth mention scenario financial sensitive latency scalability advanced research conduct issue