Abstract
A major breakthrough in the diagnosis of t-diagnosable systems occurred when Dahbura and Mason developed a diagnosis algorithm under the PMC model using the matching theory in bipartite graphs. In this paper we introduce a new testing model called the symmetric PMC(SPMC) model. Our main contributions are as follows: We prove that the diagnosability of an n-dimensional hypercube under the SPMC model is almost twice its diagnosability under the PMC model. We then show that the fault diagnosis problem for a t-diagnosable system under the SPMC model reduces to that of determining a maximum weighted b-matching in its diagnosis graph. Algorithm LABEL is then given to identify all the faulty vertices using the maximum b-matching of the diagnosis graph. Finally, using certain results from the theory of partitions of integers we establish the worst case complexity of our t-diagnosis algorithm. The complexity is much better than the worst case complexity of the Dahbura-Mason algorithm for the t-diagnosable problem under the PMC model.


Keywords
Communication systems
System level diagnosis
SPMC model
Diagnosis of multiprocessor systems
Diagnosability
Fault tolerant computing

1. Introduction
Motivated by an interest to develop a strong theoretical foundation to study the analysis and design of large-scale fault tolerant multiprocessor systems, Preparata, Metze and Chien [23] proposed a model and framework, called the PMC model which initiated the study of System-Level Diagnosis in 1967. In 1984, Dahbura et. al. [16] reviewed some advances and open problems in this area. In the almost four decades that have elapsed since this review, several new directions of research and applications of this framework have been reported in the literature. In this section, we review some of these ideas and concepts relevant to the research reported in this paper.

Given a multiprocessor system, under the PMC model the test graph of the system is a directed graph in which each node represents a processor and an arc  directed from node i to node j means that processor i performs a test on processor j. Fig. 1 gives an example of inter-processor testing. Since some of the processors could be faulty, not all the outcomes of the tests are reliable. In the PMC model it is assumed that outcomes of tests performed by fault-free processors are reliable and those performed by faulty processors could be anything, regardless of the status of the tested processor. Each arc  in the test graph is assigned a label, 0 or 1. If the test initiated by i on j passed, then arc  is labeled 0, otherwise it's labeled 1. See Fig. 2 for an example of test assignment under the PMC model. The set of all test outcomes is called a syndrome of the system.

Fig. 1
Download : Download high-res image (7KB)
Download : Download full-size image
Fig. 1. A System With five units.

Fig. 2
Download : Download high-res image (13KB)
Download : Download full-size image
Fig. 2. Test outcomes under the PMC Model.

In the area of system level diagnosis, a central concept is the concept of a t-diagnosable system. A multiprocessor system is t-diagnosable if, given any syndrome, all the faulty processors can be correctly identified as long as there are at most t faulty processors in the system. The diagnosability of a multiprocessor system is the largest value of t for which the system is t-diagnosable. Three important questions in the study of t-diagnosable systems are:

1) Characterization of t-diagnosable systems, that is, determine necessary and sufficient conditions for a system to be t-diagnosable: The first such characterization was given by Hakimi and Amin [25].

2) Determining diagnosability of a system: Sullivan gave a polynomial algorithm to determine the diagnosability of interconnection networks under the PMC model [56] using the theory of network flows.

3) Given a t-diagnosable system and a syndrome, determine the set of all faulty processors: Dahbura and Mason [17] gave an 
 diagnosis algorithm for t-diagnosable systems using the matching theory in bipartite graphs.

Other works on t-fault diagnosis under the PMC model include [2], [4], [7], [33], [36], [47].

In [64], Zhu et al. proposed a diagnosis algorithm for fault diagnosis under the PMC model by using graph-coloring techniques.

Since the introduction of the PMC model, several other models assuming different definitions of test and/or different assumption on test outcomes have been proposed. Motivated by some of the shortcomings of diagnosability theory, some conditional diagnosability measures have been introduced and studied for many interconnection networks. These different models and related diagnosability/diagnosis research works with references are listed next: BGM model: [8]; comparison Model: [14] and [44]; sequentially t-diagnosis: [55]; -diagnosable systems: [1], [4], [8], [12], [18], [34], [48], [54]; conditionally diagnosability: [13], [39], [40], [43], [59], [62]; strong Diagnosability: [26], [28], [29], [30], [42], [51], [63]; adaptive diagnosis [9], [11], [22], [27], [39]; probabilistic diagnosis [10], [19], [20], [41], [45], [52]; distributed Diagnosis [3], [38], [49], [53], [57].

The rest of this paper is organized as follows. In Section 2, certain basic concepts in graph theory and a review of the PMC model and t-diagnosable systems are given. In Section 3, we introduce the symmetric PMC model and determine the diagnosability of the hypercubes under the SPMC model. In Section 4, we develop the NFSL algorithm to determine the set 
 of all necessarily faulty vertices under a given syndrome. We also define the diagnosis graph corresponding to a given syndrome. In Section 5, we reduce the fault identification problem in t-diagnosable systems to that of determining a maximum weighted b-matching in the diagnosis graph. Algorithm LABEL is given to identify all the faulty vertices using the maximum b-matching of the diagnosis graph. Finally, using certain results from the theory of partitions of integers we establish the worst case complexity of our t-diagnosis algorithm. This complexity is much better than that of the Dahubra-Mason algorithm. The new SPMC testing model provides a framework for the study of diagnosis and diagnosability issues for a variety of testing and fault models including the recently studied conditionally fault model.

2. Preliminaries and basic results
In this section we present certain basic concepts in graph theory and introduce the notion of consistent faulty sets and the concept of t-diagnosable system along with a summary of certain results pertaining to t-diagnosis.

2.1. Basic concepts in graph theory
We follow [32] for all terminologies and notations not defined in this section. We use  to denote a simple undirected graph with no self loops where V is the vertex set of G and  is the edge set of G. Let  be a vertex in G. We use  to denote the set of all vertices adjacent to u. We also use  to denote the set of edges incident with u. The degree of u is the cardinality of , denoted by  or  for simplicity. If the degree of every vertex of a given graph is the same, then the graph is called a regular graph. For a vertex subset , we use  to denote the set of vertices not in A that have at least one neighbor in A, that is,  
 ;  denotes the union of  and A. The cardinality of  is called the degree of A in G, denoted by . The minimum k-cluster degree of G is defined as the minimum degree over all its vertex subsets of cardinality k, denoted by 
. For , 
, the minimum degree in G. A trivial graph is a graph with only one vertex. The maximal connected subgraphs of a disconnected graph G are its connected components.

Given a simple graph G and an edge , the edge contraction operation of G relative to e, denoted as , is carried out as follows: Remove e and merge u and v into a new vertex w; a vertex in  is adjacent to w if and only if it's adjacent to either u or v. The contracted graph is still a simple graph. Obviously, given an edge set S, the operation can be performed on the edges in S in any order and the resulting graph is the same. A vertex subset K of G is called a vertex cover of G if every edge in  is incident to at least one vertex in K. A minimum vertex cover of G is a vertex cover of minimum cardinality. A subset  is called a matching of G if any vertex in V is not incident to more than one edge in M. A maximum matching of G is a matching of maximum cardinality. A vertex  is M-saturated if some edge of M is incident on u; otherwise it's M-unsaturated. A path in G is an M-alternating path if its edges are alternately in M and . An M-alternating path is called an M-augmenting path if its initial and terminal vertices are M-unsaturated.

Theorem 2.1

[32] A matching M is a maximum matching of a graph G if and only if G doesn't have an M-augmenting path. For any minimum vertex cover K and any maximum matching M of G, .  □

Consider a vertex weighted graph , in which each vertex  has an associated positive integer weight . For a subset , its weight is the sum of the weights of all vertices in S. Let M be an assignment of non-negative integers  to each edge . Then M is called a b-matching of G if and only if for every vertex v in G, 
  More discussion of the properties of b-matchings will be given in Section 5.

2.2. PMC model and t-diagnosable systems
In the PMC model, a test  involves two adjacent processors where u is called the tester and v is called the testee. The test result  means that v has passed u's test and 1 otherwise. Under the PMC model it is assumed that the test result is reliable if and only if the tester is fault-free. It follows that the test result has no meaning on the status of the tested processor when the tester is faulty. That is,  might be unreliable because u (the tester) might be faulty itself.

The collection of all test results is a syndrome of the system. A syndrome σ is consistent with a fault set F if σ can be aroused in the circumstance that all vertices in F are faulty and all other vertices are fault-free, denoted by . A fault set F can be consistent with many syndromes because the test result of a faulty tester is unreliable. The set of all syndromes consistent with F is denoted by . Similarly, a given syndrome σ can be consistent with many fault sets; the set of all fault sets consistent with σ is denoted by .

Two sets 
 are said to be distinguishable if and only if 
, otherwise they are indistinguishable. Recall (by definition given in Section 1), all the faulty units in a t-diagnosable system can be uniquely identified as long as the number of faulty units is at most t. For a given syndrome σ, in such a system there is exactly one minimum fault set of cardinality at most t consistent with σ. So an alternate definition of t-diagnosable system is: Given a positive integer t, a system is t-diagnosable if any pair of sets 
 and 
 of cardinality at most t are distinguishable, that is 
. The diagnosability of G is the maximum integer t such that G is t-diagnosable.

In the area of t-diagnosable systems under the PMC model, three major breakthroughs need mention. The first major breakthrough occurred in [25] where Hakimi and Amin have given necessary and sufficient conditions for a system to be t-diagnosable. The following characterization due to Kohda [36] is a foundation result in the theory of diagnosable systems.

Theorem 2.2

The diagnosability problem is to determine the largest integer t such that the system is t-diagnosable. A major breakthrough occurred in [56] when Sullivan proposed a polynomial time algorithm to determine the diagnosability of a system. A polynomial time t-diagnosis algorithm was given by Dahbura and Mason [17]. This was the third breakthrough in the t-diagnosis area.

3. Symmetric PMC model and the diagnosability of hypercubes
In this section we first propose a new model of diagnosis, namely, the symmetric PMC (SPMC) model for the fault diagnosis of multiprocessor systems. We then determine the diagnosability of hypercubes under the SPMC model.

In the PMC model, it's assumed that only adjacent processors can test the status of each other. For the purpose of the diagnosis capability analysis of interconnection networks and more efficient diagnosis, we propose the symmetric PMC model (SPMC model) by adding two assumptions to the PMC model. First, we assume that any pair of adjacent nodes will test the status of each other. The second assumption is based on the following observation. In a 1-step diagnosis, if there exist two fault sets 
 both consistent with a given syndrome σ and 
, then it's impossible to know the status of vertices in 
. So the other assumption of the SPMC model is that in this circumstance, we don't need to determine the status of vertices belonging to 
 in a 1-step diagnosis.

Based on the second assumption, we give the definition of feasible pair of vertex subsets.

Definition 3.1

Given a multiprocessor system G, a pair of vertex subsets 
 is called a feasible pair under the SPMC model if and only if 
 and 
.

The following gives the definition of diagnosability of a multiprocessor system under the symmetric PMC model to measure the fault diagnosis capability of interconnection networks.

Definition 3.2

G is called t-diagnosable under the symmetric PMC model if any pair of feasible vertex subsets with cardinality not more than t are distinguishable. The diagnosability of G under the symmetric PMC model, denoted by 
, is defined as the largest integer 
 such that G is 
-diagnosable under the symmetric PMC model.

In the following lemma we give a necessary and sufficient condition for a pair of feasible vertex subsets to be distinguishable under the SPMC model.

Lemma 3.3

For any pair of feasible vertex subsets 
 under the SPMC model, 
 are distinguishable under the SPMC model if and only if there exists an edge between 
 and 
.

Proof

(Necessity) If 
 are distinguishable under the SPMC model, then there exists a test  whose test result must be different under the two fault circumstances: 
. So one of the test results must be 0 and the other must be 1. Thus the tester u cannot be in 
 or 
.

Case 1)  when 
 is the fault circumstance and  when 
 is the fault circumstance. So 
 since  when 
 is the fault circumstance, and 
 since  when 
 is the fault circumstance. So 
.

Case 2)  when 
 is the fault circumstance and  when 
 is the fault circumstance. So 
 since  when 
 is the fault circumstance and 
 since  when 
 is the fault circumstance. So 
.

Because under the SPMC model, two nodes test each other whenever they are adjacent, there exists a test  from 
 to 
 if and only if there exists an edge between 
 and 
. Thus necessity follows.

(Sufficiency) If there exists an edge between 
 and 
, then there exists a test  where 
 and 
 whose test result must be different under fault circumstance 
 and fault circumstance 
. □

Definition 3.4

Given a multiprocessor system G with diagnosability t under the PMC model (resp. SPMC model), a syndrome σ is called a t-diagnosable syndrome under the PMC model (resp. SPMC model) if it's consistent with a faulty vertex set with not more than t vertices.

Since the diagnosability of a multiprocessor system under the SPMC model is not less than its diagnosability under the PMC model, if a syndrome σ is a t-diagnosable syndrome under the PMC model, it's also a t-diagnosable syndrome under the SPMC model. The following lemma presents some properties of a t-diagnosable syndrome under the SPMC model:
Lemma 3.5

Given a multiprocessor system G with diagnosability t under the SPMC model and a t-diagnosable syndrome σ of G, let 
, then there exists a vertex subset 
 such that F is a subset of every element in 
.

Proof

Since σ is a t-diagnosable syndrome of G, it's consistent with a faulty vertex set F of cardinality not more than t. By the definition of the diagnosability under the SPMC model, any feasible pair of faulty vertex sets of cardinality not more than t are distinguishable. So any pair of distinct vertex subsets 
 are not a feasible pair. That is, one is a subset of another. So 
 is a well-ordered set. Thus there exists a vertex subset 
 such that F is a subset of every element in 
. □

The following lemma relates the diagnosability of any network G under the PMC and SPMC models.

Lemma 3.6

For any network G, let  and 
 be its diagnosability under the PMC model and the SPMC model, respectively, then 
.

Proof

For any network G, let  be its diagnosability. Then any pair of distinct vertex subsets 
 with cardinality not more than  are distinguishable. So there exists an edge between 
 and 
. So the two sets are also distinguishable under the SPMC model. Thus 
. □

In fact, 
 may be strictly greater than  as shown by Theorem 3.8.

The following lemma gives an upper bound on the diagnosability of any graph G under the SPMC model.

Lemma 3.7

For any graph G with order , 
 
 for  where 
 is the minimum k-cluster degree of G.

Proof

For any graph G,  with , suppose  where , then  and  are indistinguishable for any nonempty sets B, C under the SPMC model. Thus  where  are not empty. Let A be the vertex subset with the minimum boundary, 
 
 and 
 
. The proposition follows since . □

Hypercubes are the most well-known interconnection networks. Many properties of hypercubes under the PMC model have been studied [11], [31], [37], [58], [60], [61]. In the following theorem, we will determine the diagnosability of hypercubes under the symmetric PMC model and the result would show that the upper bound in Lemma 3.7 is tight.

An n-dimensional hypercube can be modeled as an undirected graph on vertex set 
. There exists an edge between two vertices 
 if and only if u, v differ exactly in one bit position. There are 
 vertices and 
 edges in 
 and every vertex has exactly n edges incident to it. 
 is an n-regular graph and it is both vertex transitive and edge transitive. For any k with , let 
. By the definition of hypercube, the spanning subgraph of 
 () is isomorphic to an -dimensional hypercube and there exists a perfect matching M between 
 and 
 in 
. Since this is true for all , we shall use 
 (resp. 
) to denote the spanning subgraph of 
 (
). We call 
 a decomposition of 
 along the k-th dimension. For simplicity, 
 is often used to denote a decomposition of 
.

Theorem 3.8

Given an n-dimensional hypercube 
, the diagnosability of 
 under the symmetric PMC model is  for .

Proof

1) It's easy to see that 
. By Lemma 3.7, under the symmetric PMC model 
.

2) In this part we will use contradiction to prove that 
. To prove this, we only need to prove that for any indistinguishable feasible pair of vertex subsets 
 of 
, at least one of 
 and 
 is not less than . Suppose not, that is 
 and 
.

Since 
 are indistinguishable, there are no edges between 
 and 
 in 
. So 
 is a vertex cut of 
. Since 
 are feasible pair vertex subsets, there are at least 1 vertex in 
 and 1 vertex in 
. Thus 
. Let 
, then S is a vertex cut of 
.

Let 
 be a decomposition of 
 such that the vertices in 
 are in different parts of the decomposition. Let 
 for . Since 
 is disconnected, 
. So, 
 when . So 
 for . Thus 
 and 
 are both disconnected, since the vertices in 
 and vertices in 
 can not be connected to each other. So 
. Thus, 
. So, 
, a contradiction. □

4. t-diagnosis under the SPMC model
Given a multiprocessor system G with diagnosability t under the SPMC model, suppose the cardinality of the faulty vertex set F of G is not more than t and σ is a syndrome consistent with F. Then the problem of determining F according to G and σ is called the t-diagnosis problem under the SPMC model. Given a syndrome σ, let 
 be the intersection of all faulty vertex set consistent with σ. 
 is called the necessarily faulty vertex set of σ.

To solve the t-diagnosis problem, we divide it into two small problems: Problem I) is to determine the necessarily fault vertex set of σ; problem II) is to locate the remaining faulty vertices of F. We solve the problem of determining the remaining faulty vertices by transferring it into finding a maximum b-matching of the constructed diagnosis graph.

4.1. Necessarily fault vertex set location
4.1.1. Syndrome generation
Under the symmetric PMC model, each processor will monitor the status of all of its adjacent processors. When one of its incident processors does not pass the test, it reports the test result to the outside observer. For a test , if  and u is fault-free, the test result can be transmitted to the outside observer correctly. If  and u is faulty, the test result may not be transmitted to the observer, but this does not affect the diagnosis result since the test result of a faulty tester is unreliable. This way, by minimum communication cost of only reporting the failed test results we obtain a full syndrome of the system. We can safely assume all other test results are 0 (passed).

Lemma 4.1

Given a multiprocessor system G, let S be the set of all its failed test. For any pair of adjacent vertices :

•
1) If  and , then  are either both faulty or both fault-free.

•
2) If , then at least one of  is faulty. If we further know that , then v must be faulty.

Proof

1) Suppose not, then the test result of the fault free one to the faulty one should be 1 not 0. A contradiction. So, they are of the same status.

2) The first part is obvious. We use contradiction to prove the second part. Suppose v is not faulty, then u must be faulty since . So  since v is not faulty and u is faulty. A contradiction to . □

Let us arrange the elements of S as 
 such that for different 
, 
 with  we have either  or , . Given S, we use 
 to denote the syndrome corresponding to S. For any test t, the result of t in 
 is 1 if  and is 0 otherwise.

In the following  refers to the cardinality of S. Also  is the contertest of . Furthermore, if , then  and .

The necessarily Fault Set location Algorithm is as follows.

Algorithm 1: Necessarily Fault Set Location Algorithm (NFSL)

Input:  where S is the collection of all failed tests.

Output: The necessarily fault set 
 of G with respect to the syndrome corresponding to S.

Step1: , , .

Step 2: {Note: Find the subset T of S such that for any test in T their contertests are also in S}

For  to 

 For  to 

 If , , then 

Step 3: . {Note: R is a subset of S and for any test in R, its contertest is not in S.}

Step 4: For  to 

 {Note: For any test in R, the tested vertex must be faulty}

Step 5: Let W be the set of all edges whose both corresponding tests are not in S. Let 
 be the maximal connected subgraphs induced by W. If 
, , then 
.


Step 6: For each test  in S, if  such that 
, then 
. {Note: At least one of  is faulty since , and they are of the same status since they are in the same 
.}

Step 7: Output F. End. (Note: 
.)

Lemma 4.2

Given a multiprocessor system G and a syndrome σ of G under the SPMC model, let F be the output of the necessarily Fault Set Location Algorithm, then all vertices in F must be necessarily faulty.

Proof

The set F is obtained in Steps 4, 5 and 6 of the necessarily Fault Set Location Algorithm. In the following we will prove that the vertices added to F in these steps are necessarily faulty.

Step 4: For any test in R, by Lemma 4.1 (2) the tested vertex must be faulty. So, the vertices added to F are faulty.

Step 5: By Lemma 4.1 (1), all vertices in 
 must be of the same status. By Lemma 4.1 (2), the terminal vertex of each edge in R must be faulty.

Step 6: At least one of  is faulty since , and they are of the same status since they are in the same 
. □

4.2. Construction of the diagnosis graph
Consider  where F is the output of the NFSL algorithm. In the following,  is called a 0-link if and only if . Let 
 be the maximally connected subgraphs of H induced by 0-links.

Lemma 4.3

All edges in  connecting vertices in different 
's are 1-links.

Proof

Consider a link  with 
 and 
, .

a) If  is 0-link and  is 1-link, then by Step 4 in Algorithm 1, all vertices in 
 are necessarily faulty vertices. So 
. A contradiction to 
.

b) If  is a 0-link and  is also a 0-link, then 
 and 
 are in a connected component. A contradiction to they are different maximally connected components.

By the above analysis, all links connecting vertices in different 
's are 1-links. □

Now we contract all the 
's in  and let the resulting contracted vertices be represented by 
. Then we construct the undirected graph on vertices 
 by adding an edge connecting 
 and 
 if and only if there are edges connecting 
 and 
 in H. For any vertex 
, assign a weight 
 to 
 where 
 is the number of vertices in 
. The resulting graph, denoted by 
, called the diagnosis graph of G relative to σ.

Lemma 4.4

Let 
⁎
 be a vertex subset of G consistent with 
 and F be the output of the NFSL Algorithm. For any pair of adjacent vertices x, y in 
, suppose 
 and 
 are the vertex subsets of G from which  are contracted, then either 
⁎
 or 
⁎
.

Proof

Since x and y are adjacent in 
, there exist a vertex 
 and a vertex 
 such that  are adjacent in G and . So, at least one of  is faulty. Since all vertices in 
 and all vertices in 
 are of the same status, either 
⁎
 or 
⁎
. And since 
 is contracted from , 
 cannot be in F, thus either 
⁎
 or 
⁎
. □

Theorem 4.5

The output F of the NFSL algorithm is equal to 
.

Proof

Recall that the set of all failed tests is denoted by S and the corresponding syndrome is 
. We prove this theorem by contradiction. By Lemma 4.2, the vertices in F are necessarily faulty. So, 
. Suppose 
, then there exists a vertex 
. For any vertex  with  in 
, in 
  too; otherwise by the NFSL algorithm . Also, there exists a vertex  which is not faulty when the syndrome 
 is aroused; otherwise 
. Suppose  is the set of neighbors of u which u evaluate as faulty. And let 
 be a vertex subset consistent with 
 where 
. In the following, we will prove that 
 is also consistent with 
 leading to a contradiction to 
. Since 
 and 
, 
.

To prove that 
 is consistent with 
, we need to show that in 

•
a) , for all 
 and 
.

•
b) , for all 
.

Consider a test . In view of the conditions above we assume that 
. We consider two cases establishing propositions a) and b) above.

Case 1) .

Subcase 1.1) 
.

We use contradiction to prove that . Suppose . Then  too; otherwise 
 contradicting 
. By Lemma 4.1, at least one of  are in 
 since 
 is consistent with 
. Since 
 and , 
. So, 
. y must be u since 
. So,  since . A contradiction to 
.

Subcase 1.2) 

We use contradiction to prove that . Suppose . Then  too otherwise by the NFSL Algorithm, 
. A contradiction to 
. So, by Lemma 4.1  are of the same status. A contradiction to 
 and 
.

Case 2: .

Subcase 2.1) 
. In this case, , by the definition of , and . Preposition b) holds.

Subcase 2.2) 
.

•
If , then  according to the definition of . Proposition a) holds.

•
If 
, we use contradiction to prove that  too. Suppose , then  too otherwise by the NFSL algorithm,  contradicting . So  are of the same status for any consistent faulty vertex set of 
 contradicting 
 and 
. So,  and Proposition b) holds.

Thus we have proved that 
 is also consistent with 
. A contradiction to 
. So, 
. □

We conclude this section by highlighting some results relating to 
.

Lemma 4.6

Given a t-diagnosable syndrome σ of a multiprocessor system G with diagnosability t under the SPMC model, let F be the output of the NFSL algorithm. Then  is ()-diagnosable under the SPMC model.

Proof

By Theorem 4.5, 
. Suppose 
 is not (
)-diagnosable under the SPMC model, then there exists an indistinguishable feasible pair of vertex subsets 
 with 
. So, there are no edges between 
 and 
 in 
. That is, there are no edges between 
 and 
 in G. So, 
 and 
 are a pair of indistinguishable feasible vertex subsets of G under the SPMC model. A contradiction to the fact that the diagnosability of G under the SPMC model is t. □

Theorem 4.7

For a given syndrome σ of a multiprocessor system G, 
 if and only if there exist two vertices  such that  and there exists a directed path 
 where 
 and 
 in G such that 
 for .

Proof

Sufficiency: Given a syndrome σ, if there exists a test  with , then at least one of  is faulty. If there exists a directed path 
 where 
 and 
 in G such that 
, for .

•
 such that 
. By step 4 of the NFSL algorithm, 
. So .

•
If for all , 
. Then 
 belong to the same component of W as constructed in Step 5 of the NFSL algorithm. By step 6 of the NFSL algorithm, 
 all belong to F. So .

Necessity:
•
If a vertex in 
 is located in Step 4 of the NFSL algorithm, then there exist two vertices  such that  and , and the condition of this Lemma is satisfied.

•
If a vertex u in 
 is located in Step 5 of the NFSL algorithm, then there are other vertices in 
 located by the NFSL algorithm before u. So, the condition of this Lemma is satisfied.

•
If a vertex in 
 is located in Step 6 of the NFSL algorithm, then there exist two vertices  such that  and  are in the same 
. So there is a directed path from v to u such that the test result of any test corresponding to edges in this path is 0, so the condition of this Lemma is satisfied.  □

By Theorem 4.7, we have the following propositions.

•
If all the test results are 0, then all the vertices are faulty or are fault-free. For a t-diagnosable syndrome, not all vertices can be faulty, so  and thus 
.

•
If all the test results in the syndrome are 1, then according to Theorem 4.7, 
.

5. b-matchings in graphs and diagnosis of t-diagnosable systems under the SPMC model
In this section, we develop a polynomial algorithm to identify all faults in a t-diagnosable system under the SPMC model. Diagnosis of a t-diagnosable system is the fault identification in such a system. We build our diagnosis algorithm using b-matchings in bipartite graphs and their relation to weighted vertex covers. We will reduce the fault diagnosis problem for t-diagnosable systems to one of determining a maximum b-matching of its diagnosis graph as described in the following subsection.

We will first generalize Hall's Theorem to weighted graphs and then propose a polynomial t-diagnosis algorithm under the SPMC model. Our diagnosis algorithm is more efficient than the t-diagnosis algorithm in [17], since our diagnosis graph is much smaller. In the following, we prove certain results on b-matching that are of interest in developing our diagnosis algorithm. For more details on b-matching, see [15], [24], [46].

5.1. b-matchings in bipartite graphs
Let G be a finite weighted bipartite graph with bipartition X and Y. Each vertex v in  has a weight . For a vertex subset S of , its weight  is the sum of the weights of all vertices in S.

Let M be an assignment of weights to edges in E such that each edge in E has a non-negative weight . Recall that M is called a b-matching of G if and only if for every vertex in G, we have 
 

A vertex is said to be saturated by a M if equality holds in the above formula. The weight of M is the sum of the weights of all edges in M, that is, 
. A b-matching is called a maximum b-matching of G if its weight is not less than the weight of any other b-matchings of G.

For a subset Z of X, let 
 be the set of vertices not in Z but has at least one neighbor in Z.

Theorem 5.1

Generalized Hall's Theorem

Given a finite bipartite graph G with bipartition X and Y and vertex weight function W, there is a b-matching saturating all vertices in X if and only if for every vertex subset Z of X,

Proof

1) Necessity: suppose there exists a b-matching M saturating every vertex in X, then for any vertex subset Z of X, we have 
 
 where  is the set of edges with exactly one end vertex in Z.

The first equality holds because each vertex in Z is saturated by M. The second inequality holds according to the definition of b-matching.

2) Sufficiency: Suppose the inequality holds for any vertex subset of X. We will prove that every maximum b-matching M will saturate every vertex in X. We use contradiction to prove this. Suppose there exists a maximum b-matching M which does not saturate every vertex in X, we will prove there exists another b-matching of G whose weight is larger than , a contradiction.

Let  be the set of all vertices in X not saturated by M. Since G is a bipartite graph, . Since A is not saturated by M, 
. Thus there exists a vertex in  not saturated by M. Let x be a neighbor of y in X. Then  are both not saturated by M. Let 
. For any edge  in , let 
 and let 
, then 
 is also a b-matching of G and 
. A contradiction to the assumption that M is a maximum weight b-matching. □

5.2. Maximum b-matchings of diagnosis graph 
 and relation to minimum weight cover of 
Theorem 5.2

Given a graph G with a t-diagnosable syndrome σ, let 
 be the necessarily faulty vertex set of σ and F be σ's unique minimum consistent faulty vertex set of cardinality not more than t. Let 
 be the diagnosis graph of G with respect to σ. Suppose 
 with 
 where 
 is the set of vertices in 
 from which u is contracted, then 
 is the unique minimum weight vertex cover of 
.

Proof

By Lemma 4.4, for any edge 
, either 
 or 
. This means that at least one of  is in 
. So, 
 is a vertex cover of 
.

Suppose there exists another vertex cover 
 of 
 with 
. Let 
, then 
. In the following, we will prove that 
 is also consistent with σ, and this will arouse a contradiction with the fact that F is σ's unique minimum consistent faulty vertex set.

In the following we use 
 to denote the result of  under fault circumstance 
. And we use 
 to denote the result of  in σ. Consider the result  of a test . If 
, then 
 can be 0 or 1 in the fault circumstance 
, so it may equal 
 in σ. In the following, we suppose 
. Let 
 be the vertex contracted from u in 
, then 
.

Case 1) 
:

Under the fault circumstance 
, 
 must be 1. We will use contradiction to prove that 
 too. Suppose 
, then u must be in 
 too according to the Step 6 of the NFSL algorithm. This is a contradiction to our assumption that 
.

Case 2) 
:

Under the fault circumstance 
, 
 must be 1. We will use contradiction to prove that 
 too. Suppose 
, then 
 too; otherwise u must be in 
. So,  are contracted to the same vertex in 
, a contradiction to 
 and 
.

Case 3) 
:

Under the fault circumstance 
, 
 must be 0. We will use contradiction to prove that 
 too. Suppose 
, then 
 too. Otherwise v must be in 
. Let 
 be the vertex in 
 such that 
, then 
. Since 
 is a vertex cover of 
, at least one of 
 is in 
, which means that at least one of  is in 
, a contradiction to 
. □

Let 
⁎
 be the graph obtained from 
 by removing edges between vertices in 
.

Lemma 5.3

⁎
 is a bipartite graph with bipartition 
⁎
.

Proof

Clearly by definition of 
⁎
, there are no edges connecting vertices in 
. Also, vertices in 
⁎
 are contracted from fault free vertices. If there are edges connecting them, they should be 0-links. But 
⁎
 has no 0-links. □

Lemma 5.4

Let 
⁎
 be the above defined bipartite graph, then for any nonempty set 
, where  is the set of neighbors of A in 
⁎
.

Proof

Now, 
 because 
 is contracted from 
. And 
.

So 
 and  are both of cardinality not more than 
. Let 
 and 
 be the set of vertices in 
 from which 
 and  are contracted. So, 
 and 
. But, there are no edges between 
 and 
 since there are no edges from 
⁎
 to 
. Thus 
 and 
 are indistinguishable according to Theorem 2.2. So, 
 is not (
)-diagnosable under the SPMC model, a contradiction to Lemma 4.6. □

Theorem 5.5

There exists a maximum b-matching of 
⁎
 that saturates all vertices in 
.

Proof

By construction, 
⁎
 is obtained from 
 by removing all edges between vertices in 
. And by Lemma 5.3, 
⁎
 is a bipartite graph with bipartition 
⁎
. By Lemma 5.4, in 
⁎
, for any vertex subset 
, So, by Lemma 5.1, there exists a maximum b-matching of 
⁎
 that saturates all the vertices in 
. □

Next we have the following main result of this section.

Theorem 5.6

Every maximum b-matching of 
 saturates all the vertices in 
.

Proof

Let 
⁎
 be a maximum b-matching of 
⁎
 that saturates all the vertices in 
, and M a maximum b-matching of 
. Note that the weight of any vertex cover is not less than the weight of any b-matching. Since 
⁎
 saturates all vertices in 
 and 
⁎
 is bipartite, 
⁎
. Since 
 is a vertex cover of 
, 
. Since 
⁎
 is a subgraph of 
, 
⁎
. So, 
⁎
. By Lemma 5.2, 
 is the unique minimum weight vertex cover of 
. The result follows. □

The next step in developing our diagnosis algorithm is to find a maximum b-matching of the diagnosis graph 
. This b-matching would saturate all the vertices in 
. We would like to use this b-matching to identify 
. To do so we first explore certain properties of the graph 
 after a maximum b-matching is identified.

Theorem 5.7

Let M be a maximum b-matching of 
 and 
 as defined above,

•
If we remove all the edges that are assigned zero weight under M, then the resulting graph is bipartite with partition 
.

•
There is at least one vertex in 
 that is unsaturated under M.

Proof

a) By Lemma 5.3, 
⁎
 is a bipartite graph with bipartition 
⁎
. Since 
⁎
 is obtained from 
 by removing edges between vertices in 
, in 
 there are no edges connecting vertices in 
. Consider next the vertices of 
 in 
. As shown in the proof of Theorem 5.5,  equals the weight of a maximum b-matching of 
⁎
. Since there are no edges in 
⁎
 connecting vertices in 
, the edges in M connecting vertices in 
 must also have zero weight assigned under M. Thus, if we remove these edges connecting vertices in 
, the resulting graph will be bipartite with partition 
.

b) If all the vertices in 
 are saturated under M, then 
 where 
, a contradiction to the result in Lemma 5.4. □

5.3. Labeling algorithm (LABEL) to identify faulty vertices
In this section we present Algorithm LABEL to identify all the fault vertices in 
 and prove its correctness.

Labeling Algorithm

Input: Diagnosis graph 
 with vertex and edge weights assignments. A maximum b-matching M of 
.

Output: The Set of all vertices of 
 with label faulty or fault-free.

Step 1: Remove all the edges of 
 assigned zero weight under M.

Step 2: Pick an unsaturated vertex u, and label it as fault free. Label as faulty all vertices at odd distance from u and as fault free all those at even distances (here distance is measured in terms of number of edges).

Step 3: Repeat Step 2 until there are no unlabeled vertices.

Step 4: End.

To prove the correctness of the algorithm LABEL, the following theorem is proved next.

Theorem 5.8

Proof

By Theorem 5.3, in 
 when all the edges connecting vertices in 
 assigned zero weights under M are removed, the obtained graph is a subgraph of 
⁎
. So all the vertices at odd distance from vertex u are faulty and those at even distance are fault-free. So, the labels assigned by LABEL algorithm are correct. We need to show that all vertices are labeled correctly. Let A = {all vertices labeled faulty}, B = {all unlabeled vertices in 
}, D = {all vertices labeled fault-free}, 
{all unlabeled fault free vertices}.

As illustrated in Figure 6, note that

1) There are no edges connecting vertices in A and C; otherwise vertices in C would have been labeled.

2) There are no edges connecting vertices in B and D; otherwise vertices in B would have been labeled.

3) There are no edges connecting vertices in A and B and no edges connecting vertices in C and D because 
 is bipartite.

Now 
 

, so , a contradiction to Lemma 5.4.

5.4. t-diagnosis algorithm (DIAGNOSE)
We now summarize our t-diagnosis algorithm under the SPMC model.

Algorithm 3: t-Diagnosis Algorithm DIAGNOSE

Input: Graph G and syndrome σ under the SPMC model.

Output: Set of all faulty vertices.

Algorithm:

Step 1: Apply the NFSL algorithm to determine 
: the set of necessarily faulty vertices.

Step 2: Determine 
, the diagnosis graph.

Step 3: Determine a maximum b-matching of 
.

Step 4: Apply LABEL to identify the set 
 of 
.

Step 5: Determine 
 of G from which 
 is contracted.

Step 6: End (
 is the set of all faulty vertices in G)

Correctness of the t-diagnosis algorithm follows from the correctness of the NFSL algorithm, Theorem 5.6 and Algorithm LABEL. We next provide a study of the computational complexity of DIAGNOSE and a comparison with the complexity of Dahbura Mason algorithm for t-diagnosis under the PMC model.

6. Computational complexity of algorithm DIAGNOSE and a comparative evaluation
In this section we evaluate the time complexity of our diagnosis algorithm DIAGNOSE and compare it with the complexity of Dahbura –Mason (DM) algorithm for t-diagnosis [17].

In DIAGNOSE, finding a maximum b-matching dominates the computational complexity. To the best of our knowledge, the b-matching algorithm of Anstee [6] has the best complexity for the maximum b-matching problem.

With the following definitions:

 = number of edges in the diagnosis graph 
,

 = number of vertices in 
, and

w= the maximum of the vertex weights in 
,

the complexity of Anstee's b-matching algorithm is the minimum of

 (A)

and 
 (B)

Note that the complexity of the DM algorithm is 
 
, where

m = number of edges in the implied graph that is obtained from the test graph G and a syndrome. (See below the definition of implied graph.)

n = number of vertices in the implied fault graph which is the same as the number of vertices in the test graph G.

To compare our algorithm and the DM algorithm we need to relate ,  and w to m and n.

6.1. Relating  and w to n
Let  denote the weight associated with vertex i in 
. Then,

.

So in the worst case when 
, n can be viewed as a partition of n with  parts in the partition. The value of  depends on the syndrome associated with the edges in G and so we do not know its value a priori. For this reason, in our analysis we use the expected value of the number of parts in a partition. This expected value is equal to 
 
 where c is a positive constant [5], [21], [35], [50]. Thus
 

Dually [5], we have
 

6.2. Relating  to m
Given the test graph G and a syndrome, the implied fault graph, defined in [17], has the same set of vertices as G. A vertex i is connected to vertex j in the implied fault graph, if assuming i as fault free implies that j is faulty. Recall that each vertex in 
 corresponds to a maximal connected subgraph of 0-links of the graph 
 and that the weight of that vertex is equal to the number of vertices in that maximal connected component. Also, if there is an edge in 
 connecting vertices i and j, then assuming the set of vertices in the maximal component corresponding to vertex i in 
 to be fault free will imply all the vertices in the maximal set corresponding to vertex j in 
 are faulty. So the number m of edges in the implied fault graph is given by 
 

Case 1: All 's are equal to 1.

In this case  and  and so the complexity of our diagnosis algorithm will be the same as that of the DM algorithm.

Case 2: For each i, .

In this case, taking logarithms on both sides we get 
 

So

Using  and E in A and B, we get the following:

i) The dominating term in A is
 
 If 
, the dominating term in F is
 
 ii) The dominating term in B is
 If 
, the dominating term in (F) is
 iii) The minimum of F and H is
 If 
, the minimum of G and I is

Summarizing, we have the following complexity results.

Theorem 6.1

•
i) On average, the worst case time complexity of the t-diagnosis algorithm (DIAGNOSE) under the SPMC model is 
. If 
 the complexity is 
.

•
ii) The worst case time complexity of Dahburra - Mason Algorithm [17] for t-diagnosis under the SPMC model is 
 
. If 
 then its time complexity is 
.

7. Summary
In this paper, we have introduced a new test model namely the SPMC model for fault identification in a multiprocessor system. In contrast to the classical PMC model introduced by Preparata, Metze and Chien [23], the SPMC model requires adjacent processors in the test graph to test each other and follows the PMC model as regards test outcomes. Under the PMC model, it is also assumed that only feasible pair of vertex subsets are to be distinguished. We have studied the diagnosability and the diagnosis problems under the SPMC model. We first showed that the diagnosability (maximum number of faulty nodes allowed) of the well known interconnection networks hypercubes under the SPMC model is almost twice its diagnosability under the PMC model. We then presented the NFSL algorithm to determine the set 
 of all necessarily faulty vertices based on a given syndrome. This set is the intersection of all fault sets consistent with the given syndrome. Using 
 and the contraction operation, we then define the diagnosis graph which collects all the other information except 
 of a syndrome. This graph is a vertex weighted graph and is much smaller than the original test graph. The problem of fault identification in a t-diagnosable system is then shown to be that of determining the unique minimum weight vertex cover of the diagnosis graph. This minimum weight vertex cover is determined from a maximum b-matching of the diagnosis graph. A series of results that lead to the proof of correctness of the fault identification algorithm DIAGNOSE are proved. Finally, we study the computational complexity of DIAGNOSE. This analysis is based on certain results in the theory of partitions of a positive integer. The complexity of DIAGNOSE is shown to be much better than the complexity of the Dahbura-mason algorithm for t-diagnosis. The new fault model for t-diagnosis developed in this paper provides the framework for the study of the diagnosability and diagnosis problems for all the different fault and testing models surveyed in Section 1 of this paper.