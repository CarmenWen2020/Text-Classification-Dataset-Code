Abstract
We study the k-regular sequences introduced by Allouche and Shallit. We call a k-regular integer sequence s quasi-universal, if for every recursively enumerable set A of positive integers, the k-kernel of s contains a sequence t such that A equals the set of positive terms of t. We show that there are quasi-universal k-regular sequences for every integer . As a consequence, no nontrivial property is decidable for the set of positive terms of a k-regular sequence.

Keywords
Automatic sequences
k-regular sequences
Recursively enumerable sets
Undecidability

1. Introduction
Let  be an integer. Allouche and Shallit have introduced the k-regular sequences as a generalization of the k-automatic sequences (see [1]). In their seminal paper they showed that many known sequences are k-regular and proved that the theory of k-regular sequences is closely related to the theory of rational power series (see [3], [4], [8], [15]). In a recent paper, Krenn and Shallit study decision problems concerning k-regular sequences (see [7]). Their main tool is the undecidability of Hilbert's tenth problem (see [9]).

In this paper we define and study quasi-universal k-regular integer sequences. We say that a k-regular integer sequence s is quasi-universal, if for every recursively enumerable set A of positive integers, the k-kernel of s contains a sequence t such that A equals the set of positive terms of t. The existence of quasi-universal k-regular sequences follows from the universal Diophantine representation of recursively enumerable sets of positive integers due to Matiyasevich (see [9]).

If  is an integer, every m-regular sequence can easily be coded as a recursively enumerable set of positive integers. Hence, if s is a quasi-universal k-regular sequence, then the subsequences of s in the kernel of s contain full information about all m-regular sequences.

In the construction of quasi-universal k-regular sequences we use the close connection between rational series and k-regular sequences. We use also ideas from [6], where the universal Diophantine representation of recursively enumerable sets is used to construct rational power series with high image complexity.

We will use quasi-universal k-regular sequences to prove that no nontrivial property is decidable for the set of positive terms of a k-regular sequence. This can be seen as a variant of Rice's theorem (stating that no nontrivial property is decidable for recursively enumerable sets) for k-regular sequences.

We will assume that the reader is familiar with the basics of language theory (see [2], [12]), formal power series (see [3], [4], [8], [15]) and recursively enumerable sets (see [9], [10], [11], [14]). These references should be consulted for all unexplained notation and terminology.

2. Definitions
As usual,  is the set of integers and 
 is the set of positive integers.

Let  be an integer. If n is a positive integer, there exist unique integers  and 
 such that
 The word 
 over the alphabet  is said to be the representation of n in base k. We write
 Furthermore, 
. Here ε is the empty word.

Let 
, where 
. The numerical value 
 of u in base k is

Next we recall some notions concerning formal power series. Let X be a finite nonempty set of variables and let A be a semiring. The set of formal power series with noncommutative variables in X and coefficients in A is denoted by 《》. If 《》, r is a mapping from the free monoid 
⁎
 generated by X into A. The image of a word 
⁎
 by r is denoted by  and r is written as 
⁎
  Here  is called the coefficient of w in r. An alternative notation which is often used for  is .

If 《》, the support of r is the set
⁎

If 《》, the image  of r is the set of its coefficients. Hence
⁎

If 《》 and 
⁎
, the series 
《》 is defined by
 for all 
⁎
.

In what follows we will take  as the basic semiring.

There are many equivalent ways to define the k-regular sequences and there are many equivalent ways to define the -rational series. Here we choose among these equivalent definitions two which most clearly reveal the close connection between k-regular integer sequences and -rational series. For more information we refer to [1], [2], [3], [4], [8], [15].

For positive integers p and q, 
 is the set of  matrices having integer entries.

Definition 1

A series 《》 is called -rational if there exist an integer , a monoid morphism
⁎
 and two matrices 
 and 
 such that for all 
⁎
, Then the triple  is called a linear representation of r.

Definition 2

Let  be an integer. A sequence 
 of integers is called k-regular if there exist an integer , a monoid morphism
⁎
 and two matrices 
 and 
 such that for all 
⁎
,
 Then the triple  is called a linear representation of s.

Let 《》, where . We say that r satisfies the left zero condition if
 for all  and 
⁎
. There is a one-to-one correspondence between the k-regular integer sequences and the -rational series in 《》 satisfying the left zero condition.

Let 
 be a k-regular sequence. Then the k-kernel 
 of s consists of the subsequences
 of s, where  and 
. Let  be a linear representation of s and let r be the -rational series in 《》 which has the same linear representation as s. Then r satisfies the left zero condition. Assume that 
⁎
 is a word of length p such that 
. Then
 for all 
⁎
. Hence 
 corresponds to 
. The triple  is a linear representation of 
 and a linear representation of 
.

3. Quasi-universal k-regular sequences
Recall that a set is recursively enumerable if there is a Turing machine accepting the set (see [9], [10], [11], [14]).

Definition 3

Let  be an integer. A k-regular sequence s of integers is quasi-universal if for every recursively enumerable set A of positive integers, there is a sequence 
 in the k-kernel of s such that A equals the set of positive terms of 
.

To prove the existence of quasi-universal k-regular sequences we use the universal Diophantine representation of recursively enumerable sets.

For the remaining part of this paper, fix an enumeration
 of the recursively enumerable subsets of 
. The following deep theorem is due to Matiyasevich.

Theorem 1

There is a positive integer t and a polynomial 
 with integer coefficients such that for all positive integers i and m we have
 if and only if there exist positive integers 
 such that
 Furthermore, we can compute such a polynomial 
.

For the proof of Theorem 1 see the monograph [9].

The following lemma is well known. It follows easily from the basic properties of rational series (see [8], [15]).

Lemma 2

Let  be a two-letter alphabet and let 
 be a polynomial with integer coefficients. Then there is a -rational series 
《》 such that(1)
 for all positive integers 
 and(2)
 Furthermore, we can compute a linear representation of 
.

The following theorem is a variant of a result in [6] (see also [5]).

Theorem 3

Let  be a two-letter alphabet. There exists a -rational series 《》 such that for all positive integers i we have(3)
 and(4)
 where  is an integer. Furthermore, we can compute a linear representation of r.

Proof

Let 
 be the universal polynomial of Theorem 1. Define the polynomial 
 by
 By Lemma 2 there exists a -rational series 
《》 such that (1) holds for all positive integers 
 and (2) holds. Let
 
 and
 Since 
 is -rational, so is r. Since we can compute linear representations of 
 and 
, we can compute a linear representation of r. By (2) and the definition of 
 we have (4).

Next, fix a positive integer i. Then
 Since
 we have

Here
 To conclude the proof it remains to show that a positive integer m belongs to 
 if and only if 
.

First, assume that 
. Then there exist positive integers 
 such that 
. This implies that 
. Hence
 Consequently,
 This shows that 
.

Conversely, assume that a positive integer m belongs to 
. Then there exist positive integers 
 such that
 This implies that(5)
 Since m is positive, the definition of q implies that(6)
 Hence we have(7)
 Equation (6) implies that(8)
 Now (5) and (8) imply that 
. Hence (7) implies 
. □

It is now easy to construct quasi-universal k-regular sequences.

Theorem 4

Let  be an integer. There is a k-regular sequence 
 of integers such that for all positive integers i we have
 Furthermore, we can compute a linear representation of s.

Proof

By Theorem 3 there is a -rational series 《》 such that for all positive integers i we have
 We may assume that r satisfies the left zero condition. Furthermore, we can compute a linear representation of r.

Now, let 
 be the k-regular sequence which has the same linear representation as r. In other words, 
 for all 
⁎
.

Fix a positive integer i. Then
⁎
⁎
 □

4. Examples and undecidability results
The set of positive terms of a k-regular sequence is always recursively enumerable. Theorem 4 shows that nothing more can be said in general. We continue with some specific examples. The claims in these examples follow immediately by Theorem 4.

Example 1

There exists a k-regular sequence 
 such that the positive terms of 
 are the prime numbers.

Example 2

There exists a k-regular sequence 
 such that the positive terms of 
 are the prime powers.

Example 3

There exists a k-regular sequence 
 such that the positive terms of 
 are the numbers  obtained from the decimal expansion of π.

Example 4

There exists a k-regular sequence 
 such that the positive terms of 
 are the numbers 3, 33, 
.

In the following example we discuss the properties of the sequence s constructed in Theorem 4 in an informal way.

Example 5

Consider a k-regular sequence t. Let us say that the sets 
, where 
 are the sequences in the k-kernel of t are memory places of t. Then our sequence s has in its memory places all recursively enumerable sets of positive integers. If we know the index of the recursively enumerable set we have access to the memory place which contains the elements of the set. The memory place also contains all nonpositive integers. Now, for every integer , every m-regular integer sequence can easily be coded as a recursively enumerable set of positive integers. Hence, our k-regular sequence s has in its memory places all m-regular integer sequences, in a coded form. It should be noted that while it is easy to compute any term of a k-regular sequence, the sequence s does not generate the m-regular sequences in a nice way. In this sense it is very far from a universal k-regular sequence if we interpret the term universal as it is understood in connection of Turing machines.

The sequence s constructed in the previous section can be used to prove that many decision problems concerning k-regular sequences are undecidable. Krenn and Shallit have recently given a long list of undecidable problems for k-regular sequences (see [7]). As already pointed out in [1], k-regular sequences are closely related to rational series. Hence many undecidability results known for rational series imply undecidability results for k-regular sequences (see [8], [15]). For example, Ruohonen has proved that image equivalence is undecidable for -rational series (see [13]). The proofs of these older results are sometimes longer than the proofs given by Krenn and Shallit if these older results prove undecidability under more restrictive conditions depending on the problem under consideration, but they are based on the undecidability of Hilbert's tenth problem.

The following theorem gives an undecidability result of some generality for k-regular sequences.

Theorem 5

Let P be a property which at least one but not all recursively enumerable subsets of 
 have. Let s be the k-regular sequence of Theorem 4. There is no algorithm to decide, given a sequence t in the k-kernel of s, whether the set of positive terms of t has property P.

Proof

Let i be a positive integer. Then we can compute a sequence 
 in the k-kernel of s such that the set of positive terms of 
 is 
, where 
 is the ith recursively enumerable subset of 
 in our fixed list of all recursively enumerable subsets of 
. The claim now follows by Rice's theorem stating that no nontrivial property of recursively enumerable sets is decidable (see [10], [11], [14]). □

The following theorem lists some specific corollaries of Theorem 5.

Theorem 6

Let s be the k-regular sequence of Theorem 4. There is no algorithm to decide any of the following problems for the sequences in the k-kernel of s:

(a)
is a given positive integer a term of the sequence,

(b)
is the image of the sequence equal to ,

(c)
are there infinitely many positive integers in the image,

(d)
is every positive term a prime (resp. a prime power),

(e)
is every positive term a perfect square,

(f)
are the positive terms of the sequence the numbers  obtained from the decimal expansion of π,

(g)
are the positive terms of the sequence the numbers 
.