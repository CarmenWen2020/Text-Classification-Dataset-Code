Abstract
Consider a graph G=(V,E) and a random initial coloring where each vertex is black independently with probability pb, and white with probability pw=1−pb. In each step, all vertices change their current color synchronously to the most frequent color in their neighborhood and in case of a tie, a vertex keeps its current color. This model is called the majority model. If in case of a tie a vertex always selects black color, it is called the biased majority model. We are interested in the behavior of these two processes, especially when the underlying graph is a two-dimensional torus (cellular automaton with (biased) majority rule). In the present paper, as our main result we prove that both majority and biased majority cellular automata exhibit a threshold behavior with two phase transitions. More precisely, we prove for a two-dimensional torus Tn,n, there are two threshold values 0≤p1,p2≤1 such that pb≪p1, p1≪pb≪p2, and p2≪pb result in final complete occupancy by white, stable coexistence of both colors, and final complete occupancy by black, respectively in O(n2) number of steps. (For two functions f(n) and g(n), we shortly write f(n)≪g(n) instead of f(n)∈o(g(n)).) We finally argue that our proof techniques can be used to prove a similar threshold behavior for a larger class of models.

Keywords
Cellular automaton
Majority rule
Biased majority
Phase transition
Bootstrap percolation
Dynamic monopoly

1. Introduction
Suppose that in a community, people have different opinions on a topic of common interest. Through social interactions, individuals learn about the opinions of others, and as a result may change their own opinion. The goal is to understand and possibly predict how opinions spread in the community. There are numerous mathematical models for such a situation; a very simple deterministic one is the following: the community is modeled as a graph, with edges corresponding to possible interactions between individuals. Opinions spread in rounds, where in each round, each individual adopts the most frequent opinion in its neighborhood. If in case of a tie an individual stays with him/her opinion, it is named the majority model, but if in case of a tie s/he always adopts a specific opinion, the process is called the biased majority model. These two natural updating rules have various applications, for example in data redundancy [27], distributed computing [28], modeling biological interactions [7], resource allocation for ensuring mutual exclusion [27], distributed fault-local mending [27], and modeling diffusion of two competing technologies over a social network [9].

Scientists from different fields have attempted to study the behavior of these natural updating rules, especially on the two-dimensional torus where the (biased) majority rule can be interpreted as a cellular automaton. Some theoretical and experimental results concerning its behavior have been obtained, which will be discussed in detail in Section 1.2; of particular interest is the consensus time, the time after which the process reaches a periodic sequence of states (which must eventually happen, as the process is deterministic and has finite state space). Also, one would like to understand how these “final” states look like, depending on the initial distribution of opinions. For example, what are conditions under which some opinion is eventually taken up by all the individuals?

In this paper, we first present some results in general graphs , regarding consensus time, eternal sets (sets of vertices that guarantee the survival of an opinion that they have in common), and robust sets (sets of vertices that will never change an opinion that they have in common). Building on them, our main contribution is for the case where G is an  torus, with 4-neighborhoods (von Neumann neighborhood), or with 8-neighborhoods (Moore neighborhood). As mentioned, we study the case of two opinions (modeled by vertex colors black and white), with an initial coloring that assigns black to every vertex independently with a probability 
, and white otherwise (
). It is proven that both majority cellular automata and biased majority cellular automata exhibit a threshold behavior with two phase transitions. In the torus 
 with von Neumann neighborhood asymptotically almost surely1 (or shortly a.a.s.), the majority model results in final complete occupancy by white, stable coexistence of both colors, and complete occupancy by black for 
, 
, and 
, respectively in 
 number of steps. (Note that 
 has 
 vertices.) For two functions  and ,  means that . We prove a similar threshold behavior for Moore neighborhood. More precisely, we prove that in 
 with Moore neighborhood a.a.s. the majority model results in final complete occupancy by white, stable coexistence of both colors, and complete occupancy by black for 
, 
, and 
, respectively. Then, we argue that our proof techniques can be used to prove such threshold behavior for a larger class of models and a more general type of neighborhood structures called bounded symmetric neighborhoods.

Furthermore, it is proved that for von Neumann neighborhood and the biased majority model, 
, 
, and 
 result in final complete occupancy by white, stable coexistence of both colors, and final complete occupancy by black, respectively in 
 steps a.a.s. Fig. 1 summarizes the aforementioned threshold behaviors.

Fig. 1
Download : Download high-res image (49KB)
Download : Download full-size image
Fig. 1. The threshold values for both majority and biased majority cellular automata in Moore and von Neumann neighborhoods (by pb ≪ 1 − f(n) (similarly pb ≫ 1 − f(n)) we mean pw ≫ f(n) (pw ≪ f(n)) for f(n)=n−1/2 and n−1/6).

These results are not only interesting for their own sake, but also answer two important questions. Firstly, prior empirical work [8], [23], [25], [33] have demonstrated that majority cellular automata exhibit a threshold behavior, i.e. if the density of vertices holding the same color is above a certain threshold, then that color will survive in all upcoming steps, otherwise the color might disappear in a few steps. Our results concerning majority cellular automata prove the aforementioned empirical observation and determine the threshold values and the consensus time of the process. Secondly, Schonmann [32] proved that in biased majority cellular automata with von Neumann neighborhood 
 outputs final complete occupancy by black a.a.s. We show that this bound is asymptomatically tight. Furthermore, we will present the asymptotically tight bound of  on the consensus time of both automata which has been a point of interest in prior work.

Intuitively, if the density of black color increases, the chance of its survival will increase and the chance of survival for white color decreases. In other words, by increasing the initial density of a color from 0 to 1, it will go through different phases: (i) very low density results in the disappearance of the color (ii) sufficient initial density for both colors outputs the survival of both colors (iii) very high initial density of a color results in the final occupancy by that color. Therefore, intuitively and as also prior experimental results suggest, it is natural to show that majority and biased majority automata show a threshold behavior with two phase transitions, but the more surprising part is the substantial change in the value of thresholds by switching form the majority model to the biased majority model. In majority cellular automata with von Neumann neighborhood, 
 should be very close to 1 to have a high chance of final complete occupancy by black, but by just changing the tie-breaking rule in favor of black, the process ends up in a black monochromatic configuration a.a.s. even for initial density very close to 0. Therefore, switching the tie-breaking rule can result in significant changes in global behaviors of the process.

To prove that majority cellular automaton has a threshold behavior, we show that there exists a black robust set (a robust set whose all vertices are black) in starting configuration a.a.s. for 
 (
 in Moore neighborhood) which results in the survival of black color. However, proving that 
 (similarly 
 in Moore neighborhood) results in a white monochromatic configuration requires more effort. We show that in this case we can a.a.s. classify the black cells in the initial configuration (we sometimes use the term cell instead of vertex, from the literature of cellular automata) such that all black cells in a group behave independently of all other black cells and the number of black cells in none of these groups is sufficient for survival. As we will discuss in more detail, this proof technique requires more technical arguments in the case of Moore neighborhood because of switching from 4-neighborhood model to 8-neighborhood model.

In the case of biased majority cellular automata with von Neumann neighborhood as we mentioned, Schonmann [32] proved that 
 results in final complete occupancy by black a.a.s. We prove that both colors will survive a.a.s. for 
. We argue that if 
, then there exists at least a black eternal set (an eternal set whose all vertices are black) in the initial configuration a.a.s., which guarantees the survival of black color. However, to show that white color will never vanish a.a.s. for 
, we need a more involved argument. Furthermore, we prove that black color disappears in the case of 
. To prove this, we intuitively have to overcome the same difficulty that we have in the case of the majority model.

Building on the results by Poljak and Turzik [30], we discuss that majority and biased majority cellular automata stabilize, i.e. reach a periodic sequence of states, in  steps and these bounds are asymptotically tight, that is there are some initial colorings for which the process needs  steps to stabilize.

The layout of the paper is as follows. In the rest of this section, first we introduce majority and biased majority models formally. Then, in Section 1.2, we briefly discuss relevant prior work. In Section 1.3, the majority model is discussed on cycles (one-dimensional cellular automata) as a simple example before going through two-dimensional cellular automata. In Section 2, we discuss the consensus time and periodicity of the two models on an arbitrary graph . Then, in Sections 3.2 we prove the threshold behavior of he majority model on a torus with von Neumann and Moore neighborhood. In Section 3.3, we argue how our techniques can be applied to a much larger class of models and neighborhood structures. Finally, we study the biased majority model on a torus with von Neumann neighborhood in Section 3.4.

1.1. Notation, preliminaries, and (biased) majority model
Let  be a graph that we keep fixed throughout. For a vertex ,  is the neighborhood of v. We also define 
. For a set , 
 and 
 (similarly 
 and 
). Furthermore, for two vertices , the distance  is the length of the shortest path between v and u in terms of the number of edges. For instance, the distance between two adjacent vertices is one. We also define  for a vertex v. Moreover, for two vertex sets 
, we define 
.

A generation is a function  (b and w represent black and white, respectively). If g is a constant function, g is called a monochromatic generation otherwise it is called a bichromatic generation. A set  is a c-community for color  and in generation g if  for any . For a generation g, vertex  and color ,
 is the set of neighbors of v of color c in generation g. We also define
 For a set , we define 
 and similarly 
.

In addition to  for a vertex  and , sometimes we also write 
 for a set  which mean  for any .

Consider an arbitrary initial generation 
 on a graph . Let for any  and , 
 equal to the color that occurs most frequently in v's neighborhood in 
, and in the case of a tie, v conserves its current color. More formally
  The above model is called the majority model. In the same setting by just changing the tie-breaking rule, we have the biased majority model. In the biased majority model in case of a tie, a vertex always adopts black color. More formally
  In the present paper, we study the behavior of these two deterministic processes with a random initial generation, where for each vertex  
 and 
 independently of all other vertices, and 
.

Since both models are deterministic and the number of possible generations for a graph  is 
, they always reach a cycle of generations after finite number of steps. For a graph  and the (biased) majority model, the number of steps which the process needs to stabilize (reach a cycle of generations) is called consensus time. We say a process gets b-monochromatic (similarly w-monochromatic) if finally it reaches a black (white) monochromatic generation (all vertices black (white)), otherwise we say it gets bichromatic. Furthermore, for a graph  and the (biased) majority model, -monochromatic] (-monochromatic]) denotes the probability that the graph gets black (white) monochromatic, and bichromatic]=-monochromatic]--monochromatic] for a random initial coloring in the (biased) majority model.

1.2. Prior works
As mentioned, majority-based rules have been studied extensively due to their applications in various areas. Based on different motivations and from a wide spectrum of literature, several majority-based rules have been presented, but in general we may classify them into the following three categories.

The first class is the α-monotone model in which, at each step a vertex becomes black if at least α of its neighbors are black, and once black no vertex ever becomes white (in the literature this is also known as bootstrap percolation). For example in [4], the authors discussed the case of 
 
 on hypercubes (where  stands for the degree of vertex v). Flocchini et al. [11] also studied the minimum number of black vertices (in the initial generation) which can finally result in a completely black generation and the necessary time for this transition to happen, especially on planar graphs, rings, and butterflies. Moreover, Mitsche and et al. [22] considered the case of 
. Koch and Lengler [21] analyzed the role of geometry on bootstrap percolation for geometric scale-free graphs. For several other similar results regarding this model see for example [1], [3], [5], [17], [19].

The second one is the α-threshold model in which, at each step, a vertex becomes black if at least α of its neighbors are black, otherwise it becomes white. For instance, Schonmann [32] considered the case of 
 
, and he showed that for any initial density of black vertices in a torus,2 the probability of final complete occupancy by black converges to 1 as the torus grows. Fazli et al. [9] also considered the same setting and provided tight upper/lower bound regarding the minimum-cardinality of an initial set of black vertices which would eventually converge to the steady state where all vertices are black. In addition, Moore [24] showed that in d-dimensional grid for , this model can simulate boolean circuits of AND and OR gates. For similar results regarding α-threshold model, see for example [6], [12], [13], [20], [26], [34].

Another model is the random α-threshold model such that a vertex takes the value that the α-threshold model would give with probability  and its complement with probability p. For instance, Balister et al. [2] considered the case of 
 
 on 2-dimensional grids. They showed that if p is sufficiently small, then the process spends almost half of its time in each of two generations, all vertices black or all white.

The (Biased) Majority model is a subcategory of α-threshold model, which was introduced by Gray [18]. The majority and biased majority models are often called the (discrete time synchronous) majority-vote model in the literature. Most of prior research regarding the (biased) majority model [8], [23], [25], [33] are by physicists, and they mostly do computer simulations (i.e., Monte-Carlo methods). Specifically, their computer simulations suggest that the majority model allows the stable coexistence of both colors by forming clusters of vertices holding the same color in a 2-dimensional torus. Their experimental results demonstrate a phase transition behavior characterized by a large connected component of vertices holding the same color appearing when the density of vertices holding the same color is above a certain threshold. However, there are also some rigorous mathematical results; Poljak and Turzik [30] proved that the consensus time of the (biased) majority model on a graph  is upper-bounded by . In particular, their results imply that for a 2-dimensional torus ,  number of steps is sufficient to stabilize. On the other hand, Frischknecht, Keller, and Wattenhofer proved that there are arbitrarily large graphs for which some initial generations need 
 steps to stabilize in the majority model.

1.3. One-dimensional majority cellular automata
Before going through the (biased) majority model in 2-dimensional torus, we discuss the case of one-dimensional majority cellular automaton (a cycle in the majority model) which should help the reader to have a preliminary understanding of the techniques and the results that are presented in the rest of the paper.

Theorem 1.1

In the majority model and a cycle 
, if 
 
, a.a.s. the process reaches a bichromatic configuration at the end, but 
 
 results in a white monochromatic generation in at most 
 
 steps.

Proof

Consider a maximum matching M which divides V into 
 
 pairs 
 for 
 
 (for n odd, one vertex remains). We say a pair 
 is white (black) in generation g, if both of its vertices are white (black). It is easy to see that a black (white) pair stays black (white) in all next generations.

For 
 
, we define Bernoulli random variable 
 to be 1 if and only if pair 
 is black in the initial generation 
. Therefore, 
. If we assume 
 
, then by considering 
 
 and 
 for 
 
 Therefore, a.a.s. there exists a black pair and also a white pair in 
 (with a similar argument).

A white/black path is a path of size at least two which is fully white/black. Any generation with at least one white and one black path, includes some white and black paths which are adjacent or are separated with an alternating path (a path which does not contain any two consecutive vertices of the same color). Starting from a generation which has at least one white and one black path, in each step black and white paths stay unchanged but the size of each alternating path decreases by two; the endpoints join the adjacent white/black paths (i.e., adopt their color) and the remaining vertices switch to the opposite color. Therefore, after at most 
 
 steps, the majority model reaches a fixed generation including only white and black paths.

On the other hand, if 
 
, similarly one can show that a.a.s. initially there is at least one white pair, i.e. white path of length two. Furthermore, let Y denote the number of black paths of length two in the initial generation. Then, 
, which implies that there is no black path of length two initially a.a.s. by applying Markov's inequality cf. [10]. Thus, a.a.s. the initial generation includes one or more white paths which are separated with alternating paths. As discussed above, in this case after at most 
 
 steps the process gets fully white. □

2. (Biased) majority model
In this section, we first introduce two basic concepts of robust set and eternal set. Then relying on these concepts, we discuss sufficient condition on the initial density of a color which guarantees its survival in a given graph in all upcoming generations in the (biased) majority model. Specifically, we will exploit these results in Sections 3.2, 3.3, and 3.4 to prove the threshold behavior of (biased) majority cellular automata. Furthermore, in Section 2.2 we discuss asymptotically tight upper bounds on the consensus time of both processes.

2.1. Eternal and robust sets
Recall that, if generation g is a constant function, g is called a monochromatic generation, and a set  is a c-community in generation g for color c if 
. We are interested in sets of vertices that guarantee the survival of a color c forever if they create a c-community during the process. A specific group of such sets are the sets of vertices which will keep a common color forever when they create a community, regardless of the color of the other vertices.

Definition 2.1 Eternal Set

Let S be a vertex set in a graph . Then, S is called c-eternal for color  in the (biased) majority model whenever the following holds: if S forms a c-community in some generation 
 for , then for all generations 
 where , there exists a vertex  such that 
.

Definition 2.2 Robust Set

In a graph , a set  is c-robust for color  in the (biased) majority model whenever the following holds: if S forms a c-community in some generation 
 for , then 
 for all generations 
 for .

It follows that once a c-robust set forms a c-community, it will remain a c-community forever and if a c-eternal set creates a c-community once, color c will survive forever. Therefore, in a graph  a c-robust set is also a c-eternal set, but a c-eternal set is not necessarily a c-robust set. As a simple example, the reader might check that in the majority model on a star graph 
 (a tree with one internal vertex and n leaves), the internal vertex is a b-eternal set of size 1. However, a b-robust set in this setting must include the internal vertex and at least half of the leaves and thus is of size at least .
Furthermore, in the majority model a set S is a b-robust (b-eternal) set if and only if it is a w-robust (w-eternal) set; on the other hand, in the biased majority model a w-robust (eternal) set is a b-robust (eternal) set, but not necessarily the other way around.

Definition 2.3

A black (white) robust set in a generation g is a b-robust (w-robust) set which is a b-community (w-community) in g.

Similarly, a black (white) eternal set in a generation g is a b-eternal (w-eternal) set which is a b-community (w-community) in g.
Now, in Theorem 2.4, Theorem 2.6 we discuss that in the (biased) majority model if 
 (similarly 
) is sufficiently large, as a function of the underlying graph's structure, then black (respectively white) color will survive in all upcoming generations.

We discuss only the case of black color in the rest of this section, but all results similarly carry on the case of white color. Let for a graph 
, 
 for  be k b-eternal sets; then, we define 
 and 
 for . Assume that there are k disjoint b-eternal sets in a graph , then by Theorem 2.4 a.a.s. in the (biased) majority model color black will survive forever if 
 
. Furthermore, if graph G has k (not necessarily disjoint) b-eternal sets where all 
s can be upper-bounded by a constant, then by Theorem 2.6 black survives forever a.a.s. given 
 
.

Theorem 2.4

For a graph  and the (biased) majority model, if 
 for  are disjoint b-eternal sets, then -monochromatic
.

Proof

We define k random variables 
 such that for 
  where 
 for . Therefore, if 
, then the (biased) majority model does not get w-monochromatic because there is at least a black eternal set. We show 
 which implies -monochromatic
.

Since X is the summation of k independent Bernoulli random variables, then
 □

To prove Theorem 2.6, we first need to present Azuma's inequality. Let  be the product of n discrete probability spaces, and let  be a random variable over Ω. We say that the effect of the i-th coordinate is at most 
 if for all 
 which differ only in the i-th coordinate we have 
. Azuma's inequality states that X is sharply concentrated around its expectation if the effect of the individual coordinates is not too big.

Theorem 2.5

Azuma's inequality, cf. [10]
Let  be the product of n discrete probability spaces 
 for , and let  be a random variable with the property that the effect of the i-th coordinate is at most 
. Then,
 

Theorem 2.6

In a graph 
 and the (biased) majority model, if 
 for any  are b-eternal sets (not necessarily disjoint), then -monochromatic
.

Proof

Let random variable X denote the number of sets 
 for  which create a b-community in 
, i.e. 
. If we prove 
, then -monochromatic
.

Corresponding to each vertex 
, we define the probability space 
. Then, random variable  is defined over Ω, where  is the product of n discrete probability spaces 
 for . Recall that we say that the effect of the i-th coordinate is at most 
 if for all 
 which differ in the i-th coordinate we have 
. We observe that if we switch the color of a vertex 
 in 
, then there are at most 
 vertex sets 
 which were b-communities before switch and are not afterwards. Thus, we have 
. Now, by Azuma's inequality (Theorem 2.5), we get for any 
 

We observe that a vertex set 
, for some , creates a b-community with probability 
. This implies that 
. Therefore, we can conclude that
 
 □

Corollary 2.7

If 
 is constant and 
 
, then -monochromatic.

2.2. Periodicity and consensus time
For a graph , the number of possible generations is 
, and the (biased) majority model is a deterministic process; therefore, the process always reaches a cycle of generations after a finite number of steps and stays there forever, but there are two natural questions which arise. What is the length of the cycle and how long does it take to reach it?

Goles and Olivos [16] and independently Poljak and Sura [29] proved that a large class of majority-based models, including the (biased) majority model, always reach a cycle of period one or two. More precisely, they consider a set V of individuals such that every  has an initial color from set  for , i.e. there is a function 
. Furthermore, the function  for  measures the influence of u on v and it is symmetric which means for any  . Now, consider a system 
 which evolves over time so that for every , the function 
 which maps a member to its color at time  is defined as follows for  (u adopts the most frequent color in its neighborhood and in case of a tie, it chooses the largest one.)
  
  Now, assume that the period of a system is defined as minimum  so that 
 for some i. Goles and Olivos [16] and Poljak and Sura [29] presented Theorem 2.8.

Theorem 2.8

Goles and Olivos [16]
A system 
 with symmetric ω following
  
  always reaches a cycle of period one or two.

Now, we rephrase their result in our terminology.
Corollary 2.9

In the (biased) majority model, an arbitrary graph  (from any initial coloring) always reaches a cycle of generations of length one or two.

Proof

Let  where 0 and 1 correspond to white and black respectively. The initial generation 
 corresponds to 
 and we consider symmetric function ω as follows
 
  One can easily see that in this case the model is equivalent to the majority model. Therefore, the proposition is true in this case. For the case of the biased majority model is sufficient to change the state of  from 1/2 to 0. □

As mentioned, we are also interested in the consensus time of the process, and it is trivial that it is at most 
. However, Poljak and Turzik [30] proved the following theorem, in the literature of cyclically monotonous mappings and symmetric matrices which provides a tight upper bound on the consensus time of the (biased) majority model. More precisely, they present an upper bound on the pre-period of mappings of form  where A is a linear mapping given by a symmetric matrix of size  and the vector 
 (for more details see Theorem 2.10). Furthermore, pre-period means the maximal k such that all , 
, ⋯, 
 are distinct.  □

Theorem 2.10

Poljak and Turzik [30]
Suppose that 
 is defined by 
 where 
 if 
 and 
 if 
. Let 
 be a symmetric matrix with integral entities, then the pre-period of 
 is at most 
 
 where 
.

Again, by rephrasing their results in our setting, where pre-period is equivalent to consensus time, we immediately have Corollary 2.11.
Corollary 2.11

In a graph  for the majority model and the biased majority model, the consensus time is at most  and , respectively.

Proof

Set . Let 
 be an arbitrary ordering of vertices in V and let 
 denote the initial coloring of the vertices. The entries of the matrix 
 of size  are defined as follows for 
  and for  as follows
  Matrix A is symmetric since 
 if and only if 
.

Set 
 if 
 and 
 if 
. For a vertex 
 with 
 odd, there is always a color that occurs most frequently in the neighborhood since the number of neighbors is odd. Note that 
 if the majority of the neighbors of 
 is white and 
 otherwise. For a vertex 
 with 
 even, the rules of the majority model state that in the following generation 
 takes the color that occurs most frequently in its neighborhood and in case of a tie, it conserves its color. In other words, 
 takes the color that occurs most frequently in 
. Note that 
 if the majority of the vertices in 
 is white and 
 otherwise. This shows that applying the mapping fA to the vector 
 corresponds to one step in the majority model on the graph .

Furthermore, 
 since every row of A contains an odd number of 1's and every other entry is 0 by construction. Theorem 2.10 implies that the consensus time is at most 
 
. For 
 with 
 even, it holds that 
 and for 
 with 
 odd, it holds that 
. Therefore, the consensus time is at most 
 
 which is equal to 
 
 because  (where 
 and 
 are equal to the number of vertices with even degree and odd degree, respectively) which is obviously smaller than 
 
 which is equal to .

The case of the biased majority model also can be proved very similarly by defining for 
  □

3. (Biased) majority cellular automata
In this section, first some preliminary definitions concerning torus and grid are presented. Then in Section 3.2, we provide our results regarding the threshold behavior of majority cellular automata. In Section 3.3, we argue how our proof techniques can be utilized to prove a similar threshold behavior in a more general setting. Finally in Section 3.4, we study the threshold behavior of biased majority cellular automata.

3.1. Preliminaries
Definition 3.1 Grid

The grid 
 is the graph  such that  and 
.

Definition 3.2 Torus

The torus 
 is the graph  such that  and 
.

A torus 
 is a wrap-around version of the grid 
 which can be visualized as taping the left and right edges of the rectangle to form a tube, then taping the top and bottom edges of the tube to form a torus (see Fig. 2 (right)).
Fig. 2
Download : Download high-res image (78KB)
Download : Download full-size image
Fig. 2. (left) Von Neumann and Moore neighborhoods in the grid G8×8 (right) a torus.

The aforementioned definitions of grid and torus follow a neighborhood model which is called von Neumann neighborhood or 4-neighborhoods (see Fig. 2 (left)). On the other hand, there is another common neighborhood model which is called Moore neighborhood (see Fig. 2 (left)), where in a torus or grid (by skipping the borders), each cell instead of four neighbors has eight neighbors. More accurately, the grid 
 with Moore neighborhood is the graph  such that  and 
.

Remark 3.3

We sometimes use the term of cell instead of vertex in grids and tori.

Definition 3.4

For , the vertex set 
 is called the i-th column and for  the vertex set 
 is called the j-th row.

Definition 3.5 Rectangle

Let for arbitrary 
 and 
, set
 be a rectangle of size 
 in torus 
. We call it a square when 
.

3.2. Majority model: von Neumann and Moore neighborhood
In this section, we prove that 
 
 is a threshold for becoming monochromatic or bichromatic in majority cellular automata with von Neumann neighborhood. More precisely, 
 
 results in a cycle of bichromatic generations, but 
 
 outputs a white monochromatic generation a.a.s. For proving the first part, we exploit the concept of eternalness and show that if 
 
, there exist a black eternal set and a white eternal set in 
 a.a.s. which guarantee reaching a cycle of bichromatic generations. On the other hand, for proving the second part we consider a constant number of initial generations instead of just considering the initial generation 
, and this helps us to prove that 
 
 results in a white monochromatic generation a.a.s. Furthermore, it is shown the aforementioned threshold property applies also to Moore neighborhood by replacing 
 
 with 
 
.

Remark 3.6

As we know, in the case of the majority model, there is no difference between white and black in the sense of updating rule; then, in this section we simply write a robust (eternal) set when a statement is true for both a b-robust (b-eternal) set and a w-robust (w-eternal) set. Furthermore without loss of generality, we also assume that 
.

In the torus 
 with von Neumann neighborhood (Moore neighborhood) there is a robust set of size 4 (resp. 12) as shown in Fig. 3 (assume n is large enough, say  () in the case of von Neumann (Moore) neighborhood). Actually, in the proof of Theorem 3.10 (resp. Theorem 3.11), we show that in the torus 
 with von Neumann (Moore) neighborhood if in a generation g, there are at most 3 (resp. 11) black vertices, the process reaches a w-monochromatic generation in constant number of steps; therefore, the size of the smallest eternal set in the case of von Neumann and Moore neighborhood is 4 and 12, respectively. As we will discuss, the size of the smallest eternal set plays a critical role in the threshold behavior of majority cellular automaton.

Fig. 3
Download : Download high-res image (27KB)
Download : Download full-size image
Fig. 3. The smallest eternal set in the majority model: (left) for a torus with Moore neighborhood (right) von Neumann neighborhood.

For the torus 
 with von Neumann neighborhood, a cluster is a connected subgraph by considering the same vertex set but Moore neighborhood instead of von Neumann neighborhood. Therefore, in a torus with von Neumann neighborhood, a cluster is not necessarily a connected component.

Definition 3.7 Cluster

For the torus 
 with von Neumann neighborhood, 
 (
) is the size of the largest black (white) cluster in generation 
 for .

Lemma 3.8

In the majority model on the torus 
 with von Neumann neighborhood, if 
 for a generation 
 and , then 
.

Proof

Let 
 and 
. First we prove if 
, then 
. To prove, assume 
 can result in 
, i.e. there exists a cell 
 such that 
. We show that 
 contradicts 
. We know that 
 because a black cell for staying black in 
 needs at least two black cells in its neighborhood in 
 which contradicts 
. Furthermore, 
 implies that 
, and 
 results in the existence of at least a black cluster of size 2 in 
's neighborhood in 
 which again contradicts 
.

Now, it is proved that if 
 or 3, then 
, i.e. black clusters of size 3 or smaller cannot create a black cluster of size larger than 1. It is enough to prove 
 implies 
. Assume there exists a black cluster S of size 2 in generation 
. Then, S can have two different structures which are shown in Fig. 4 (notice a torus is symmetric).

Fig. 4
Download : Download high-res image (37KB)
Download : Download full-size image
Fig. 4. Two possible structures for a cluster of size 2 in a torus.

For the first structure 
 (see Fig. 4 (left)), we have three states:

(i)
If 
, then 
 for staying black in 
 needs at least one black cell among 
 in 
 and 
 needs at least a black cell among 
 which result in 
.

(ii)
If 
 and 
 (or similarly 
 and 
), then 
 for getting black in 
 needs at least two black cells among 
 in 
, and 
 needs at least one black cell among 
 which imply 
.

(iii)
If 
, then 
 implies 
 which means 
.

For the second structure (see Fig. 4 (right)), also there are three possibilities:

(i)
If 
, then 
, for staying black in 
, needs at least two black cells among 
 in 
 which implies 
.

(ii)
If 
 and 
 (or similarly 
 and 
), then 
, for getting black in 
, needs at least three black cells among its neighbors (
) in 
 which implies 
 again.

(iii)
If 
, then 
 implies that three cells in 
 and three cells in 
 are black in 
 which mean that 
.

Therefore, 
 implies 
 which means 
 results in 
. Furthermore, we proved 
 outputs 
. Then, 
 provides 
. □

Corollary 3.9

In the torus 
 with von Neumann neighborhoods and a generation 
, if 
, then generation 
 is white monochromatic.

Theorem 3.10

In the majority model and the torus 
 with von Neumann neighborhood, 
 
 results in a white monochromatic generation in at most 2 steps, but 
 
 outputs a cycle of bichromatic generations of size one or two in 
 steps a.a.s.

Proof

First consider the case of 
 
. Let random variable X be the number of black clusters of size 4 in 
. We claim , then by Markov's inequality with the probability of , 
. Based on Corollary 3.9, 
, i.e. 
 is white monochromatic. Then, it suffices to show that . Since the number of clusters of size 4 in T is 
 (every vertex could be contained in at most a constant number of clusters of size 4), we have that
 Now, we discuss the case of 
 
. Let us define sets
 for 
 
 and 
 
 (see Fig. 3 (right)), which are 
 disjoint eternal sets. By setting 
 and  in Theorem 2.4, the majority model in this case a.a.s. reaches a cycle of bichromatic generations. Actually, by utilizing Theorem 2.9 and Corollary 2.11, we can say it reaches a cycle of bichromatic generations of size one or two in 
 steps. □

Furthermore, we know that the consensus time of the majority model on a torus 
 is at most 
. We claim that this bound is actually asymptotically tight. See Fig. 6 for some example generations for which the process needs 
 steps to end. However, we should emphasize that such generations are quite unlikely to appear when the vertices are colored randomly, which is the setting considered mainly in the present paper. It would be interesting to establish tight bounds on the expected consensus time of the majority model on 
 when we start from a random initial generation.

Fig. 6
Download : Download high-res image (66KB)
Download : Download full-size image
Fig. 6. (left) An initial generation which needs Ω(n2) steps to stabilize in von Neumann neighborhood (right) in Moore neighborhood.

Theorem 3.11

In the majority model on the torus 
 with Moore neighborhood, 
 
 results in a white monochromatic generation in a constant number of steps, but 
 
 outputs a cycle of bichromatic generations of size one or two in 
 steps a.a.s.

To prove Theorem 3.11, we first need to present Lemma 3.12, Lemma 3.13, Lemma 3.14.

Lemma 3.12

Let 
 be two arbitrary integers. Consider a torus 
 with Moore or von Neumann neighborhood and assume that each vertex is colored black independently with some probability 
. Then, a.a.s. there is a set 
 of rectangles such that

(i)
each rectangle 
 includes at most 
 black vertices

(ii)
 for each pair of rectangles 
.

Proof

For a set , let
 be the set of covering rectangles of S. Then, we define rectangle  to be the smallest covering rectangle of S if R is the smallest rectangle which covers S, that is, 
. Based on the definition, the smallest covering rectangle for a set S is not necessarily unique. Furthermore, recall that for two vertices , the distance  is the length of the shortest path between u and v in terms of the number of edges and for two rectangles 
, 
. Consider the following procedure on the torus 
 for some given coloring. Here set H includes a smallest covering rectangle for each black connected component (as we mentioned, the smallest covering rectangle for a set is not necessarily unique, but in this proof considering any smallest covering rectangle for a set works). Furthermore, for two rectangles R and 
, we let 
 denote the smallest rectangle which covers both R and 
.

We claim that if each vertex is colored black independently with probability 
, then after applying the Rectangulation Procedure to this random coloring, the output set 
 a.a.s. will our desired properties: (i) each rectangle 
 includes at most 
 black vertices (ii) 
 for each pair of rectangles 
. The former is trivially true. To prove the latter, let us make the following four observations.

(a) We claim that a.a.s. there is no black connected component of size 
 in the random coloring. Let random variable Z denote the number of black connected components of size 
. Since each vertex in 
 is of degree 4 (von Neumann neighborhood) 8 (Moore neighborhood), then there are at most 
 connected components of size 
, for some constant 
. Therefore, 
. Markov's inequality, cf. [10], implies that  a.a.s.

(b) Let rectangle R of size 
 be equal to 
 for two rectangles 
 and 
 respectively of size 
 and 
, then we have 
 for  because 
.

(c) Assume that a rectangle 
 is in 
 at some iteration during the Rectangulation Procedure, then it contains at least 
 black vertices. Intuitively, this should be obvious since in each iteration we combine two rectangles whose distance is at most 
. For a formal proof, let us first show that for any two black vertices  in a rectangle R in 
, there is a semi-connected path between v and u along the black vertices in R. (Let 
 be the 
-th power of graph G, where two vertices are adjacent if their distance in G is at most 
. Then, we say there is a semi-connected path between v and u in G if there is a path between them in 
.) We apply proof by induction; initially, this is trivially true since each rectangle includes a black connected component. Assume in some iteration of the procedure we combine 
 and 
 because there is vertex 
 in 
 and vertex 
 in 
 such that 
. In the new rectangle 
, every two black vertices originally from 
 (similarly from 
) are semi-connected by the induction hypothesis. Two black vertices v and u respectively from 
 and 
 are also semi-connected along a semi-connected path from v to 
, from 
 to 
, and finally from 
 to u. This complete our inductive proof. Now without loss of generality, assume that 
. Since 
 is the smallest rectangle, there is a black vertex whose first coordinate is i and a black vertex whose first coordinate is 
. Consider the semi-connected path between these two vertices which clearly includes at least 
 black vertices.

(d) Assume that 
. We claim that in the random coloring a.a.s. there is no rectangle R of size 
 which includes at least 
 black vertices and 
. Let random variable X denote the number of squares of size 
 (squares 
 for ) in the torus 
 which include more than 
 black vertices in the random coloring. Observe that to prove our claim it suffices to show that  a.a.s. (This is because if there is a rectangle of size 
 which includes at least 
 black vertices and 
, then .) We have that
 
 
 
 
 
  where we used 
 and the fact that 
 is a constant. Since we have , then Markov's inequality implies that a.a.s. .

Based on (a) we know that all sides of a rectangle in H are of size at most 
 a.a.s. Putting this fact in parallel with (b), we conclude if the process does not terminate while all sides of any rectangle in 
 are smaller than or equal to 
, then it has to generate a rectangle 
 of size 
 such that 
 and there exists 
 such that 
. Based on (d), 
 must include at least 
 black vertices; however, based on (d) such an 
 does not exist a.a.s. Therefore, a.a.s. the process terminates while each side of any rectangle in 
 is of size at most 
. By applying (d) another time, none of these rectangles includes 
 or more black vertices a.a.s. Therefore, at the end of the procedure, each rectangle in 
 includes at most 
 black vertices. □

Lemma 3.13

In the majority model on the torus 
 with Moore neighborhood, if 
 for two arbitrary vertices , then 
, where 
.

Proof

This is true because as we know, vertex v (analogously vertex u) needs at least 5 black cells in 
 (resp. 
) in 
 to become black in 
, and the number of cells which they can share is . □

Lemma 3.14

In the majority model on the torus 
 with Moore neighborhood, if initially there are at most 11 black vertices, the process reaches a white monochromatic generation after a constant number of steps.

Note that Lemma 3.14 implies that the minimum size of an eternal set in the majority model on a torus 
 with Moore neighborhood is at least 12.
Proof

We prove i black cells are reduced to at most  black cells in one or two steps for , and i black cells disappear in one step for . Therefore, 11 black cells disappear in a constant number of steps.

Let S and 
 be the set of black cells in generations 
 and 
, respectively. Furthermore, assume that  and 
. Firstly,  black cells will disappear in one step for  because 
 for a cell  implies that 
.

We claim that  black cells can create at most 2 black cells in the next generation. Assume that 
, that is, there are at least 3 black cells in 
. Regardless of the placement of these cells,  for two cells  among them. Then, Lemma 3.13 implies that . Thus, 5 black cells can create at most 2 black cells.

6 black cells can create at most 4 black cells in the next step. Assume they can create more then 4 black cells, i.e. 
. Let rectangle 
 of size 
 be a smallest rectangle which covers all vertices in 
. (Please see the beginning of the proof of Lemma 3.12 for a formal definition.) Then, we have 
 or 
 because it contains at least 5 black cells. Without loss of generality assume that 
, then there exist 
 such that  (for instance, consider the leftmost and rightmost cells in 
) which implies  because of Lemma 3.13.

We show that 7 black cells can create at most 6 black cells in the next step. Again, we use the same idea; assume set S with 7 black cells can create 
 black cells such that 
, then there are two possibilities. First, if 
 or 
 in 
 of size 
 (the smallest covering rectangle of 
), then there exist two cells 
 such that  (for instance, the leftmost (high-most) and the rightmost (low-most) cells in 
 in the case of 
 (resp. 
)) which results in  by Lemma 3.13. Otherwise, 
; in this case by considering Fig. 7 as 
, if 
 (or similarly 
), then  by Lemma 3.13 because we have 
. If 
 and 
, then 
 must contain exactly one cell of set 
 and one cell of set 
 because 
. Without loss of generality, assume 
. Again, 
 which results in  by Lemma 3.13.

Fig. 7
Download : Download high-res image (13KB)
Download : Download full-size image
Fig. 7. R′ in the case of l1 = l2 = 3.

We show that  cannot result in 
. For the case of 
 or 
 with the same argument for 7 black cells (see the previous paragraph) we can conclude that . Furthermore, if 
, based on 
, 
 or 
 (see Fig. 7). Since 
 and 
,  by Lemma 3.13.

Now, we prove if there are 9 black cells (i.e., ), in one step or at most two steps there exist at most 8 black cells. If 
 or 
, with the aforementioned argument for the cases of 7 and 8 black cells, we have . Otherwise, 
 and 
; in this case, the number of black cells in the second step is 5 because all cells in the corners (
, and 
: see Fig. 7) become white.

We claim that 10 black cells also cannot create more than 9 black cells in the next step or at most two next steps. Assume a set S of 10 black cells creates a set 
 of more than 9 black cells in the next step and 
 of size 
 is the smallest rectangle which covers 
. If 
 (or similarly 
), then there exist a cell v in 
 and the leftmost column of 
 and a cell u in 
 and the rightmost column of 
. Since , we need at least 5 black cells in 
 and 5 black cells in 
. There is a column(s) between these two disjoint black sets. Therefore, the black cells which are made by these 10 black cells are created by only black cells in one of these two disjoint black sets or are created in the boundary of two vertices  which is defined as 
. We know a black set of size 5 can create a black set of size at most 2 and . Therefore, these 10 black cells create at most 9 black cells which means for 
, we need at least another cell in S which means . If 
 and 
, then 
 or 
 and 
 (similarly 
 and 
). If 
 and 
 (similarly 
 and 
), one can easily check, even a completely black square of size  creates only 8 black cells one step later. The case of 
 could be checked by a simple computer program.

Finally, we prove 11 black cells cannot create more than 10 black cells in the next two steps. Assume a set S of 11 black cells create a set 
 of more than 10 black cells and rectangle 
 of size 
 is the smallest rectangle which covers 
. If 
 (or similarly 
), then there exist a cell v in 
 and the leftmost column of 
 and a cell u in 
 and the rightmost column of 
. Since , we need at least 5 black cells in 
 and 5 black cells in 
. There are at least two columns between these two disjoint black sets, which are called the boundary columns. Now, there are two possibilities for the remaining black cell q. If it is not in the boundary columns, then we will have two independent black sets of size 6 and 5 which can create at most 4 and 2 black cells in the next generation, respectively. In the case that q is in the boundary columns, no black cell will exist in the boundary columns in the next generation because each vertex in the boundary columns has at most three black neighbors in 
 without considering q. Furthermore, q is in the neighborhood of at most one of the aforementioned disjoint black sets because as we said there are at least two columns in the boundary. If q is in the neighborhood of one of the two disjoint black sets, it is in the neighborhood of at most three cells in that set because the first and second black sets are subsets of 
 and 
 (square-shape), respectively. Therefore, each of the disjoint black sets can make at most 2 black cells in the next generation and q can contribute to at most three other black cells which provides the upper bound of 7 on the number of black cells which could be created in this case. The cases of 
 and 
 (or similarly 
) could be checked by a simple computer program. (Note that all cases cannot be checked by a computer program since there are too many possibilities. Thus, one first needs to get rid of the cases with a larger covering rectangle and then we can check the smaller cases using a computer program. That is what we essentially did here.) If 
 and 
, one can easily check, even a completely black square of size  creates only 8 black cells one step later. □

Proof of Theorem 3.11

First, we prove that 
 
 outputs a white monochromatic generation in a constant number of steps a.a.s. Consider Lemma 3.12 for 
 and 
. It implies that a.a.s. for the initial generation 
 there is a set 
 of rectangles such that: (i) each rectangle 
 includes at most 11 black vertices (ii) 
 for each pair of rectangles 
.

All vertices which are not in the rectangles of 
 are white and remain white forever. This is true because a vertex which is not in the rectangles is adjacent to at most one rectangle (otherwise the aforementioned distance property will be violated), which implies that at most three of its eight neighbors are black. Therefore, only vertices in the rectangles can switch their color. Note that in each of these isolated rectangles, there are at most 11 black vertices, and all of these black vertices disappear in a constant number of steps based on Lemma 3.14. Therefore, if 
 
, the process reaches a white monochromatic generation after a constant number of steps a.a.s.

Now, we focus on the case of 
 
. Similar to the proof of Theorem 3.10, consider 
 for 
 
 and 
 
 (see Fig. 3 (left)) as 
 disjoint robust sets of size 12. By applying Theorem 2.4 for  and 
 
, we can conclude that the process reaches a cycle of bichromatic generations a.a.s. Actually, by utilizing Theorem 2.9 and Corollary 2.11, we can say it reaches a cycle of bichromatic generations of size one or two in 
 steps. □

3.3. Majority model: bounded symmetric neighborhood
In this section, our goal is to argue that our proof techniques from the previous section can be used to prove a similar threshold behavior in a much more general setting. So far we considered a torus 
, where the edge set is defined by von Neumann and Moore neighborhood. Let us introduce a more general neighborhood model.

Definition 3.15 Bounded Symmetric Neighborhood

Consider an integer . The torus 
 with a t-bounded symmetric neighborhood is the graph whose vertex set is equal to  and its edge set has the following two properties

(i)
t-boundedness: if 
, then 
 with respect to von Neumann neighborhood

(ii)
symmetry: if 
 for some  and 
, then 
.

Consider an initial coloring of a graph G, where each vertex is black or white. Then, in each discrete-time step all vertices simultaneously update their color based on the number of black and white vertices in their neighborhood in a deterministic fashion. We say a model  is white-preserving whenever the following holds: if a vertex is white and at least half of its neighbors are also white, it does not change its color. In particular, we know that the majority model is a white-preserving model. We can define a black-preserving model analogously. Furthermore, note that the concept of a b-eternal set (analogously w-eternal set), given in Definition 2.1, can be generalized to capture any model.
Theorem 3.16

Consider a white-preserving model  on a torus 
 with a t-bounded symmetric neighborhood and assume the minimum size of a b-eternal set is s, where t and s are fixed positive integers. Suppose that each vertex is colored black independently with some probability 
.

(i)
If 
 
, then the process reaches a white monochromatic generation a.a.s.

(ii)
If 
 
, then black color survives forever a.a.s.

Proof Sketch.
(i)
Let us apply Lemma 3.12 for 
 and 
. We observe that if the distance between two rectangles R and 
 in a torus 
 is at least 3t with respect to von Neumann neighborhood, then 
 with respect to a t-bounded neighborhood. Therefore, Lemma 3.12 implies that a.a.s. there is a set 
 of rectangles such that each rectangle 
 has at most  black vertices and 
 for each pair of rectangles 
.

All vertices which are not in the rectangles of 
 are white and remain white forever. To see the correctness of this statement, consider an arbitrary vertex v which is not in the rectangles of 
. Firstly, v is adjacent to at most one rectangle R because otherwise our distance property is violated. Moreover due to the symmetry of the neighborhood structure, corresponding to each neighbor in R, vertex v has a neighbor which is not in R (and thus is white). Therefore, each vertex v which is not in the rectangles of 
 is white and at least half of its neighbors are white. These vertices will remain white forever since  is a white-preserving model. Hence, only the vertices in the rectangles can switch their color. Note that in each of these isolated rectangles, there are at most  black vertices, and all of these black vertices disappear eventually since the minimum size of a b-eternal set is equal to s. Overall, we can conclude that a.a.s. all vertices will be colored white eventually.

(ii)
Consider a b-eternal set S of minimum possible size, that is, . Let rectangle R of size 
 be a smallest rectangle which covers all vertices in S. We claim that 
. Let us prove that 
; the proof of 
 is analogous. Assume that 
, then we can find two rectangles 
 such that 
, 
, 
, and they cover all vertices in S. Suppose that initially only vertices in S are black. As we argued in part (i), in such case all vertices not in 
 remain white forever. Thus, actually the color of vertices in 
 has no influence on the color of vertices in 
 and the other way around. Furthermore, since S is a b-eternal set, there must be at least one black vertex in 
 or 
 all during the process. Without loss of generality, assume that there is at least one black vertex in 
 during the process. Therefore, we actually have a b-eternal set of size 
, which is a contradiction. (Note that 
 because 
).

We observe that there are 
 disjoint rectangles of size  in 
, for some , and we know each of them includes a b-eternal set of size s. Therefore, if 
, then the probability that none of these 
 is not fully black is at most
 where we used  for any z. Therefore, if 
, then a.a.s. there is a black eternal set in the initial generation, which guarantees the survival of black color.  □

It is straightforward to see if we switch black and white in Theorem 3.16 (in particular, if we instead use “black-preserving”, “w-eternal set”, and “
”), it still holds.

Majority model  Let us consider the majority model on a torus 
 with von Neumann neighborhood. Note that the majority model is a white-preserving model and we know that in this setting, the minimum size of a b-eternal set is equal to 4. Therefore, Theorem 3.16 implies that if 
, then a.a.s. the process reaches a white monochromatic generation and it does not if 
. Applying Theorem 3.16 for black color instead of white color implies that if 
, then white color survives a.a.s. and it does not if 
. Therefore, Theorem 3.10 is basically a corollary of Theorem 3.16. One can analogously derive Theorem 3.11 from this theorem.

Monotone models  Let us say a model  is white-monotone if a white vertex remains white forever. Any white-monotone model is obviously white-preserving. Therefore, Theorem 3.16 is particularly correct for white-monotone models. Notice that we cannot use the black-preserving variant of Theorem 3.16 in this setting to determine the second threshold value since a white-monotone model is not necessarily black-preserving. However, it is very straightforward to determine this threshold value since this is just the threshold for the existence of at least one white vertex. (Note that white color survives if there is at least one white vertex and it does not otherwise.) This threshold is 
 because if 
, there is at least one white vertex initially and there is no white vertex if 
 a.a.s.

Minimum size of an eternal set  We should emphasize even though Theorem 3.16 covers a large class of models, to determine the exact value of threshold, one needs to compute the value of s. As we observed in the case of majority model and Moore neighborhood, computing s can be a quite challenging task.

Higher dimension  So far we focused on a 2-dimensional torus. However, we believe that our proof techniques can be used to prove similar threshold behavior on a d-dimensional torus for any constant . The d-dimensional torus 
 with von Neumann neighborhood is the graph with the vertex set 
 and the edge set 
. (We can naturally consider other neighborhood structures such as Moore.) We observe that 
 is a 2d-regular graph on 
 vertices. Let us define the hyper-rectangle 
 of size 
 to be the vertex set 
.

We believe that by essentially utilizing the more general concept of a hyper-rectangle instead of rectangle and some minor modifications of our proof techniques, we can prove that: In the majority model on a torus 
 with von Neumann neighborhood if 
 then the process reaches a white monochromatic generation and if 
 then both colors survive forever, where s denotes the minimum size of an eternal set. (A similar statement should hold for any t-bounded symmetric neighborhood structure.) It is straightforward to see that a hyper-rectangle of size  is an eternal set. Thus, 
. We believe that this is best possible, that is, 
.

3.4. Biased majority model: von Neumann neighborhood
In this section, we prove that biased majority cellular automata with von Neumann neighborhood show two phase transitions; more accurately, we prove there are two threshold values 
 so that 
, 
, and 
 result in a white monochromatic generation, stable coexistence of both colors, and a black monochromatic generation, respectively. The threshold values depend on the size of the smallest b-eternal and w-eternal sets because they play a critical role in the final status of the process. The proof of the first phase transition is built on the existence or non-existence of a black eternal set in the initial generation, but for the second phase transition, we need a more complicated argument and we also exploit prior results by Schonmann [32].

The most interesting point is that alternating the tie-breaking rule changes the model's behavior substantially. In the case of majority cellular automata, the initial density of black color must be very close to 1 to guarantee final complete occupancy by black a.a.s., but in the case of biased majority cellular automata, even initial density very close to zero can result in a black monochromatic generation. More precisely, in majority case with von Neumann neighborhood, only 
 (which implies 
 is almost one for large n) results in final complete occupancy by black a.a.s. while in the biased case, 
 outputs a fully black generation a.a.s. It seems that the intuition behind this drastic change is the significant change in the size of the smallest w-eternal set. Roughly speaking, by changing the tie-breaking rule from conservative to biased, the size of the smallest w-eternal set switches from a small constant to linear size3 in terms of n in a torus 
 while the size of the smallest b-eternal set reduces to a smaller constant.

To prove biased majority cellular automaton with von Neumann neighborhood shows a threshold behavior with two phase transitions, we need some results form previous sections (such as Corollary 2.9, Corollary 2.11, and Theorem 2.4) and also the following theorem (Theorem 3.17) which was proved by Schonmann [32] and also Lemma 3.18.

Theorem 3.17

Schonmann [32]
In the biased majority model on a torus 
 with von Neumann neighborhood, 
 results in final complete occupancy by black color a.a.s.

Lemma 3.18

In the biased majority model on the torus 
 with von Neumann neighborhood, if 
, then there is no black connected component of size  in 
 a.a.s.

Proof

First, we prove that the number of connected components of size  which include a fixed vertex v is at most 
; since there are 
 vertices in the torus 
, the number of connected components of size  is bounded by 
. Every connected component of size  which includes vertex v has a spanning tree of size , rooted at v; in turn, each tree rooted at v identifies a unique connected component in the torus 
. Thus, the number of trees of size  rooted at v is an upper bound for the number of connected components of size  which include v. Now, each such tree can be encoded with  4-bit numbers, where each 4-bit number specifies for the vertices (in DFS order, say) which children (top, right, down, left) are present.

Furthermore, the probability that a connected component S of size  is black in generation 
 is at most  
 
 because S needs at least  black vertices in 
 in 
. That is true because each black vertex in 
 can create at most 5 black vertices in 
 (very generously) and only the color of vertices in 
 in generation 
 impact the color of vertices in set S. Notice that 
.

Let random variable Z denote the number of black connected components of size  in 
. Now, by using Stirling's approximation, which asserts that  
 
 for , (cf. [31]) and 
, we have
 
 which implies that a.a.s. there is no black connected component of size  in 
 by utilizing Markov's inequality. □

Theorem 3.19

The biased majority model on the torus 
 with von Neumann neighborhood exhibits two phase transitions, that is, a.a.s.

(i)
 results in final complete occupancy by white in a constant number of steps

(ii)
for 
, the process reaches a cycle of bichromatic generations of length one or two in 
 steps

(iii)
 outputs b-monochromatic generation in 
 number of steps.

Proof

We prove parts (i), (ii), and (iii) one by one as follows.

(i)
Let random variable X denote the number of black cells in generation 
. By considering 
 and the fact that a cell needs at least two black cells in its neighborhood in 
 to be black in 
, we have
 
 By utilizing Markov's inequality, one can easily see that a.a.s.  which implies that 
 is white monochromatic.

(ii)
We will show that if 
, then both colors will survive forever a.a.s. Then based on Corollary 2.9, Corollary 2.11, the process reaches a cycle of bichromatic generations of period one or two in 
 steps.

First, we show black color survives in all upcoming generations a.a.s. One can easily see that set  (see Fig. 8) contains 
 disjoint b-eternal sets of size two in 
. Now by utilizing Theorem 2.4 and 
, one can show that a.a.s. there exists at least one black eternal set in 
 which guarantees the survival of black color.

Fig. 8
Download : Download high-res image (14KB)
Download : Download full-size image
Fig. 8. A b-eternal set in the biased majority model on Tn,n with von Neumann neighborhood.

Now, we prove that for 
 white color will never die a.a.s. Consider the black connected components in generation 
, and assume that H is the set of the smallest rectangles covering these black connected components (for a formal definition of a smallest covering rectangle, see the proof of Lemma 3.12. Furthermore as we mentioned, the smallest covering rectangle for a set is not necessarily unique, but in this proof considering any choice of smallest covering rectangle works). Now, we run Algorithm 1 (Rectangulation Procedure) by considering H as the input and 
. We claim a.a.s. the procedure terminates while each side of any rectangles in 
 is of size at most . We observe that each vertex which is not covered by the rectangles in 
 is colored white and it will remain white forever. Note that a vertex which is not in any of the rectangles, is adjacent to at most one rectangle because otherwise the above distance property is violated. This implies that for such vertex at least three of its four neighbors are not in any rectangle and thus are white. Therefore, all vertices which are not covered by the rectangles of 
 are white and remain white forever.

Algorithm 1
Download : Download high-res image (26KB)
Download : Download full-size image
Algorithm 1. Rectangulation of black cells.

Now, we prove our claim that a.a.s. the procedure terminates while each side of any rectangle in 
 is of size at most  a.a.s. Based on Lemma 3.18, we know that at the beginning of the procedure, each side of any rectangle is at most . Furthermore, we observe that if the process combines two rectangles R and 
 respectively of size 
 and 
, the new rectangle's size is not larger than 
. Hence, if the process wants to generate a rectangle with a side of size more than , then set 
 at some iteration must contain a rectangle 
 of size 
 such that 
 and 
 (or similarly 
 and 
). Furthermore, 
 contains at least 
 black cells which are mutually in distance at least two from each other because based on the combining process, 
 contains at least a black cell in every three consecutive columns (rows) intersecting 
. Without loss of generality assume 
 and let call the columns intersecting 
 from left to right consecutively 
, then if we consider a black cell in the intersection of 
 and every other triple of columns (i.e., a black cell in 
 for 
), we take at least 
 black cells which are mutually in distance at least three from each other. Now, we prove there is no such a rectangle in 
 a.a.s. which demonstrates that the algorithm terminates before reaching a rectangle of length (or width) larger than  which consequentially implies that the aforementioned claim is correct. To prove that, let random variable X denote the number of rectangles in 
 which have the aforementioned properties for 
 in generation 
. Firstly, every cell is contained in at most 
 number of rectangles of the desired size (
 and 
) which implies there are 
 such rectangles. Furthermore, the probability that a rectangle of size 
 for 
 contains 
 black cells in 
 which are mutually in distance at least two from each other is (generously) bounded by 
 
  
 
 
 because each of these black cells independently needs at least two black cells in 
 in its neighborhood to become black in 
. Finally, by considering c as a constant, we have
 
  
 
 
 Now, again by using Stirling's approximation and 
 we have
 
 
 
 
 which finishes the proof of part (ii).

(iii)
By Theorem 3.17, we know that 
 results in final complete occupancy by black a.a.s. Furthermore based on Corollary 2.11, this happens in 
 steps. □

4. Conclusion
In the present paper, we analyzed and proved some properties regarding the behavior of two very fundamental majority-based rules on a graph , especially a torus which corresponds to a cellular automaton with (biased) majority rule. First, we presented some results regarding the consensus time and periodicity of both the majority and biased majority models. Then, we introduced two basic concepts of robustness and eternalness. Building on our results about these two concepts, periodicity, and consensus time, and exploiting some other techniques like rectangulation, we showed majority and biased majority on a torus 
 (with von Neumann or Moore neighborhood) show a threshold behavior with two phase transitions. Then, we argued that our proof techniques can be applied to prove a similar threshold behavior for a larger class of models and neighborhood structures in 
, where the threshold values depend on the minimum size of a b-eternal (w-eternal) set. It would be interesting to develop novel proof techniques which allow us to determine the minimum size of an eternal set in this more general setting.

Another interesting subject which might be taken into consideration in future research is the effect of connectivity on the value of the thresholds. Intuitively speaking, it sounds there is a direct relation between connectivity and the threshold values; for instance, in the majority model on a complete graph, the threshold is almost 1/2, and a small positive deviation from 1/2 for a color is sufficient to take over the whole graph a.a.s., but in an isolated graph (which has no edge) the threshold is almost zero, and a color with a constant initial probability, even very close to one, has a small chance of final complete occupancy. For instance, in majority cellular automata by switching from von Neumann neighborhood to Moore neighborhood (doubling the number of edges) the threshold values all get bigger. We should mention that there are some related results on this topic, cf. [14], [15], for the monotone variants of our models (where a black vertex remains black forever).

At the end, we would like to introduce two other interesting variants of majority-based models which could be points of interest in future research.

Given an initial generation 
 such that for any , 
 and 
 independently of all other vertices. In the Random Majority Model for any  and , 
 is equal to the color that occurs most frequently in  in 
, and in case of a tie, v chooses among white and black uniformly at random. More formally
  The Conservative Majority Model is exactly our original majority model except that we change the neighborhood model from  to 
 which means for any  and , 
 is equal to the color that occurs most frequently in 
 in 
, and in case of a tie, v conserves its current color. More Formally
