Low-power wide area networking technology offers long-range communication, which enables new types of services. Several solutions exist; LoRaWAN is arguably the most adopted. It promises ubiquitous connectivity in outdoor IoT applications, while keeping network structures and management simple. This technology has received a lot of attention in recent months from network operators and solution providers. However, the technology has limitations that need to be clearly understood to avoid inflated expectations and disillusionment. This article provides an impartial and fair overview of the capabilities and limitations of LoRaWAN. We discuss those in the context of use cases, and list open research and development questions.

Low-power wide area networking technology offers long-range communication, which enables new types of services. Several solutions exist; LoRaWAN is arguably the most adopted. The authors provide an impartial and fair overview of the capabilities and limitations of LoRaWAN. They discuss those in the context of use cases, and list open research and development questions.
Introduction
Network operators are starting to deploy horizontal machine-to-machine (M2M) solutions to cover a wide set of large-scale verticals, using low power wide area networking (LPWAN) technologies [1], [2]. Application domains include smart city, metering, on-street lighting control, and precision agriculture. LPWAN technologies combine low data rate and robust modulation to achieve multi-kilometer communication range. This enables simple star network topologies that simplify network deployment and maintenance [3]. While the benefits of these technologies are known and are often considered as the key enablers for some applications, their limitations are still not well understood [4], [5].

In this article we aim to provide an impartial overview of the limitations of long-range wide area networking (LoRaWAN) [6], one of the most successful technologies in the LPWAN space. LoRaWAN is a network stack rooted in the LoRa physical layer. LoRaWAN features a raw maximum data rate of 27 kb/s (50 kb/s when using frequency shift keying, FSK, instead of LoRa), and claims that a single gateway can collect data from thousands of nodes deployed kilometers away. These capabilities have really resonated with some solution providers and network operators, who have created a large momentum behind LoRaWAN to the point that it is sometimes touted as the connectivity enabler for any Internet of Things (IoT) use case [7].

The goal of this article is to bring some sanity to these statements by providing a comprehensive, fair, and independent analysis of what the capabilities and limitations of LoRaWAN are. We adopt a pragmatic approach, and identify in which use cases the technology works, and in which use cases it does not work. We provide an overview of LPWAN technologies, including cellular. We describe LoRaWAN technology in detail. We analyze the network capacity and scale limitations of the technology. We discuss the use cases where LoRaWAN works/does not work. We list open research and development challenges for the technology. We then conclude the article.

Overview of LPWAN and Cellular Technologies for IoT
Low-Power Wide Area Alternatives
Although LoRaWAN is one of the most adopted technologies for IoT, there is a wide range of LPWAN technologies in the market, such as Ingenu, Weightless W, N, and P, and SigFox [8].

Ingenu developed a proprietary LPWAN technology in the 2.4 GHz band, based on random phase multiple access (RPMA) to provide M2M industry solutions and private networks. The main asset of Ingenu in comparison to alternative solutions is high data rate up to 624 kb/s in the uplink and 156 kb/s in the downlink. On the contrary, the energy consumption is higher and the range is shorter (a range around 5–6 km) due to the high spectrum band used.

The Weightless Special Interest Group developed a set of three open standards for LPWAN: Weightless-W, Weightless-N, and Weightless-P. Weightless-W was developed as a bidirectional (uplink/downlink) solution to operate in TV white spaces (470–790 MHz). It is based on narrowband frequency-division multiple access (FDMA) channels with time-division duplex between uplink and downlink; data rate ranges from 1 kb/s to 1 Mb/s, and battery lifetime is around 3–5 years. Weightless-N was designed to expand the range of Weightless-Wand reduce the power consumption (a battery lifetime up to 10 years) at the expense of data rate decrease (from up to 1 Mb/s in Weightless-W to 100 kb/s in Weightless-N). Unlike Weightless-W, Weightless-N is based on the ultra narrowband (UNB) technology and operates in the UHF 800–900 MHz band; it provides only uplink communication. Finally, Weightless-P is proposed as a high-performance two-way communication solution that can operate over 169, 433, 470, 780, 868, 915, and 923 MHz bands. However, cost of the terminals and power consumption are higher than in Weightless-N, with a battery lifetime of 3–8 years.

Together with LoRaWAN, SigFox is one of the most adopted LPWAN solutions. It is a proprietary UNB solution that operates in the 869 MHz (Europe) and 915 MHz (North America) bands. Its signal is extremely narrowband (100 Hz bandwidth). It is based on random frequency and time-division multiple access (RFTDMA) and achieves a data rate around 100 b/s in the uplink, with a maximum packet payload of 12 bytes, and a number of packets per device that cannot exceed 14 packets/day. These tough restrictions, together with a business model where SigFox owns the network, have somewhat shifted the interest to LoRaWAN, which is considered more flexible and open.

Cellular Solutions for IoT
The Third Generation Partnership Project (3GPP) standardized a set of low-cost and low-complexity devices targeting machine-type communications (MTC) in Release 13. In particular, 3GPP addresses the IoT market from a three-fold approach by standardizing the enhanced MTC (eMTC), narrowband IoT (NB-IoT), and extended coverage GSM for IoT (EC-GSM-IoT) [9].

eMTC is an evolution of the work developed in Release 12 that can reach up to 1 Mb/s in the uplink and downlink, and operates in LTE bands with a 1.08 MHz bandwidth. NB-IoT is an alternative that, thanks to reduced complexity, has a lower cost at the expense of decreasing data rate (up to 250 kb/s in both directions). Finally, EC-GSM-IoT is an evolution of evolved general packet radio service (EGPRS) toward IoT, with data rate between 70 and 240 kb/s.

Although the approaches proposed by 3GPP reduce the energy consumption and cost of the devices, they have not yet caught up to their non-3GPP counterparts. For instance, module cost for LoRaWAN and SigFox is around 2−5andforeMTCisstillaround8–12. Despite the expected broad adoption of cellular IoT solutions supported by 3GPP, LoRaWAN presents some assets that prevail against these technologies in specific market niches. Current assets are:

The number of LoRaWAN network deployments is increasing continuously, while on the other hand, few initial NB-IoT deployments have already been deployed.

LoRaWAN operates in the industrial, scientific, and medical (ISM) band, whereas cellular IoT operates in licensed bands; this fact favors the deployment of private LoRaWAN networks without the involvement of mobile operators.

LoRaWAN has backing from industry, including CISCO, IBM, and HP, among others. In the future, both technologies will probably coexist when 3GPP solutions are backed up by large volumes.

Overview of LoRaWAN
The three classes can coexist in the same network and devices can switch from one class to another. However, there is not a specific message defined by LoRaWAN to inform the gateway about the class of a device and this is up to the application.
LoRa is the physical layer used in LoRaWAN. It features low-power operation (around 10 years of battery lifetime), low data rate (27 kb/s with spreading factor 7 and 500 kHz channel or 50 kb/s with FSK) and long communication range (2–5 km in urban areas and 15 km in suburban areas). It was developed by Cycleo, a French company acquired by Semtech. LoRaWAN networks are organized in a star-of-stars topology, in which gateway nodes relay messages between end devices and a central network server. End devices send data to gateways over a single wireless hop, and gateways are connected to the network server through a non-LoRaWAN network (e.g., IP over cellular or Ethernet). Communication is bidirectional, although uplink communication from end devices to the network server is strongly favored, as explained in the following [6].

LoRaWAN defines three types of devices (Classe s A, B, and C) with different capabilities [6]. Class A devices use pure ALOHA access for the uplink. After sending a frame, a Class A device listens for a response during two downlink receive windows. Each receive window is defined by the duration, an offset time, and a data rate. Although offset time can be configured, the recommended value for each receive window is 1 s and 2 s, respectively. Downlink transmission is only allowed after a successful uplink transmission. The data rate used in the first downlink window is calculated as a function of the uplink data rate and the receive window offset. In the second window the data rate is fixed to the minimum, 0.3 kb/s. Therefore, downlink traffic cannot be transmitted until a successful uplink transmission is decoded by the gateway. The second receive window is disabled when downlink traffic is received by the end device in the first window. Class A is the class of LoRaWAN devices with the lowest power consumption. Class B devices are designed for applications with additional downlink traffic needs. These devices are synchronized using periodic beacons sent by the gateway to allow the scheduling of additional receive windows for downlink traffic without prior successful uplink transmissions. Obviously, a trade-off between downlink traffic and power consumption arises. Finally, Class C devices are always listening to the channel except when they are transmitting. Only Class A must be implemented in all end devices, and the other classes must remain compatible with Class A. In turn, Class C devices cannot implement Class B. The three classes can coexist in the same network, and devices can switch from one class to another. However, there is not a specific message defined by LoRaWAN to inform the gateway about the class of a device; this is up to the application.

The underlying PHY of the three classes is the same. Communication between end devices and gateways start with a Join procedure that can occur on multiple frequency channels (e.g., in EU863-870 ISM Band there are 3 channels of 125 kHz that must be supported by all end devices and 3 additional 125 kHz channels) by implementing pseudo-random channel hopping. Each frame is transmitted with a specific spreading factor (SF), defined as SF=log2(Rc/Rs), where Rs is the symbol rate and Rc is the chip rate. Accordingly, there is a trade-off between SF and communication range. The higher the SF (i.e., the slower the transmission), the longer the communication range. The codes used in the different SFs are orthogonal. This means that multiple frames can be exchanged in the network at the same time, as long as each one is sent with one of the six different SFs (from SF=7 to SF=12). Depending on the SF in use, LoRaWAN data rate ranges from 0.3 kb/s to 27 kb/s.

The maximum duty cycle, defined as the maximum percentage of time during which an end device can occupy a channel, is a key constraint for networks operating in unlicensed bands. Therefore, the selection of the channel must implement pseudo-random channel hopping at each transmission and be compliant with the maximum duty cycle. For instance, the duty cycle is 1 percent in EU 868 for end devices.

The LoRa physical layer uses chirp spread spectrum (CSS) modulation, a spread spectrum technique where the signal is modulated by chirp pulses (frequency varying sinusoidal pulses), hence improving resilience and robustness against interference, Doppler effect, and multipath. Packets contain a preamble (typically with 8 symbols), a header (mandatory in explicit mode), the payload (with a maximum size between 51 and 222 bytes, depending on the SF), and a cyclic redundancy check (CRC) field (with configurations that provide a coding rate from 4/5 to 4/8). Typical bandwidth (BW) values are 125, 250, and 500 kHz in the HF ISM 868 and 915 MHz band, while they are 7.8, 10.4, 15.6, 20.8, 31.2, 41.7, and 62.5 kHz in the LF 160 and 480 MHz bands. The raw data rate varies according to the SF and the BW, and ranges between 22 h/s (BW=7.8 kHz and SF=12) to 27 kb/s (BW=500 kHz and SF=7) [2]. Frequency hopping is exploited at each transmission in order to mitigate external interference [10].

Capacity and Network Size Limitations
In this section we study the LoRaWAN network scale with respect to data rate, duty cycle regulations, and so on.

Network Size Limited by Duty Cycle
Although the performance of LoRaWAN is determined by PHY/medium access control (MAC) overviewed in the previous section, the duty cycle regulations in the ISM bands [11], [12] arise as a key limiting factor. If the maximum duty cycle in a sub-band is denoted by d and the packet transmission time, known as time on air, is denoted by Ta, each device must be silent in the sub-band for a minimum off-period Ts=Ta(1/d−1). For instance, the maximum duty cycle of the EU 868 ISM band is 1 percent, and it results in a maximum transmission time of 36 s/h in each sub-band for each end device. Figure 1 shows the time on air of a packet transmission with coding rate 4/5 over a 125 kHz BW channel. It is known that large SFs allow longer communication range. However, as observed in Fig. 1, large SFs also increase the time on air and, consequently, the off-period duration. This problem is exacerbated by the fact that large SFs are used more often than small SFs. For instance, considering a simple scenario with end devices distributed uniformly within a round-shaped area centered at the gateway, and a path loss calculated with the Okumura-Hata model for urban cells [13], the probability that an end device uses an SF i, pi would be p12=0.28, p11=0.20, p10=0.14,p9=0.10, p8=0.08, and p7=0.19.


Figure 1.
Time on Air of LoRaWAN with code rate 4/5 and a 125 kHz bandwidth.

Show All

Although Listen Before Talk is not precluded in LoRaWAN, only ALOHA access is mandatory. Accordingly, the LoRaWAN capacity can be calculated roughly as the superposition of independent ALOHA-based networks (one independent network for each channel and for each SF, since simultaneous transmissions only cause a collision if they both select the same SF and channel; no capture effect is considered). However, and in contrast to pure ALOHA, a LoRaWAN device using SF i cannot exceed a transmitted packet rate given by nd/Tai, where n is the number of channels, d is the duty cycle, and Tai is the time on air with SF i.

In the simple scenario described above, if all end devices transmit packets at the maximum packet rate nd/Tai the number of packets successfully received by the gateway decreases, as shown in Fig. 2, where a network with n=3 channels is analyzed. The number of received packets drops due to the effect of collisions.


Figure 2.
Number of packets received per hour when end devices attempt transmission at nd/Tai packets/s with coding rate 4/5 and n=3 channels with 125 kHz bandwidth.

Show All

In Fig. 3 the number of packets received successfully per hour and end device is shown for deployments with {250, 500, 1000, 5000} end devices and n=3 channels. For low transmission rate values (in packets per hour), throughput is limited by collisions; for high values, the maximum duty cycle prevents end devices from increasing the packet transmission rate and stabilizes the throughput. For deployments with a “small” number of end devices, the duty cycle constraint limits the maximum throughput.

Figure 3. - Number of 10 B payload packets received per hour and node for {250, 500, 1000, 5000} end devices and $n=3$ channels as a function of packet generation.
Figure 3.
Number of 10 B payload packets received per hour and node for {250, 500, 1000, 5000} end devices and n=3 channels as a function of packet generation.

Show All

Table 1 summarizes the maximum throughput per end device and the probability of successful reception for a set of different deployments. The maximum throughput falls as the number of end devices grows.

Reliability and Densification Drain Network Capacity
In LoRaWAN, reliability is achieved through the acknowledgment of frames in the downlink. For Class A end devices, the acknowledgment can be transmitted in one of the two available receive windows; for Class B end devices, it is transmitted in one of the two receive windows or in an additional time-synchronized window; for Class C end devices, it can be transmitted at any time.

In LoRaWAN the capacity of the network is reduced not only due to transmissions in the downlink, but also due to the off-period time following those transmissions (gateways must be compliant with duty cycle regulation). Therefore, the design of the network and the applications that run on it must minimize the number of acknowledged frames to avoid the capacity drain. This side-effect calls into question the feasibility of deploying ultra-reliable services over large-scale LoRaWAN networks.

At this point of development of the technology, LoRaWAN faces deployment trends that can result in future inefficiencies. Specifically, LoRaWAN networks are being deployed following the cellular network model, that is, network operators provide connectivity as a service. This model is making gateways become base stations covering large areas. The increase in the number of end devices running applications from different vendors over the same shared infrastructure poses new challenges to coordinate the applications. In particular, each application has specific constraints in terms of reliability, maximum latency, transmission pattern, and so on. The coordination of the diverse requirements over a single shared infrastructure using an ALOHA-based access is one of the main future challenges for the technology. Therefore, fair spectrum sharing is required beyond the existing duty cycle regulations. Finally, the unplanned and uncoordinated deployment of LoRaWAN gateways in urban regions, along with the deployment of alternative LPWAN solutions (e.g., SigFox), could cause a decrease of the capacity due to collisions and the use of larger SFs (to cope with higher interference levels).

Use Cases
Several application use cases are considered in order to analyze the suitability of LoRaWAN and complement the understanding of the advantages and limitations of the technology when applied to different types of data transmission patterns, latency requirements, scale, and geographic dispersion, among others.

Real-Time Monitoring
Agriculture, leak detection, and environment control are applications with a reduced number of periodic/aperiodic messages and relaxed delay constraints. In contrast, the communication range must be long enough to cope with dispersed location of end devices. LoRaWAN has been designed to handle the traffic generated by this type of applications and meets their requirements as long as the deployment of the gateways is enough to cover all end devices.

On the other hand, industrial automation, critical infrastructure monitoring, and actuation require some sort of real-time operation. Real time is understood in general by low latency and bounded jitter, and depends on the specific application. LoRaWAN technology cannot claim to be a candidate solution for industrial automation, considering, for example, that industrial control loops may require response times around 1–100 ms and that even for small packets of 10 B, the time on air with SF=7 is around 40 ms. As presented in the previous section, due to the MAC nature of LoRaWAN, deterministic operation cannot be guaranteed despite application-specific periodicity as ALOHA access is subject to contention, which impacts network jitter. Despite that, small LoRaWAN networks can deliver proper service to applications that require, for instance, sampling data every second. To do that, two main design considerations should be taken into account:

The spreading factor should be as small as possible to limit both the time on air and the subsequent off-period. In other words, the gateway must be close enough to the end devices.

The number of channels must be carefully designed and must be enough to:

Minimize the probability of collisions (tightly coupled with the number of end-devices)

Offer quick alternative channels for nodes to retransmit collided packets, thereby diminishing the impact of the duty cycle

Table 1. Maximum throughput and probability of successful transmission for different deployments (with n=3 channels and 1 percent duty cycle).

Despite the two aforementioned aspects, latency will not be deterministic.

Metering
The LoRa Alliance is working on standard encapsulation profiles for popular M2M and metering protocols. Keeping an existing application layer allows to keep most of the firmware and ecosystem intact, facilitating migration to LPWAN. These protocols include Wireless M-Bus for water or gas metering, KNX for building automation, and ModBus for industrial automation. It is important to understand that those scenarios range from time-sensitive operation to best effort monitoring. Therefore, it is key to identify in such a diverse ecosystem what the requirements of each application are and if LoRaWAN is the appropriate technology to address them.

Smart City Applications
LoRaWAN has shown key success stories with smart lighting, smart parking, and smart waste collection thanks to their scale and the nature of the data generated by those applications. These encompass periodic messaging with certain delay tolerance. For example, smart parking applications report the status of the parking spots when a change is detected [14]. Parking events are slow; therefore, network signaling is limited to a few tens of messages per day. Analogously, smart waste collection systems and smart lighting actuate and report information in response to a measure with large variation periods. Although latency and jitter are not major issues in these applications, in some of them the triggering factor is simultaneous for a huge number of end devices. For instance, sunset and sundown trigger lighting elements around the whole city, thereby causing an avalanche of messages. LoRaWAN is an appropriate technology for this use case since it handles the wide coverage area and the significant number of users at the expense of an increasing number of collisions, latency, and jitter.

Smart Transportation and Logistics
Transportation and logistics are seen as two major pillars of the expected IoT growth over the next few years thanks to their impact on the global economy. Most applications target efficiency in areas such as public transportation and transport of goods. However, some applications are tolerant to delay, jitter, and unreliability, and others are not.

Different standards have been developed in the 5.9 GHz band for intelligent transportation systems (ITS) based on the IEEE 802.11p standard. The constraints on delay are diverse for different applications, but LoRaWAN, being an LPWAN solution, is not suitable for these applications. On the contrary, solutions such as fleet control and management can be supported by LoRaWAN. Roaming is one of the developments under definition within the LoRa Alliance to enhance mobility. Specifically, a future roaming solution is expected to support back-end to back-end secure connections, clearing and billing between operators, location of end devices (pointed out as an open research challenge below), and transparent device provisioning across networks.

Video Surveillance
The most common digital video formats for IP-based video systems are MJPEG, MPEG-4, and H.264. The bit rate recommended for IP surveillance cameras ranges from 130 kb/s with low-quality MJPEG coding to 4 Mb/s for 1920×1080 resolution and 30 fps MPEG-4/H.264 coding. Given that LoRaWAN data rate ranges from 0.3 to 50 kb/s per channel, LoRaWAN will not support these applications.

Open Research Challenges
The effect of the duty cycle stated earlier jeopardizes the actual capacity of large-scale deployments. This has been initially addressed by The Things Network [15], an interesting global, open, crowd-sourced initiative to create an IoT data network over LoRaWAN technology. The proposed solution defines an access policy, known as the TTN Fair Access Policy, that limits the time on air of each end device to a maximum of 30 s/day. This policy is simple to implement and guarantees pre-defined end-device requirements for a large-scale network (more than 1000 end devices per gateway). However, it fails to provide the network with enough flexibility to adapt to environment and network conditions (i.e. link budget of each end device, number of end devices, number of gateways, etc), as well as to applications with tight latency or capacity requirements.

At this stage, the optimization of the capacity of the LoRaWAN network, as well as the possibility to perform traffic slicing for guaranteeing specific requirements on a service basis, remain open research issues. From the authors' point of view, the research community will have to address the following open research challenges during the next years.

Explore New Channel Hopping Methods
A pseudo-random channel hopping method is natively used in LoRaWAN to distribute transmissions over the pool of available channels, thereby reducing the collision probability. However, this method cannot meet traffic requirements when there are latency, jitter, or reliability constraints (i.e., downlink acknowledgments for all packets), and it is not able to be adapted according to the noise level of each channel. The design of pre-defined and adaptive hopping sequences arises as an open research issue. From the authors' point of view, the proposed channel hopping sequences should be able to reserve a set of channels for retransmissions of critical packets, both in the uplink and in the downlink (acknowledgment). The design of feasible feedback mechanisms between gateways and end devices must be a key part of the approach in a system where uplink traffic is strongly favored.

TDMA Over LoRaWAN
The random nature of ALOHA-based access is not optimal to serve deterministic traffic, which is gaining importance in the IoT ecosystem. Building a complete or hybrid TDMA on top of LoRaWAN opens up new use cases for this technology and provides additional flexibility. The TDMA scheduler should be able to allocate resources for ALOHA-based access and schedule deterministic traffic along time and over the set of available channels. The proposed schedulers should manage the tradeoff between resources devoted to deterministic and non-deterministic traffic, meet the regional duty cycle constraints, and guarantee fairness with coexisting LoRaWAN networks.

Geolocation of End Devices
The location of end devices is a mandatory requirement for specific use cases, particularly in Industry 4.0. However, GPS-based solutions are not feasible due to cost, and CPU and energy consumption. Currently, interesting works have been initiated to develop time difference of arrival (TDOA)-based triangulation techniques for LoRaWAN. It has been shown that this approach benefits from large SFs and dense gateway deployments.

Cognitive Radio
As pointed out earlier, regulation in ISM bands concerning maximum duty cycle has a significant impact on the capacity of the network. One of the most promising future directions could be the inclusion of cognitive radio in the LoRaWAN standard. In contrast to Weightless-W, LoRaWAN has not been designed to operate in TV white spaces. In the future, the inclusion of cognitive radio in the LoRaWAN standard would be subject to a significant reduction of the energy consumption associated with cognitive radio techniques.

Power Reduction for Multihop Solutions
It is essential to devise coordination mechanisms between gateways from the same or different operators to limit interference and collisions. The coexistence mechanisms encompass coordination and reconfiguration protocols for gateways and end devices.
LoRaWAN is organized with a single-hop star topology for simplicity. As discussed earlier, the impact of high SFs on the capacity of the network is two-fold, since it increases both the time on air and the off period. A two-hop strategy for LoRaWAN networks should be investigated to figure out its potential. Proposals in this direction should consider the reduction of transmitted power and the decrease of the SFs. On the other hand, negative effects such as complexity, synchronization, and increasing power consumption of relays should also be analyzed to thoroughly characterize the trade-off.

Densification of LoRaWAN Networks
The proliferation of LPWAN technologies, and particularly LoRaWAN, poses coexistence challenges as the deployment of gateways populate urban areas. Given the random-based access in unlicensed bands of LoRaWAN and its inherent unplanned deployment, the performance achieved in isolated networks is put into question in scenarios with coexisting gateways and limited number of available channels. It is essential to devise coordination mechanisms between gateways from the same or different operators to limit interference and collisions. The coexistence mechanisms encompass coordination and reconfiguration protocols for gateways and end devices.

Conclusions
This article is aimed at clarifying the scope of LoRaWAN by exploring the limits of the technology, matching them to application use cases, and stating the open research challenges. In the low-power M2M fragmented connectivity space there is not a single solution for all the possible connectivity needs, and LoRaWAN is not an exception. A LoRaWAN gateway, covering a range of tens of kilometers and able to serve up to thousands of end devices, must be carefully dimensioned to meet the requirements of each use case. Thus, the combination of the number of end devices, the selected SFs, and the number of channels will determine if the LoRaWAN ALOHA-based access and the maximum duty cycle regulation fit each use case. For instance, we have seen that deterministic monitoring and realtime operation cannot be guaranteed with the current LoRaWAN state of the art.