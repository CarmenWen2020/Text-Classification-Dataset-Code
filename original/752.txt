Abstract
Multi/Many-core systems based on the traditional electrical network-on-chip are confronted with the limited bandwidth, high latency, and reliability challenges. The emerging optical solution of silicon photonics has promised to improve the design parameters of electrical interconnections for future multiprocessor system on chips. Although the optical network-on-chip has advantages in terms of reliability compared to the electrical ones, important phenomena such as crosstalk noise, process variation, and temperature fluctuations must be carefully considered. These physical challenges have substantial adverse effects on the correct functionality of on-chip optical devices such as microring resonator and the optical waveguide. Malfunction of these elements may cause the injection of faults that should be tolerated by the reliable system. In this paper, we have assessed the effect of the fault-tolerant design of optical routers on the reliability parameters through application mapping. We propose a fault-tolerant algorithm to modify optical routers to improve the reliability parameter. The vulnerability analysis of the proposed algorithm shows that besides obtaining the fault-tolerant capability in optical routers, only about 9.63% and 19.29% of SNR decrease for real-world applications and seven traditional optical routers are achieved in the case of a single fault and two faults injections, respectively.

Previous
Next 
Keywords
Fault-tolerant

Optical network on chip

Mesh topology

Application mapping

Vulnerability assessment

1. Introduction
By entering the deep sub-micron era, the electrical interconnect confronts critical issues such as latency and power consumption due to the lack of high scalability compared to transistors [6], [11]. Some interesting and promising features of silicon photonics such as ultra-high bandwidth, low propagation delay, and distance transparent power consumption have motivated researchers to focus on the Optical Network-on-Chip (ONoC) [1], [32]. Although the most recent works on the field of ONoC have been concentrated on the architecture of on-chip optical networks that operate reliably, some fundamental challenges in CMOS integration and fabrication exist on the design of robust and reliable ONoC [35].

Fault-tolerant system design is so crucial in some cases when it should uninterruptedly continue its natural function after a fault occurrence. Avionics is one of the most critical applications of fault tolerance infrastructure. In the optical domain, the active components such as Microring Resonators (MR) and routers are highly susceptible to all kinds of failure sources compared to passive elements, e.g. waveguide [39]. Most notable challenges in silicon photonic devices which threaten the reliability of ONoC are: thermal variation (TV), process variation (PV), and aging. A specified amount of variation on the working temperature may be caused to change the sensitized wavelength of an MR. As stated in [49], a change of about 1 °C will shift the resonance wavelength of an MR by about 1 nm. PV is another source of variation which originates from the difference between theoretical and fabricated physical dimensions such as the width of waveguide, the thickness of wafer, the radius of MR, etc. This type of variation may also affect the resonant wavelength of an MR, which leads to data loss and bandwidth limitation. On the other hand, the silicon-based components wear down over time, which is referred to the aging phenomenon.

Several researchers have investigated the reliability challenges of ONoC. Meyer et al. [39], [40] proposed a fault-tolerant three-dimensional optical router (called FTTDOR), which used redundant MRs in critical locations. Xiang et al. [58] proposed a novel deadlock-free fault-tolerant routing algorithm without any need of additional virtual channels to improve the reliability of ONoC. Guo et al. [27] also claimed that their node reuse fault-tolerant algorithm (a.k.a NRFTA) can find the best path in each optical router through detouring around the faulty node instead of rerouting the path. Bakhtiar et al. [8] tried to reduce the probability of thermal variation-based faults of ONoC by using redundant MRs, which are sensitized in different thermal variations. Li et al. [35] presented a system-level model for the effects of thermal and process variations in ONoC. They also recommended run-time methods to optimize the performance and reliability parameters of many-core platforms targeting the thermal and process variation effects. On the other hand, some research papers have investigated the efficiency of their proposed optical architecture or algorithm through task mapping with consideration of reliability issues. Guo et al. [26] proposed a task mapping approach based-on genetic algorithm with improved simulated annealing strategy in terms of Signal-to-Noise Ratio (SNR) and thermal variation of ONoC. Fusella et al. [20], [21] has focused on the crosstalk parameter of ONoC, which has an impressive effect on the SNR parameter of an optical signal. The authors proposed an application-driven task mapping upon a mesh-based photonic NoC to minimize the worst-case crosstalk through various mapping strategies.

In this paper, first, we propose a heuristic algorithm to obtain a fault-tolerant optical router from its basic architecture along with adding redundant MRs. Then, some of the most well-known optical routers for mesh and torus topologies are modified through the proposed method to increase the probability of fault-tolerance of optical routers. Finally, the quantitative reliability parameters of these fault-tolerant architectures are compared through some optimized task mapping approaches. The contributions of our paper are as follows:

•
Proposing a general framework to construct a fault-tolerant optical router from a traditional basic one by adding redundant MRs and extra paths based on a heuristic algorithm along with the optimized application mapping.

•
Evaluating the reliability parameters of various well-known optical routers versus the modified fault-tolerant equivalent ones through optimized application mapping strategies.

•
Vulnerability analysis in the case of fault injection for the proposed fault-tolerant optical router algorithm.

The rest of this paper is organized as follows: Section 2 discusses some of the most important related work. Section 3 explains the primitives of optical on-chip data transmission and its reliability challenges and also the motivation of our work. Section 4 is about the proposed method, which adds the fault tolerance capability to the traditional optical routers. In Section 5, the applied mapping strategy is explained. Section 6 covers the simulation environment and parameters, which provides the experimental results and analysis. Finally, Section 7 concludes the paper.

2. Related work
In recent years, many researchers have worked on different aspects of CMOS integration of silicon photonics and its characteristics. The previous works which are closely related to our proposed idea can be categorized considering three aspects. In the first subsection, the architecture which are applied in previous works can be considered as hybrid opto-electrical and also all-optical solutions. The second category is devoted to the works which deal with the reliability challenges of silicon photonics. Eventually, under the third category, papers explore the effects of different mapping strategies on the system level parameters of performance and reliability of ONoC.

2.1. ONoC architectures
The various proposed photonic on-chip networks are classified by Bergman et al. [10] through a combination of three routing domains, which are time, wavelength, and space. In time-domain category, the transmission of optical messages is scheduled in a way that there is no interference with each other [57]. In the wavelength-domain category, the wavelength division multiplexing (WDM) technique makes it possible to transmit multiple optical signals with different wavelengths simultaneously in a single optical waveguide. The routing mechanism in this category is based on an array of MRs (as modulator, filters, and detectors), which are sensitized to different wavelengths, so that each set of them can route a specific wavelength to appropriate destinations. The flow control of these networks is also accomplished in two ways. Some of these networks have a lightweight electrical control network for destination checking (called opto-electrical network) [31]. In the other networks of this category (called all-optical on-chip networks), the electrical control network is basically eliminated, and the flow control process is done through an optical control network as well. [1], [3], [17], [29], [30]. The third domain is related to the spatial-domain where separate waveguides are applied for routing diversity. In this type of network, a control network is responsible for setting up an optical path by turning ON or OFF the MRs, which are usually sensitized to a specific wavelength. A photonic network transmits the optical data after preparing the path similar to the circuit-switching fashion in ENoC. In the literature there are several attempts to design a network in this domain. It is noteworthy to say that some research works in this category have both electrical and optical data network such that local data transmissions  [2], [5], [22], [28] or lightweight traffics [25] are accomplished by the electrical data network layer, while the global data transmissions or heavyweight traffics are carried by the photonic data network layer.

Although several attempts have been made to discover the effect of various architectures in the aforementioned routing domains, the other network parameters such as network topology, routing algorithm, flow control mechanism, wavelength assignment strategy, etc. have significant effects on the performance of these proposed designs which were investigated by the authors. In recent years, various topologies such as Ring, Mesh, Torus, Fat-Tree, Butterfly, Honeycomb, Spidergon, Hypercube, Cube-Connected Cycles, Clos, Benes, Omega, and also lots of novel topologies have been investigated by the researchers [57]. Mesh and Torus, as the most popular topologies, have several advantages such as regularity and scalability due to their planar layout, high-connectivity, high bisection width, and low diameter. In this paper, although the proposed method is general, and can be applied to various network designs, only the state-of-the-art designs based on Mesh and Torus topologies are selected in order to have fairness in comparisons. Hence, to have equal conditions, and to be more accurate, we have applied our proposed fault-tolerant mechanism to only Mesh and Torus based designs with almost identical network parameters of the spatial-domain, network size, routing algorithm, and the same task mapping strategy and application.

2.2. Reliability challenges on ONoC
Some papers have addressed the reliability challenges of ONoC. Since there are various parameters threatening the system reliability, each of them has only paid attention to one or some of these concerns in their work.

Thermal variation has a considerable effect on the resonant wavelength of an MR, which can severely endanger the reliability of on-chip communication. Li et al. [34] analyzed the consequences of thermal variation on the reliability of on-chip optical data transmission through temperature profiling. They also discussed the relations of temperature fluctuation, power consumption, and reliability of communication in ONoC. To compensate for the thermal impacts on MR’s wavelength drift, the authors of [14] proposed a novel approach, which added a tunable wavelength converter (TWC) in an optical router of mesh topology. They believe that the two previous approaches, namely bias voltage tuning, and local heating, have some limitations such as a very limited range of tuning voltage for the former, and great power dissipation for the latter method. In [36], a quantitative study is done on the formal relationship between the temperature of an MR, and its resonance wavelength, and optical insertion loss. “Therma” is a dynamic method proposed by [9] for minimizing temperature fluctuation of nanophotonic networks through run-time task migration. Abellán et al. [4] proposed a novel thread allocation, and migration strategy called “FreqAlign” which reduces the thermal tuning power of ONoC through an adaptive frequency tuning. Meyer et al. [41] proposed a thermal-aware fault-resilient hybrid opto-electrical on-chip network called “SAFT-PHENIC”. A mesh-based fault-aware routing algorithm was proposed in this paper which intends to decrease the thermal variation across the chip using a traffic-aware strategy to distribute the workload and avoid using specific nodes. Tinati et al. [55] investigated the effect of on-chip thermal variation based on the power distribution of task execution. They also proposed “RONoC” architecture as a low-power thermal-resilient ONoC, which mitigates routing faults.

Process variation is the second significant challenge that can cause malfunction of nanophotonic devices or unreliable on-chip data transmission. PV originates from fabrication errors of critical physical dimensions caused by lithography imperfection, and etch non-uniformity of optical devices [15]. An integer linear programming (ILP) problem called “MinTrim” tried to solve the challenge of wavelength drifting of MRs due to PV through proper arrangement among MRs, and wavelengths with a minimum power requirement [59]. Another technique that was applied by [56], assigns wavelength to the nodes of an ONoC, somehow a subset of wavelengths (called bubbles) have been intentionally unused. In this way, not only the reliability of the whole system is preserved due to stand out against the adverse effects of PV, but also the designer can dynamically borrow these unallocated wavelengths to improve the channel utilization. The authors of [60] proposed a novel method (a.k.a “BandArb”) that dynamically re-assigns the resonant wavelengths of MRs in each node of the network to tackle both types of PV and TV to maximize bandwidth utilization and maintain reliability. The authors of [16] paid attention to two crucial factors that simultaneously affect the SNR parameter of ONoC. On one side, they considered dense wavelength division multiplexing (DWDM) that increases the probability of inter-modulation effects, which leads to SNR decrease. On the other hand, the PV effects through variations of width, and thickness of MRs as resonance wavelength shifts, and decrease of SNR were considered as well.

Some research papers are related to system-level fault-tolerant techniques in ONoC. Meyer et al. [39] proposed a fault-tolerant three-dimensional ONoC with minimal redundant MRs just in critical locations, and without extra ones in direct paths. The authors of [58] also leveraged a fully adaptive deadlock-free routing rule called “Minus-First” based-on Valiant’s algorithm, which does not require additional VCs. Peano et al. [50] proposed a formal method through an ILP formulation to select the parameters of wavelength-routed optical NoC aiming to avoid routing faults, and maximize the levels of connectivity of bit parallelism.

In most of the previous works which have targeted the reliability of the ONoC, several techniques at different levels of design such as device-level, architecture-level, and application-level have been proposed to prevent fault occurrence, and to increase reliability. There are few works like [39], [40] that have discussed the fault-tolerance system design in ONoC. We have also focused on the ONoC reliability by proposing a fault-tolerant mechanism, which increases the reliability parameter of the network through hardware redundancy, and decreases the probability of optical communication failure. In comparison with [39], [40], where a fault-tolerant optical router, and fault-tolerant routing are proposed, we have discussed a general platform which can generate an optical router from its baseline optical router. We also have analyzed the vulnerability factors of the optical routers.

2.3. Application mapping on ONoC
In recent years, the approach of application (task) mapping upon the various types of NoCs with different challenges has become one of the most interesting fields of study for reliable high-performance systems [37], [42], [45], [46], [47], [48]. Several research papers have also discussed the effects of application mapping on the essential parameters of ONoCs. Some of these works have only paid attention to the parameters of energy-efficient, and high-performance system design. For example, in the article [7], a suite of software tools is proposed for synthesizing hybrid opto-electrical NoC using four different search-based optimization heuristics.

On the other hand, some of the research papers have focused on the mutual effects of application mapping, and the reliability parameters of high-performance ONoC. Authors in [53], [54] claimed that although the application mapping is usually devised at the system level, it can have an impact on the failure rate of nanophotonic components at the physical level. They proposed a novel wavelength-routed mesh-based ONoC that was investigated through different application mapping strategies, and various communication patterns for temperature-induced fault rate. They also considered the power consumption of processing cores, which induces the temperature drift of MR’s resonance wavelength. An online multi-application mapping through a chain of algorithms (boundary allocation, boundary migration, and sub-mesh loss-aware application mapping) for improving performance parameters of ONoC is proposed by [51]. The authors of [26] considered crosstalk noise, and thermal variation, which severely impress the SNR of ONoC. They proposed an IP core mapping scheme through Genetic algorithm for 3D ONoC, where the reliability of the system besides its performance are targeted.

Fusella et al. have published several papers that are related to reliability-aware application mapping on ONoC. In [20], a design automation task mapping simulator for ONoC named PhoNoCMap was developed. This mapping tool automatically assigned tasks to processing elements, where the worst-case parameters of insertion loss and crosstalk are optimized. In [21], they extended their previous work by the formalization of the problem, and also developing some new heuristic approaches for task mapping, such as the priority-based list algorithm. In [23], the authors firstly analytically modeled the power loss-aware application mapping problem onto a generic mesh-based architecture, and then proposed an algorithm to automatically assign each IP core to the mesh tiles.

In our proposed approach, reliability consideration is twofold. On one the hand, as stated before, the reliability increase by hardware redundancy in the proposed fault-tolerant mechanism is satisfied. On the other hand, through insertion loss and crosstalk aware application mapping, the optical signal strength is targeted to be optimized. Therefore, the worst-case SNR value of the whole network is improved, and consequently, the probability of correct signal detection (signal integrity) due to the appropriate strength of the optical signal at the destination node is also increased.

3. Background and motivation
Although the high-level functionality of on-chip electrical data transmission is similar to the optical interconnects, there are fundamental differences in design methods. In one hand, the optical transmission should translate the behavior of electrons in the electrical domain to/from photons in the optical domain. On the other hand, in the electrical domain, one stream of data can be transmitted in each data session, while in the optical domain, simultaneous transmission of multiple data streams through a single physical interconnect is possible. The main components of an optical NoC can be categorized as the sender, the medium, and the receiver. The laser is the most important element of the sending part, which generates phase-coherent wavelengths of optical signals. Waveguides and MRs can be mentioned as a transmission medium. Finally, modulators and photodetectors are located in sending and receiving parts that convert the electrical signals to/from optical signals [10]. Fig. 1 depicts the overview of the optical data transmission in ONoC.

3.1. Fault models of ONoC
Fault-tolerant system design is vital for safety-critical systems where the system should work correctly, and uninterruptedly even if the system is faulty. Although the on-chip optical transmission scheme is non-vulnerable to transient faults such as radiation or electromagnetic fields, there exist some possible causes which can trigger a failure in on-chip optical devices. As follows, some of the most notable fault sources in ONoC are discussed [35], [38]. Some of these fault sources may cause transient faults such as thermal variation, and electrostatic discharge (ESD), while the others cause permanent faults (e.g., aging and process variation).

3.1.1. Optical signal strength
In traditional ENoC, the essential parameters of network evaluation are throughput, average network latency, and power (energy) consumption, while in ONoC, some other parameters are critical as well. ONoC does not buffer or retransmit the optical signal; however, it gets weaker proportionally to the number of network hops. Although the number of network hops does not significantly affect the total power consumption of the network, it can result in higher sensitivity to noise. The strength of an optical signal, which is sensed by the destination photodetector, and converted to the electrical signal, can be measured by Eq. (1). (1)
where 
 is the photo-current,  is the responsivity factor of P-I-N diode of photodetector at the receiver node, 
 is the optical power loss ratio, 
 trans-impedance amplifier load resistance, and 
 is the optical signal power received by the receiver node.

3.1.2. Electrostatic discharge
ESD occurs when a sudden flow of electrical current enters to a contact (e.g., I/O pin) or when a severe magnetic field causes electrical short current or dielectric breakdown which results in functionality violation of electrical circuit. Some of the silicon components, such as the dielectric, PN junction, and wiring may be affected by ESD. In ONoC, although the optical waveguides do not conduct electricity, the other parts such as switches and photodetectors are controlled electrically, and can be endangered by ESD. This phenomenon is harder to be controlled with technology scaling, while it can be prevented by appropriate IC packaging.

3.1.3. Temperature variation
In an ENoC, the temperature variation has side-effects such as electrical resistivity changes, which leads to increase in power consumption and delay, while it is quite different in ONoC. Photodetectors are vulnerable to thermal conditions and degrade over time. On the other hand, the optical MR can be tuned by temperature, so that heating beyond a certain temperature point would change its passband wavelength. The MR serves as a passband filter on both sides of an optical transmission. The spectrum of a modulated signal should be centered adjacent to the resonant wavelength of MR, which is entirely sensitive to the temperature. If there is a mismatch between the resonant wavelength of the sender and the receiver due to a wavelength shift caused by temperature variation and this amount of mismatch exceeds the passband width, reliable communication cannot occur. A study on an MR with the radius of μ shows that there is  wavelength drift per Centigrade [43]. They considered a WDM design with  disjoint channels from  to . It means each wavelength channel has  width. A temperature difference of about 13.5 °C between the sender and receiver nodes leads to a resonant wavelength mismatch of MRs at the two ends. Therefore, on-chip spatial variation of temperature above the mentioned value may lead to an unreliable nanophotonic communication [35].

In an MR, the dependence of a resonant wavelength (
) to its geometry can be stated by Eq. (2). (2)
 
 
where  is the resonant mode number (a constant integer), 
 is the effective index of optical mode,  is the perimeter, and  is the radius of MR. The parameter 
 changes with temperature fluctuations, which leads to resonant wavelength drift of MR [34]. Eq. (3) shows the dependency of resonant wavelength to changes of effective index. (3)
 
 
As stated in [44], the resonant wavelength of MR changes with temperature variation based on Eq. (4). (4)
 
 
 
Each MR is made of a silicon core (with refractive index of 
) and silicon cladding a.k.a silica (with refractive index of 
), which both of them change linearly with temperature [44]. This relationship is shown through Eq. (5). (5)
 
 
 
 
 
Eventually, based on measurement results, the effect of thermal fluctuations on the silicon is much more than that on silica [43].

3.1.4. Process variation
Process variation is an undesirable phenomenon where the manufactured optical device deviates from the designed scheme. Fabrication tolerance such as variability on material impurities, doping concentrations, and device geometry may cause process variation. For example, a variation in the photolithography process can affect the width and height of the ring ridge waveguide or MR radius. Based on some physical measurements, the resonant wavelength of silicon MR is significantly affected by the width change; that is to say about  resonant wavelength shift is achieved by  width variation. Another experimental measurement shows that the MR radius change of about 1 nm leads to about  change in 
 [43]. This wavelength mismatch will result in signal loss, and decrease communication reliability. Unfortunately, with recent technology scaling, the effect of process variation has also increased, and should be carefully considered by system designers [38].

3.1.5. Current noise
Current noise is another factor, which directly impacts the communication reliability. The photodetector is an optical device, which converts the received optical signal to an electrical current and then amplifies it. Three different current noise sources can be added, namely thermal noise (Johnson noise), dark current, and shot noise. The shot noise originates from random fluctuations in the flow of charge carriers. The thermal noise also comes into existence by random motions of carriers in resistive electrical components (e.g., diodes, amplifier circuitry, and resistors). Dark current (which is equal to reverse bias leakage current) is a small electrical current originating from a random generation of electrons and holes within the depletion area of photosensitive devices such as photodetector [38].

3.1.6. Aging
Aging means that all silicon-based components wear down over time. In ONoC, some of the aspects of aging may only affect electrical subcomponents, while the other aspects change the optical properties of components. Electromigration is the first factor, which mainly affects the electrical wire that controls the operation of MR. This factor does not affect the optical waveguide at all but causes an extra delay in the electrical wire by thinning out the thinnest portion of the wire. Laser degradation is another factor of aging where the optical lasers show signs of degradation after several hundred hours of operation. Laser degradation may worsen the worst-case scenario of SNR by missing wavelengths (i.e., channel fault) or weakening the original laser optical signal. Photodetector degradation over time, which originates from thermal conditions, and UV light is another factor of aging [35].

3.2. Optical reliability metrics
There are some metrics, which quantify the reliability of an optical communication [35]:

3.2.1. Signal to Noise Ratio (SNR)
This parameter measures the ratio of optical signal power to the noise of the transmission channel at the receiver point. This parameter indicates how much an optical signal gets weaker at the receiver by passing through hops, and shows the communication power efficiency. The SNR parameter (in dB) is formalized as Eq. . (6)
 
 
 
 
where 
 and 
 are the optical signal power, and the noise power, respectively. 
 was stated before in Eq. (1). The parameter 
 is the optical signal power loss, which equals 
 
, where 
 represents the passband mismatch due to the resonant wavelength variation (caused by process or thermal variations), and 
 stands for the width of channel passband.

 equals 
 where 
 is the receiver noise and 
 is the crosstalk noise. At the multi-Gbps communication rate, the most dominant noise factors at the receiver are thermal noise and dark current [44]. Thermal noise can be calculated by  where  is the Boltzmann constant,  is the effective noise bandwidth (in Hz),  is the temperature and  is the electrical bandwidth at the receiver. Some studies show that the dark current of Ge-on-SOI photodetector changes, from  to  when changing from the room temperature to , while the receiver sensitivity will be changed insignificantly. In other words, the effect of temperature rise on the photodetector dark current increase is negligible [61]. In this paper, we assume that 
 can be neglected and the main noise component is considered as the crosstalk noise. 
 entirely depends on the architecture of optical routers and is measured by the summation of all crosstalk noise inserted to the optical signal over the path (from source to destination nodes).

3.2.2. Bit Error Rate (BER)
This parameter, which measures the reliability of an optical communication, shows how well a photodetector can distinguish signal from noise in a transmitted optical stream. In other words, BER is the percentage of faulty bits from all transmitted bits during an optical transmission. Based on the Gaussian noise model [35], BER can be estimated through Eq. (7). (7)
 
 
 
where  stands for complementary error function, 
 and 
 denote the current values of “1” and “0” signal logics, respectively and 
, 
 are the corresponding noise standard deviation in each case. Without loss of generality, and with consideration of intensity modulation and limitation of thermal noise, the relation of 
 
 can be assumed [35]. Therefore, based on this assumption and the aforementioned equations, the parameter of BER can be rewritten as Eq. (8). (8)
 
 
 
In an investigation [44], for reliable optical communications, the required BER to provide the SNR of about 49 dB, is measured about 10−12. All types of optical fault models, such as thermal and process variations, may lead to signal power loss and subsequently decrease SNR and increase BER.

3.3. Fault-tolerant ONoC
As discussed before, the active components of an ONoC such as MRs and optical routers are more susceptible to faults than passive elements such as waveguide [40]. In the literature, there are some techniques, which are trying to recover network from optical faults. Adaptive routing (rerouting), modular redundancy, thermal tuning, reducing optical loss (improvement of the SNR parameter) and also traditional techniques for ENoC through buffering, checking and progressing (due to changing from optical domain to electrical domain and vice versa) can be referred to the most effective ONoC fault-tolerant techniques. The authors of [38], appropriately categorized the related work on fault-tolerant ONoC. In this paper, we applied the modular redundancy technique for the proposed fault-tolerant ONoC approach.

In the modular redundancy technique, some parts of a design are duplicated to tolerate the faulty parts. Some research papers have used Wavelength Division Multiplexing (WDM) as a fault-tolerant technique by enabling or disabling a specific wavelength, which causes a problem due to optical noise or manufacturing defect [10]. This technique is much applicable for permanent faults of modulators and photodetectors. The authors of [40] proposed a Fault-Tolerant Photonic Network-on-Chip architecture (FT-PHENIC), which tries to increase the reliability of packet transmission after detection of faulty MRs through minimal redundancy. They also proposed a fault-tolerant photonic router, path-configuration, set up procedure, and data transmission routing algorithm. None of the aforementioned fault-tolerant techniques proposed a general platform for implementing a fault-tolerant optical router with efficient hardware redundancy and logical reliability achievement. We have focused on the structure of the optical router architecture and tried to find some pieces of evidence for improving the reliability of data transmission where the previous works did not consider.

4. Proposed fault-tolerant scheme
In this section, first, the base architecture is discussed. Then, the proposed mechanism for adding fault-tolerant capability to the base architecture is proposed, and several examples in different traditional optical routers are presented.

4.1. System architecture
The base architecture for our purpose is similar to [40], which is based-on mesh topology shown in Fig. 2a. The platform uses Photonic Data Network (PDN) for data transmission and Electrical Control Network (ECN) for its path set-up and tear down. The routing algorithm is minimal XY-routing, and the Stall-Go mechanism is also used for the flow-control. In each tile, there is a Processing Element (PE) connected to ECN (for transmission of electrical control packets due to path configuration before data transmission) and also to PDN (for transmission of optical payload packets) through its corresponding interface (modulator/detector). Fig. 2b is related to each tile depicting the connections of PE, network interface and control modules, and Fig. 2c shows the optical router architecture.

4.2. Fault-tolerant mechanism
When a fault occurs in each network, there are some practical solutions to consider [33].

•
The easiest way is to ignore it, which may cause data loss at the receiver, which is not acceptable in reliable data transmission approaches.

•
Another way is the fault detection, which usually happens at the receiver node and data re-transmission policy is applied in this situation. This method is applied in our policy through checking the destination address of each transmitted packet in each receiver node. Although the proposed approach tries to transmit the optical data flawlessly, in cases that several faults occur in an optical path, which cannot be tolerated by the proposed approach, data re-transmission can be the last solution for cases where the optical data is not received by the correct receiver.

•
Fault correction is another approach where a faulty data can be received and be corrected by the receiver. In this paper, the considered fault type does not change the data packet fields and the optical packets is only misrouted due to faulty MRs, however, this condition never happens.

•
Fault location and also fault containment are mechanisms so that the location of a fault can be determined and the faulty element is isolated from other parts to prevent the propagation of fault effect to the whole system. In our proposed scheme, the faulty MR can be detected through fault diagnosis test by the control network. In the case of fault occurrence in each MR, the faulty MR will be isolated from the network and the redundant MR or extra path transmit the optical data to the correct path.

In the proposed method, the fault injection model consists of changing the status of each MR from ON to OFF state, and vise versa. In this way, a random MR is selected by the fault injection mechanism in the structure of the optical router for a single fault injection. In the same way, in n-fault injection scenario, n different MRs are selected randomly. In the case of single fault injection, due to the fault tolerant mechanism, which tolerates each single fault, the optical data stream is correctly transmitted to the correct destination node. In the case of several fault injection scenario, the flawless data transmission completely depends on the location of faults. For example, if two faults are injected in the location of a MR and its replica, the status of the MR and its replica simultaneously will be changed, which leads to misrouting the optical transmitted data. In this case, the injected faults can be detected by the destination node when the required optical data is not received correctly. On the other hand, if these two faults are injected in different locations (i.e., two replicas of two different MRs) the optical data will be perfectly transmitted. In this scenario, the injected faults will be masked through a fault-tolerant mechanism and will not be observed by the destination. The arbiter unit in the control network is responsible for diagnostic test to find the flawless operation of each MR. The arbitration algorithm is done similar to [39]. It is noteworthy to say that the fault detection and recovery mechanisms of the faulty MR is out of the scope of this paper and can be investigated by logical-level and also device-level strategies.

The microarchitecture of the fault-tolerant mechanism is depicted in Fig. 2. In fully optical NoC, the optical routers do not have the traditional pipeline stages of electrical routers (i.e., buffer allocation, routing computation, switch allocation, virtual channel allocation, switch traversal). In these networks, which are similar to circuit-switching networks, data transmission scenario has three distinct phases [10].

(1)
Path setup phase: In the first phase, the control network is responsible for reserving the path prior to sending the optical data. In this phase, the control network turns ON and OFF each MR of each optical router based on the locations of sender and receiver for each optical path. Acknowledge packets (ACK) and not acknowledge (NACK) packets are sent and the agreement or disagreement of the path reservation procedure.

(2)
Data transmission phase: In this phase, the optical data is modulated by the source node of the optical data network and uninterruptedly received by the destination node. There is no calculation in this phase and the optical data is only transmitted through an optical path (circuit), which was prepared in the first phase.

(3)
Path teardown: In this phase, after the flawless optical data transmission, a path teardown packet is sent to release the reserved path, which is managed by the control network.

4.3. Proposed fault-tolerant optical router
4.3.1. First step
Fig. 3(a) shows a Modified Fault-Tolerant Optical Router (MFTOR). The architecture of the proposed router is originated from optical router proposed by [39], [40] called FTTDOR, which is depicted in Fig. 3(b). FTTDOR was proposed for a hybrid optical mesh-based architecture with an electrical control network and photonic data network for high-reliable low-power 3D network design. Gray circles show primary MRs, which do not have redundancy and the black ones are dedicated to MRs, which need redundancy (except MR#17, which is a redundant MR). The main MRs are designated by a number and the redundant MRs by a letter from  to . For example, “” means the main MR#3 has the redundant MR of , whereas the main MR#1 does not have any redundant MR. Redundant MRs are placed in specific locations so that if one of the MRs in the main path is faulty, the fault-tolerant capability of the optical router would be guaranteed. Each redundant MR is located besides its main MR to guarantee the fault-tolerant mechanism. This mechanism is just like the hot standby-sparing fault tolerant mechanism where the main and spare modules are active at the same time. When the main MR is malfunctioned due to several fault sources (as mentioned in Sub- Section 3.1), the redundant MR operates the same as the main MR. It should be noted that the applied optical routing mechanism in this work is based on changing the status of each MR to ON and OFF states, while all optical data streams are modulated through a specific wavelength (called as Spatial-Routing or Circuit-Switching) [10]. As a result, all MRs can be switched to ON and OFF states through an electrical control network (Fig. 2b) to create an optical path during path setup phase of data transmission flow. In the case of fault-free scenario, the main and redundant MRs act identically (being in ON or OFF state), while in the faulty scenario, one of the main and redundant MRs will work correctly with relatively high probability [38]. The backup routing for the directions of North, East, West and South (NEWS) is done through the waveguide, which is connected to the Local (L) port. The L port, due to the location of MR#17, has a vital role in creating backup routing paths. Therefore, the other redundant MRs are located so that the optical input data from the NEWS ports will be routed through the L port. The proposed fault-tolerant optical router is designed to have a backup routing path (alternate path) as much as possible for each main path. It means that the algorithm prefers to use the existing MRs in the structure of the router to create the backup routes instead of the extra MRs or replicas for each MR. In the worst cases, when it is not possible to have the backup routes with existing MRs, using extra and replica MRs will be forced. Practically, the alternate path is less power efficient than the main routing path since the optical streams should traverse longer waveguides, more active MRs, and also more waveguide crossings. However, MFTOR has the same functionality as FTTDOR.

As stated in [19], in Mesh and Torus topologies with the XY routing algorithm, in each router, a packet is directly forwarded to its previous path with the probability of about 55%. The MFTOR can be considered as an effective optical router design from insertion loss parameter point of view since there is no active MR on the paths from E to W, N to S, and also their opposite directions. These paths use a direct waveguide, which helps decrease the overall insertion loss. Besides, in the case of a fault occurs in each MRs, the optical router correctly maintains the routing capability. In Fig. 3(b), the hollow lines show the waveguides, which are changed in comparison with FTTDOR. The modification to have straight paths (paths which do not have any MR in ON state) from N to S, W to E, and also the opposite directions are as follows:

•
FTTDOR uses MR#2 to send the optical data from N to S, while in MFTOR, with changing the location of E and N inputs, a direct path is created from N to S and MR#2 is not activated now.

•
In MFTOR, MR#14 is also relocated and sends the optical data from E to N instead of N to E data transmission in FTTDOR. In FTTDOR, MR#16 plays the role of MR#14 in MFTOR to send the optical data from E to N.

Fig. 4 depicts an example of a backup routing path in the case of fault occurrence in MR#14, which is replaced by the path with active microring resonators of MR#3, MR#17, and MR#13, respectively. The main routing path is depicted by the dotted blue line, and the backup path is shown by the red line.

Table 1, Table 2 show the MFTOR configuration of data transmission from different ports to the others for basic paths and backup routes, respectively. Based on Table 2, it is concluded that in some paths such as N to L, there is no distinct backup path. Based on Fig. 4, if there is a fault in MR#10, the faulty MR can be diagnosed and replaced by MR#F, maintaining the data transmission procedure. This originates from the fact that backup routes cannot be established for paths, which end in L port due to the location of MR#17, which helps the creation of backup paths. For example, in the case of fault occurrence in MR#14, the optical data is routed to L port through MR#3 and then after returning from MR#17, it can be routed back to the correct path with MR#13. Whereas in the case of fault occurrence in MR#3, there in no way to return back to the correct path through one of the MRs and in this situation, a redundant MR for MR#3 should be used.

As discussed in Section 3.2, the SNR parameter of an optical router decreases more if an optical data stream passes through a greater number of OFF or ON MRs. Although the redundant MRs and backup paths in MFTOR increase the reliability of the basic optical router due to fault-tolerant capability, adding more MRs may decrease the average SNR metric of the optical router for each mapped application. We discuss the reliability of application mapping based on basic and fault-tolerant optical routers in experimental results section.


Table 1. MFTOR configuration for basic paths.

Source port	Destination port
Local	North	South	East	West
Local	–	13	4	15	7
North	10	–	Direct	16	6
South	9	Direct	–	11	5
East	3	

2	–	Direct
West	8	12	1	Direct	–

Table 2. MFTOR configuration for backup paths.

Source port	Destination port
Local	North	South	East	West
Local	–	G	B	H	C
North	F	–	Direct	10-17–15	10-17-7
South	E	Direct	–	9-17–15	9-17-7
East	A	

3-17–4	–	Direct
West	D	8-17–13	8-17–4	Direct	–
4.3.2. Second step
The experimental results of the first attempt to proposing an efficient fault-tolerant optical router illustrate that the SNR parameter is decreased due to the redundant MR#17 located on L port. This SNR decrease can be figured out by comparing the SNR values of the baseline and MFTOR routers referred to in Table 8. This MR has an essential role in most redundant paths based on Table 2. In the second step, we intend to improve the SNR parameter of the router by relocating redundant MRs to another place, while maintaining the fault-tolerant capability. After proposing the fault-tolerant router architecture, and discussing the pros and cons, the design flow for obtaining a reliable fault-tolerant optical router from traditional routers will be discussed. At the end of this section, some of the most traditional optical routers will be modified to become fault-tolerant using the aforementioned design flow.

The appearance of MR#17 in the L port of MFTOR is the main reason for SNR decrease. Based on the simulation results, MR#17 has a key role in the backup paths, and therefore, should be devised. A straightforward solution can be the elimination of extra MRs (such as MR#17) and making full redundancy in other MRs. It means that we can remove extra MRs, which have been added intentionally for redundancy and replicate the other main MRs (i.e. MR#1, MR#2, MR#5, MR#6, MR#11, MR#12, MR#14, MR#16). From now on, we refer to this architecture as Fully-Redundant Fault-Tolerant Optical Router (FRFTOR). Although this architecture can be effective based on the SNR simulation results, this method cannot be an appropriate solution for this problem due to the following reasons:


Table 3. The configuration of IFTOR for backup routes.

Source port	Destination port
Local	North	South	East	West
Local	–	15-17–14	7-18–1	G	D
7-18–12	15-17–2	7–18	15-17
North	16-17–3	–	Direct	H	16-17
6-18–8	6–18
South	5-18–8	Direct	–	5-18	C
11-17–3	11-17
East	B	F	18-1	–	Direct
18–8	18–12
West	E	17-14	A	Direct	–
17–3	17–2
•
Increasing the amount of redundancy in optical routers leads to increasing the complexity of control network and optical router due to more area overhead, more control and data latency, more insertion loss and also more power loss and power consumption. The area overhead can easily be calculated by hardware overhead, while more insertion loss, latency and power overheads should be precisely evaluated. The overhead values completely depend on the number of changing the status of MRs from ON/OFF states, more crossing and traversing the optical signal from ON/OFF MRs. Some network parameters such as topology, routing algorithm and application mapping have direct effects on the values of these overhead values.

•
Although the full duplication of MRs increases the router reliability compared to MFTOR, the imposed overheads may limit its application. The reliability increase versus the imposed overheads will be discussed in Experimental Results section.

•
The fully redundant scheme does not create a backup route for each path. It means that we can only activate the redundant MR for each faulty MR in the case of fault occurrence. As we know, some types of faults, such as thermal variation, may deteriorate both the main MR and the redundant MR in a specific location of the chip.

In the second step of the proposed method, we intend to devise a fault-tolerant optical router with at least one backup path for each main path in the case of fault occurrence. Through this approach, even two backup paths for some main paths can be found. This modification may increase the fault-tolerant capability of the router, and consequently, the reliability of optical data transmission in ONoC.

In this approach, MR#17 is removed from L port, and two extra MRs are now added to W and E ports. Not only the SNR parameter of an optical router is targeted to be reinforced, but also, there will be more backup paths in comparison with MFTOR. Fig. 5 depicts the new architecture, which is called Improved Fault-Tolerant Optical Router (IFTOR). Indeed, in this architecture, MR#17 and MR#18 play the role of MR#17 in MFTOR. We claim that MR#17 and MR#18 do not have the same side-effects on SNR decrease, unlike the negative effect of MR#17 in MFTOR. As an example, in MFTOR, for all traffics from N/S to L port, MR#17 is traversed and has a notable impact on SNR decrease, while this MR is removed from L port in IFTOR. Table 3 shows the configuration of IFTOR for backup routes, while the configuration of main routes are the same as MFTOR. The main advantages of IFTOR in comparison with MFTOR are as follows:


Download : Download high-res image (218KB)
Download : Download full-size image
Fig. 5. IFTOR architecture.

•
As stated before, IFTOR architecture has more backup paths for some of port to port data transmissions, which means stronger fault-tolerant capability. There exist twenty backup paths in IFTOR, while only eight paths are available for backup routes in MFTOR.

•
In MFTOR, there are some backup paths only for eight main paths, and the redundant MRs should be activated for the other paths, while in IFTOR, there are at least one backup route for each main path. It should be noted that in some cases such as L port to N, there are two disjoint backup paths for substituting the main path.

•
In MFTOR, MR#17 can be considered as the single point of failure for backup routes because in the case of fault occurrence on MR#17, all the backup routes will be unavailable. One solution can be the duplication of MR#17; however, it adds more insertion loss and crosstalk to several paths and can significantly decrease the SNR parameter. Besides, in IFTOR, there are two key extra MRs for backup routes, and in the case of fault occurrence in one of them, there will be half of the backup routes.

4.4. Fault-tolerant optical router algorithm
In this section, an algorithm is proposed to obtain a fault-tolerant optical router from each traditional optical router. After explaining the algorithm, the fault-tolerant capability of some of the most important optical routers is investigated. The proposed algorithm is presented by Algorithm 1.


Download : Download high-res image (187KB)
Download : Download full-size image
In this algorithm, the input is an optical router without any fault-tolerant capability, and the output is the fault-tolerant architecture of the optical router. The steps of the algorithm are as follows:

In Step1:

•
Line2: The structure of the router should be modified, and in some cases, crossing waveguides should be added, and the structure of some parts of the router should be changed to have direct paths from N to S, W to E and the opposite directions as well.

In Step2:

•
Line4: Two extra MRs are added to E and W ports to enable extra paths in the case of fault occurrence. These extra MRs can help have extra paths for each main path in the case of fault occurrence.

•
Line5: A repetitive action should be done for each path  where set  contains all paths, which are located from LNEWS ports to other ports.

•
Line6: In this step, the optical router should be traversed along each of the main routes, and we suppose the fault occurrence in each MR of the path until the backup MR for each faulty MR is identified. If there is no backup path through other MRs, a redundant MR for the main MR should be considered.

•
Line7: If a backup path for the main path  is recognized (
 stands for the number of extra paths for the main path ), the algorithm continues Line8 otherwise, it jumps to Line11.

•
Line8: For each backup path  found for each the main path  (i.e., 
), the insertion loss parameter of the elements of the backup path is calculated in this step. Another parameter that can be considered here is the crosstalk noise. Since the crosstalk noise is directly related to an optical stream, which encounters the main optical data at a specific crossing, and knowing that the presence of an optical signal in other paths is a stochastic process, without loss of generality, we ignore its effect for simplification. It should be noted that in general, the insertion loss is more important than the crosstalk noise when comparing the values [21].

•
Line9: Each backup path  identified in Line8 should be separately calculated in terms of insertion loss (IL) parameters. The parameters and their notation are listed in Table 4. The summation of these parameters is evaluated to calculate the insertion loss of each backup path (i.e., 
).

•
Line10–13: The backup path with the minimum insertion loss will be selected as the major extra path (MEP) for each main path  (i.e., 
). It means that this backup path is the first candidate for replacement with the main path in the case of fault occurrence.

•
Line15: Here, we deal with the case of no backup path for a main path. In this step, we add redundant MRs to the main path . Due to the importance of L port, adding the redundant MRs should be done from L port to NEWS ports and in the opposite directions. It should be noted that if there is a fault in L port of a router, the related PE is disconnected from the whole network, while if the fault location is somewhere else, the connection of source and destination can be established through other paths or routers (in adaptive routing algorithms). After adding redundant MRs to the main paths of L port, the other paths are examined for adding redundancies.

In the following, we have applied our proposed algorithm to some traditional optical routers such as Crux, Crossbar, Cygnus, ODOR, OXY and Optical Router [20], [21]. Fig. 6 and Table 5 are related to the architectures and path configurations of the fault-tolerant optical routers, which are obtained by the proposed fault-tolerant optical router algorithm. In these figures, for example, FTCrux is equivalent to the fault-tolerant version of the traditional Crux optical router, which is obtained by Algorithm 1.


Table 4. The insertion loss parameters and variables of an optical router [21].

Parameters & variables	Notation	Value
Waveguide crossing loss	
−0.04 dB
Number of crossings in each path i	
Variable
Waveguide propagation Loss	
−0.274 dB/cm
Length of waveguide in path i	
Variable
Waveguide bending loss	
−0.005 dB/90°
Number of bending in each path i	
Variable
Power loss of MR in OFF state	
−0.005dB
Number of OFF MRs in path i	
Variable
Power loss of MR in ON state	
−0.5 dB
Number of ON MRs in path i	
Variable

Table 5. The path configuration for the proposed fault-tolerant optical routers.

(a) FTCrux	(b) FTCrossbar
Source port	Destination port	Source port	Destination port
Local	North	South	East	West		Local	North	South	East	West
Local	–	10-13-3	4-14-11	4-14	10-13	Local	–	2-22-6	4-21-16	B	A
4-14-9	10-13-5	D	–	4-21-14	2-22-7	2-22-8	4-21-15
North	A	–	Direct	–	–	North	10-22-5	–	12-21-16	G	F
12-21-13	10-22-7	10-22-8	12-21-15
South	H	Direct	–	–	–	South	19-22-5	19-22-6	–	19-22-8	K
20-21-13	20-21-14
East	B	C	14-11	–	Direct	East	H	15-22-6	L	–	I
14-8	14-9	15-22-5	15-22-7
West	E	13-3	G	Direct	–	West	C	D	8-21-16	E	–
13-2	13-5	8-21-13	8-21-14
(c) FTCygnus	(d) FTODOR
Source port	Destination port	Source port	Destination port
Local	North	South	East	West		Local	North	South	East	West
Local	–	1-18-15	1-18-15	F	A	Local	–	11-13-5	3-14-9	G	B
14-17-7	14-17-5	1-18	14-17	3-14-10	11-13-7	3-14	11-13
North	13-17-6	–	Direct	E	13-17	North	A	–	Direct	–	–
9-18-11	9-18
South	12-17-6	Direct	–	D	12-17	South	H	Direct	–	–	–
10-18-11
East	B	18-16	18-15	–	Direct	East	D	C	14-9	–	Direct
18-11	14-8	14-10
West	C	H	G	Direct	–	West	E	13-5	F	Direct	–
17-6	17-7	17-5	13-6	13-7
(e) FTOXY	(f) FT-Optical Router
Source port	Destination port	Source port	Destination port
Local	North	South	East	West		Local	North	South	East	West
Local	–	3-14-9	3-14-11	F	B	Local	–	6-14-1	8-13-12	E	D
10-13-6	10-13-7	3-14	10-13	8-13-9	6-14-3	6-14	8-13
North	A	–	Direct	–	–	North	C	–	Direct	–	–
South	H	Direct	–	–	–	South	F	Direct	–	–	–
East	C	14-9	14-11	–	Direct	East	G	14-11	H	–	Direct
14-8	14-10	14-2
West	D	E	G	Direct	–	West	B	A	13-12	Direct	–
13-5	13-6	13-7	13-11	13-9

Table 6. Comparing the features of fault-tolerant optical routers.

Fault tolerant optical router	Main MRs	Redundant MRs	Total MRs	Redundancy (%)	Backup paths
MFTOR	16	9	25	56	8
FRFTOR	16	16	32	100	0
IFTOR	16	10	26	62	20
FTCrossbar	20	16	36	80	24
FTCrux	12	10	22	83	12
FTCygnus	16	10	26	62	20
FTODOR	12	10	22	83	12
FTOXY	12	10	22	83	12
FT-Optical Router	12	10	22	83	12

Download : Download high-res image (728KB)
Download : Download full-size image
Fig. 6. The architecture of the proposed fault-tolerant optical routers (a) FTCrux (b) FTCrossbar (c) FTCygnus (d) FTODOR (e) FTOXY (f) FT-Optical Router.

In Table 6, some hardware characteristics of fault-tolerant optical routers designed by Algorithm 1 are compared. It can be concluded that MFTOR has the least redundancy overhead and also backup paths, and FRFTOR has no backup path. FTCrossbar with twenty-four paths and FRFTOR with 100% redundancy have the most backup paths and MR redundancy, respectively.

5. Application mapping
In our design time mapping strategy, a predefined application based on Directed Acyclic Graph (DAG), which shows the data communication between tasks will be mapped on PEs of an NoC architecture. In this section, after explaining the formal definition of DAG and NoC, the objective function and constraints are stated.

A DAG-based application, which is shown by  is a directed graph where each vertex of 
 stands for a task, and each edge of 
 represents the data volume communication from task 
 to task 
. Also, an NoC graph is shown by  where each PE of the architecture is represented by 
, and 
 shows the physical link between 
 and 
 PEs. It goes without saying that an application can be mapped on an architecture where . The mapping function (M), which dedicates a PE for execution of a task is stated as Eq. (9): (9)
The objective function and the constraints of this mapping problem can be stated as Eq. (10) and Eq. (11), respectively: (10)
(11) 
  where in the objective function, the term 
 means the SNR value is obtained by mapping each task pair 
 on two PEs of the NoC, and the mapping function tries to maximize the worst-case SNR (
) of the whole mapped application (i.e., 
). Subsequently, the constraints put two limits on the algorithm that (1) each task should be mapped on a PE, and (2) a PE cannot execute more than one task.

6. Experimental results
In this section, we discuss the effect of two steps in our proposed method on the reliability of the optical router and also the whole system. Efficient application mapping on ONoC based on different optical routers can help designers investigate the effect of optical router architectures on the reliability parameters of the design. By comparing the simulation results of reliability metrics in each optimized application mapping, we can compare different architectures and fairly decide on their efficiency. To fulfill this goal, the PhoNoCMap simulator [21] is used. In this simulator, several benchmark applications are mapped onto the Mesh-based architecture with XY routing algorithm with consideration of various fault-tolerant optical routers to optimize the worst-case SNR parameter.

Eight real-world benchmark applications (in the multimedia area) are used to evaluate the efficiency of the proposed method depicted in Table 7. The application mapping problem is known as NP-hard problem and usually is solved through heuristic approaches instead of time-consuming exhaustive search. We implemented our proposed method by two heuristic algorithms of Genetic Algorithm (GA) and Priority-based List Algorithm (PLA) [21]. It should be noted that in most cases, PLA has better results in comparison with GA because this mapping algorithm is more powerful and also takes more simulation time to prepare the results. All experimental results are reported after running 1000 times with random fault locations and the values equal to the average of the whole iterations.

6.1. First step’s simulation results
The simulation result of the First Step of the algorithm to improve the basic router, which we called MFTOR, is depicted in Table 8. The SNR parameter of the basic router, which has no fault-tolerant capability, is compared to MFTOR and FRFTOR. As mentioned before, in FRFTOR, all MRs are duplicated to have fully fault-tolerated router. The SNR parameters are also achieved through Genetic and Priority-List algorithms. The experimental results explain that the SNR parameter of MFTOR is considerably decreased in comparison with the basic router (optical router without fault-tolerant capability). It means that the extra MRs and also long distances of waveguides have a remarkable effect on insertion loss and consequently the SNR and reliability parameter of an optical router.


Table 7. Description of directed graphs for eight real-world multimedia benchmark applications [21].

Benchmark application	Area	Number of tasks	Description
263dec mp3dec	Audio processing	14	H.263 video decoder and MP3 audio decoder
263enc mp3enc	Audio processing	12	H.263 video encoder and MP3 audio encoder
DVOPD	Video processing	32	Dual Video Object Plane Decoder
MPEG-4	Video processing	12	MPEG4 decoder
MWD	Image Processing	12	Multi-Window Display
PIP	Image Processing	8	Picture-In-Picture application
VOPD	Video processing	16	Video Object Plane Decoder
Wavelet	Signal processing	22	wavelet transform application
In other words, optimizing application mapping is an essential concern with consideration of the communication requirements in each application. For example, as mentioned in [12], the worst-case SNR of each network should be above  to achieve the BER of 10−12. It can be concluded from the results that redundant MRs in MFTOR lead to decreasing SNR below the aforementioned BER threshold. Since maintaining the reliability parameters in some applications is mandatory, we have tried to improve the SNR parameter through the second step.

The question here is to know whether each MR has the same effect on the SNR parameter or not. By investigating the SNR values in each application mapping, it is concluded that MR#17 has an important role in the most routing paths, while the most probable traffic stream in each router is from L port to NEWS ports or in the opposite directions. Therefore, locating MR#17 in L port of each router drastically increases the SNR value of the optical data transmission, although the applications are mapped through optimizing algorithms. Through comparing the SNR values of MFTOR and FRFTOR, the effect of extra MRs applied for fault-tolerant capability such as MR#17 in comparison with duplicating all MRs on the SNR parameter can be distinguished. Almost in all applications and heuristic algorithms, the SNR parameter in FRFTOR is significantly more than the proposed MFTOR.


Table 8. Comparing the SNR parameter of Basic router, MFTOR, and FRFTOR.

Benchmark
applications	MFTOR	Basic router	FRFTOR
PLA	GA	PLA	GA	PLA	GA
263dec	16.731	16.512	39.565	39.335	39.345	36.995
263enc	16.638	16.655	39.93	39.085	39.345	38.445
DVOPD	13.476	13.976	14.326	16.389	16.864	15.461
MPEG4	15.76	15.449	19.119	19.026	18.9	18.389
MWD	16.588	16.39	39.93	39.08	39.345	37.061
PIP	16.493	16.493	39.253	39.003	39.263	36.538
VOPD	15.595	14.932	35.305	17.373	19.504	19.269
Wavelet	15.16	15.61	32.605	18.606	19.295	17.218

Download : Download high-res image (597KB)
Download : Download full-size image
Fig. 7. SNR values of network architectures with different fault-tolerant optical routers.

6.2. Second step’s simulation results
In this section, we discover the efficiency of the Second step of the proposed fault-tolerant algorithm. For this purpose, the parameters of SNR, laser power consumption and power loss in various fault-tolerant optical routers are evaluated and compared.

6.2.1. SNR parameter
Fig. 7, Fig. 7 show the SNR values of simulated ONoC with different aforementioned optical routers with PLA and GA application mapping algorithms, respectively. In both charts, the dashed lines represent the SNR value of . Overall, the simulation results prove that IFTOR and FRFTOR have better the SNR values in comparison with MFTOR. In some applications such as DVOPD, there is a specific router that has notably better the SNR values in comparison with the others. It demonstrates that the relation of tasks in an application may be compatible with the structure of a specific router and help to improve the SNR parameter of the architecture. Although the simulation results of the SNR parameter show that FRFTOR can be an appropriate solution in some applications and mapping algorithms in comparison with IFTOR, as discussed in Section 4.3.2, IFTOR has more considerable advantages. Also, the results depict that IFTOR with only 6% more redundancy, besides increasing the reliability through more backup paths, reinforces the SNR parameter by about 83% in PLA method.

Fig. 7(c) compare the SNR values of traditional optical routers with their fault-tolerant equivalents. The values which are presented in the figure, are the average of the results of all eight benchmark applications. It can be concluded that the SNR values are better in some optical routers, which have the direct paths from N to S, W to E, and in the opposite directions due to a decrease of crosstalk noise and insertion loss. On the other hand, the optical routers, which have been optimized for XY-routing algorithm such as OXY, ODOR, and Crux have better the SNR results than the general ones such as Crossbar. After investigating the SNR results, it can be found that ODOR has the best the SNR values in most cases.

6.2.2. Power loss
The crosstalk model and power loss parameters of the optical network are considered the same as [21] and are not repeated here for brevity. Fig. 8, Fig. 8 are related to the power loss of simulated optical routers in various benchmark applications and optical routers, respectively. Due to the better responses of PLA compared to GA optimization method, we only report just the result of PLA in this section. In Fig. 8(a), the IFTOR has the best power loss values (better power loss values are near 0) among other fault-tolerant routers in comparison with the equivalent original router. Also, Fig. 8(b) shows on average, the fault-tolerant optical router has more power loss by about 18.3% in comparison with the equivalent traditional optical routers. Optical router and Crux with about 2% and 39%, respectively have the least and the most power loss degradation in fault-tolerant optical routers compared to the equivalent traditional ones.

6.2.3. Laser power
One of the most notable parameters of power consumption in ONoC is laser power. The laser power should be enough to generate optical signals so that a proper detection occurs at photodetectors with consideration of path insertion loss. The average insertion loss decrease directly impacts the whole laser power consumption. The laser power consumption can be calculated by Eq. (12): (12)
 
where 
 is the photodetector sensitivity (assumed to be -20 dBm [52]), 
 is the power loss of the optical path (referred to Table 4) and 
 is the laser efficiency, which is between 0 and 1 [24] and considered as 5% in our simulations [13]. Fig. 9, Fig. 9 are related to the laser power consumption of simulated optical networks in various benchmark applications and optical routers, respectively. Based on Fig. 9(a), in some applications such as 263dec and 263enc, the laser power is negligible compared to other benchmark applications such as DVOPD. Furthermore, on average for all benchmark applications, FTFTOR, IFTOR, and MFTOR have 17%, 6.7%, and 4.3% laser power increase compared to the basic optical router, which has no fault-tolerant capability. Fig. 9(b) also shows that the Optical Router has the best laser power among all the fault-tolerant optical routers. Also, this figure depicts that the fault-tolerant optical routers have about 11% laser power increase on average in comparison with the traditional routers.

6.2.4. Vulnerability assessment of fault-tolerant optical routers
In this section, we analyze the vulnerability of the fault-tolerant optical routers, which are obtained by the proposed algorithm. Therefore, we evaluate the possibilities when a specific number of faults occur in an optical router, and the redundant MRs or backup routes correctly transmit the optical data to the right destination. In our assessment, several faults are randomly injected to some MRs of an optical router, and then, it is investigated whether the optical streams are received by the correct port of the router.

We have proposed a fault-tolerant algorithm that tolerates a single fault in one of the MRs of each optical router. Based on the rule of locality in case of occurrence of some types of physical faults such as thermal variations, the probability of misrouting through a fault-tolerant optical router in the presence of two faults is investigated here. This problem can be considered as a state–space explosion problem when the number of faults is more than two. Besides, the total number of scenarios when two MRs out of the whole MRs (i.e., 
, which consists of the main and redundant MRs) of an optical router are faulty, is obtained by 
. The failure probability of an optical router is calculated by enumerating the number of cases where an optical stream is deflected in the presence of a faulty-MR (or several ones) from its correct path divided by the number of combinations where two MRs can be faulty among all of the MRs in an optical router. In general, the failure probability of the fault-tolerant optical routers in the presence of two faults can be stated as Eq. (13): (13)
 
where  represents a path from one port to another in each optical router (e.g., N to S),  means the set of all paths in an optical router, and 
 stands for the number of MRs, which are located in the path . Obviously, the location of the faulty MR can be an important parameter. Therefore, we calculate all the possibilities of the location of faulty MR and the results, which are reported in Fig. 10 are the average of all scenarios. Based on the location of the main MRs and redundant MRs in optical routers (refer to Table 5), the probability values are calculated. For example, for FRFTOR, there are thirty-two MRs consisting of sixteen main MRs and sixteen redundant ones. The number of all combinations where two MRs among all thirty-two MRs may not work properly is 
. On the other hand, there are sixteen combinations where two MRs and their redundant MRs are getting faulty at the same time. So, the probability of incorrect function of FRFTOR is 
 
. The experimental results show that IFTOR with 2.95% and FTTDOR with 4.77% have the minimum and maximum failure probabilities, respectively.

In another vulnerability analysis, we discover the effect of fault injection on the SNR parameter decrease. In this analysis, a single fault is (or multiple faults are) injected to the architecture leading to misrouting some optical streams, which should traverse the faulty MR and eventually decrease the SNR parameter. The  parameter is measured by Eq. (14) where 
 and 
 represent the SNR values of the error-free router and faulty router, respectively. (14)
 
In the first experiment, a single fault is randomly injected to one MR of a fault-tolerant optical router in the whole network, and a benchmark application is mapped onto faulty and error-free architecture separately. This experiment is repeated for all combinations of faulty MR location. The average values of  of the faulty router are reported in Fig. 11.


Download : Download high-res image (150KB)
Download : Download full-size image
Fig. 10. The probability of fault occurrence in the presence of two faults in various fault-tolerant optical routers.


Download : Download high-res image (781KB)
Download : Download full-size image
Fig. 11. Router SNR decrease for different fault-tolerant architectures with different benchmark applications mapping in the presence of fault(s).

Based on Fig. 11(a), the experimental results show that in the case of single fault injection, FTCygnus router has the least, and FTODOR architecture has the most  with the average values of 6.35% and 14.84% in all benchmark applications, respectively. On the other hand, MWD and DVOPD applications have the minimum and maximum  with average values of 4.76% and 16.38% among all benchmark applications for all fault-tolerant architectures. In the case of two injected faults (Fig. 11(b)), FTOXY with 17.45% and FTODOR with 22.57% have the least and the most values of the average of  in the whole benchmark applications. Also, in this experiment, PIP and DVOPD applications have the least and the most values with 11.59% and 25.51%, respectively. This experiment shows that different applications with various relations between tasks of each task graph (TG) may have different effects on the vulnerability of the optical router.

Fig. 12 depicts another vulnerability assessment of IFTOR, which discusses the effect of mapping synthetic applications on the  parameter. In this experiment, the  parameter is evaluated for fifty random TGs prepared by the TGFF tool [18]. Each TG is randomly generated with eight to thirty tasks and also dependencies between these tasks, which are between fifteen to eighty edges. Fig. 12, Fig. 12 illustrate the simulation results of the average of  values in case of a single fault and two faults injection to the structure of fault-tolerant optical routers, respectively. In each figure, black line, dotted black line, red line and dotted red line are related to  of the faulty router in each mapping TG, the average value of  of the faulty router,  of the whole network and the average value of the entire network , respectively. The simulation results show that the values of  in the case of single fault injection are in the range of 9% to 26% with the average value of 16.2%. Besides, the values in the case of two fault injection scenario are between 14% to 42% with the average  of 28.7%. This experiment proves that the reliability of a fault-tolerant optical router directly depends on the type of application and their dependencies and also the application mapping strategy and should be appropriately managed in the case of fault occurrence.


Download : Download high-res image (1MB)
Download : Download full-size image
Fig. 12. SNR decrease of different fault-tolerant architectures in various benchmark applications in the presence of fault(s).

7. Conclusion and future work
Optical router is one of the most critical elements of an ONoC. There are several waveguides and MRs in the structure of these routers, which are susceptible to getting faulty. In this paper, an algorithm is proposed, which tries to maintain the reliability of optical routers in the presence of fault occurrence through some hardware overheads. These overheads include extra paths and MR duplication. Several well-known Mesh-based optical routers are discussed with the proposed fault-tolerant algorithm, and their efficiency is compared along with the optimized application mapping approach. We discovered the effectiveness of the fault-tolerant optical routers by analyzing the overhead of the proposed algorithm compared to the traditional optical routers. The experimental results show that the overhead of the proposed algorithm is about 13% in all benchmark applications in comparison with the basic router, while the optical router can tolerate single fault in each MR.

As future work, we intend to propose and solve an optimization problem to find the structure of the efficient fault-tolerant optical router that can achieve the optimum SNR decrease and power loss for a specific application. In this problem, the number of extra paths and redundant MRs and the location of them can be extracted from the optimization algorithm. On the other hand, the reliability parameter of an optical router and consequently the improvement of the reliability in fault-tolerant optical routers will be calculated.

